{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/axele/Downloads/encore-tasks/encore-tasks-main/src/components/ColorPicker.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { Palette, Pipette } from \"lucide-react\";\n\ninterface ColorPickerProps {\n  selectedColor: string;\n  onColorSelect: (color: string) => void;\n  className?: string;\n}\n\nconst colorPalettes = {\n  \"Основные\": [\n    \"#ef4444\", \"#f97316\", \"#f59e0b\", \"#eab308\", \"#84cc16\", \"#22c55e\",\n    \"#10b981\", \"#14b8a6\", \"#06b6d4\", \"#0ea5e9\", \"#3b82f6\", \"#6366f1\",\n    \"#8b5cf6\", \"#a855f7\", \"#d946ef\", \"#ec4899\", \"#f43f5e\", \"#64748b\"\n  ],\n  \"Пастельные\": [\n    \"#fecaca\", \"#fed7aa\", \"#fde68a\", \"#fef3c7\", \"#d9f99d\", \"#bbf7d0\",\n    \"#a7f3d0\", \"#99f6e4\", \"#a5f3fc\", \"#bae6fd\", \"#bfdbfe\", \"#c7d2fe\",\n    \"#ddd6fe\", \"#e9d5ff\", \"#f3e8ff\", \"#fce7f3\", \"#fecdd3\", \"#e2e8f0\"\n  ],\n  \"Темные\": [\n    \"#991b1b\", \"#9a3412\", \"#92400e\", \"#854d0e\", \"#365314\", \"#14532d\",\n    \"#064e3b\", \"#134e4a\", \"#164e63\", \"#0c4a6e\", \"#1e3a8a\", \"#312e81\",\n    \"#581c87\", \"#701a75\", \"#86198f\", \"#be185d\", \"#be123c\", \"#334155\"\n  ],\n  \"Градиенты\": [\n    \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\n    \"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)\",\n    \"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)\",\n    \"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)\",\n    \"linear-gradient(135deg, #fa709a 0%, #fee140 100%)\",\n    \"linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)\",\n    \"linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)\",\n    \"linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)\",\n    \"linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%)\",\n    \"linear-gradient(135deg, #fad0c4 0%, #ffd1ff 100%)\",\n    \"linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)\",\n    \"linear-gradient(135deg, #ff8a80 0%, #ea80fc 100%)\"\n  ],\n  \"Профессиональные\": [\n    \"#1f2937\", \"#374151\", \"#4b5563\", \"#6b7280\", \"#9ca3af\", \"#d1d5db\",\n    \"#1e40af\", \"#2563eb\", \"#3b82f6\", \"#60a5fa\", \"#93c5fd\", \"#dbeafe\",\n    \"#059669\", \"#10b981\", \"#34d399\", \"#6ee7b7\", \"#a7f3d0\", \"#d1fae5\",\n    \"#dc2626\", \"#ef4444\", \"#f87171\", \"#fca5a5\", \"#fecaca\", \"#fee2e2\"\n  ],\n  \"Природные\": [\n    \"#365314\", \"#4d7c0f\", \"#65a30d\", \"#84cc16\", \"#a3e635\", \"#bef264\",\n    \"#0f766e\", \"#0d9488\", \"#14b8a6\", \"#2dd4bf\", \"#5eead4\", \"#99f6e4\",\n    \"#92400e\", \"#c2410c\", \"#ea580c\", \"#fb923c\", \"#fdba74\", \"#fed7aa\",\n    \"#7c2d12\", \"#9a3412\", \"#c2410c\", \"#ea580c\", \"#f97316\", \"#fb923c\"\n  ]\n};\n\nexport function ColorPicker({ selectedColor, onColorSelect, className }: ColorPickerProps) {\n  const [activeTab, setActiveTab] = useState(\"Основные\");\n  const [customColor, setCustomColor] = useState(\"#6366f1\");\n  const [showCustomPicker, setShowCustomPicker] = useState(false);\n\n  const handleCustomColorChange = (color: string) => {\n    setCustomColor(color);\n    onColorSelect(color);\n  };\n\n  const isGradient = (color: string) => color.startsWith('linear-gradient');\n\n  return (\n    <div className={cn(\"w-full\", className)}>\n      {/* Tabs */}\n      <div className=\"mb-4\">\n        <div className=\"flex flex-wrap gap-1 mb-3\">\n          {Object.keys(colorPalettes).map((palette) => (\n            <button\n              key={palette}\n              onClick={() => setActiveTab(palette)}\n              className={cn(\n                \"px-3 py-1 text-sm rounded-full transition-colors\",\n                activeTab === palette\n                  ? \"bg-primary-500 text-white\"\n                  : \"bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white\"\n              )}\n            >\n              {palette}\n            </button>\n          ))}\n          <button\n            onClick={() => setShowCustomPicker(!showCustomPicker)}\n            className={cn(\n              \"px-3 py-1 text-sm rounded-full transition-colors flex items-center gap-1\",\n              showCustomPicker\n                ? \"bg-primary-500 text-white\"\n                : \"bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white\"\n            )}\n          >\n            <Pipette className=\"w-3 h-3\" />\n            Свой цвет\n          </button>\n        </div>\n      </div>\n\n      {/* Custom Color Picker */}\n      {showCustomPicker && (\n        <div className=\"mb-4 p-3 bg-white/5 border border-white/10 rounded-lg\">\n          <div className=\"flex items-center gap-3\">\n            <input\n              type=\"color\"\n              value={customColor}\n              onChange={(e) => handleCustomColorChange(e.target.value)}\n              className=\"w-12 h-8 rounded border border-white/20 bg-transparent cursor-pointer\"\n            />\n            <input\n              type=\"text\"\n              value={customColor}\n              onChange={(e) => handleCustomColorChange(e.target.value)}\n              placeholder=\"#6366f1\"\n              className=\"flex-1 px-3 py-1 bg-white/5 border border-white/10 rounded text-white placeholder-gray-400 focus:outline-none focus:border-primary-500\"\n            />\n            <button\n              onClick={() => onColorSelect(customColor)}\n              className=\"px-3 py-1 bg-primary-500 hover:bg-primary-600 text-white rounded transition-colors\"\n            >\n              Применить\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Color Grid */}\n      {!showCustomPicker && (\n        <div className=\"grid grid-cols-8 gap-1.5\">\n          {colorPalettes[activeTab as keyof typeof colorPalettes].map((color, index) => (\n            <button\n              key={`${activeTab}-${index}`}\n              onClick={() => onColorSelect(color)}\n              className={cn(\n                \"w-8 h-8 rounded-lg border-2 transition-all hover:scale-105 relative overflow-hidden\",\n                selectedColor === color\n                  ? \"border-white scale-110 shadow-lg\"\n                  : \"border-white/20 hover:border-white/40\"\n              )}\n              style={{\n                background: color\n              }}\n              title={color}\n            >\n              {selectedColor === color && (\n                <div className=\"absolute inset-0 flex items-center justify-center\">\n                  <div className=\"w-3 h-3 bg-white rounded-full shadow-lg\" />\n                </div>\n              )}\n            </button>\n          ))}\n        </div>\n      )}\n\n      {/* Selected Color Preview */}\n      <div className=\"mt-4 p-3 bg-white/5 border border-white/10 rounded-lg\">\n        <div className=\"flex items-center gap-3\">\n          <div\n            className=\"w-8 h-8 rounded border border-white/20\"\n            style={{ background: selectedColor }}\n          />\n          <div className=\"flex-1\">\n            <div className=\"text-sm text-gray-300\">Выбранный цвет:</div>\n            <div className=\"text-xs text-gray-400 font-mono\">\n              {isGradient(selectedColor) ? 'Градиент' : selectedColor}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 345, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/axele/Downloads/encore-tasks/encore-tasks-main/src/components/CreateProjectModal.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport { Project, User } from \"@/types\";\nimport { useApp } from \"@/contexts/AppContext\";\nimport { X, Save, Users, MessageCircle } from \"lucide-react\";\nimport { ColorPicker } from \"./ColorPicker\";\n\ninterface CreateProjectModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: (project: Omit<Project, \"id\" | \"createdAt\">) => void;\n}\n\n\n\n\nexport function CreateProjectModal({\n  isOpen,\n  onClose,\n  onSave\n}: CreateProjectModalProps) {\n  const { state } = useApp();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [formData, setFormData] = useState({\n    name: \"\",\n    description: \"\",\n    color: \"#6366f1\",\n    memberIds: [] as string[],\n    telegramChatId: \"\",\n    telegramTopicId: \"\"\n  });\n\n  if (!isOpen) return null;\n\n  const handleSave = async () => {\n    if (!formData.name.trim() || !state.currentUser || isSubmitting) return;\n\n    setIsSubmitting(true);\n    setError(null);\n    try {\n      const selectedMembers = state.users.filter(\n        (user) =>\n        formData.memberIds.includes(user.id) ||\n        user.id === state.currentUser?.id\n      );\n\n      // Always include current user as member\n      if (!selectedMembers.find((m) => m.id === state.currentUser?.id)) {\n        selectedMembers.push(state.currentUser);\n      }\n\n      const newProject: Omit<Project, \"id\" | \"createdAt\"> = {\n        name: formData.name,\n        description: formData.description || undefined,\n        color: formData.color,\n        members: selectedMembers,\n        createdBy: state.currentUser.id,\n        telegramChatId: formData.telegramChatId || undefined,\n        telegramTopicId: formData.telegramTopicId || undefined\n      };\n\n      await onSave(newProject);\n\n      // Reset form only on success\n      setFormData({\n        name: \"\",\n        description: \"\",\n        color: \"#6366f1\",\n        memberIds: [],\n        telegramChatId: \"\",\n        telegramTopicId: \"\"\n      });\n      setError(null);\n    } catch (error) {\n      console.error('Error creating project:', error);\n      setError(error instanceof Error ? error.message : 'Ошибка сервера. Попробуйте позже.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const toggleMember = (userId: string) => {\n    setFormData((prev) => ({\n      ...prev,\n      memberIds: prev.memberIds.includes(userId) ?\n      prev.memberIds.filter((id) => id !== userId) :\n      [...prev.memberIds, userId]\n    }));\n  };\n\n  return (\n    <div\n      className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm\"\n      data-oid=\"_.:6v5f\">\n\n      <div\n        className=\"w-full max-w-2xl max-h-screen bg-gray-900/95 backdrop-blur-xl border border-white/10 rounded-xl overflow-hidden flex flex-col\"\n        data-oid=\"pecc:nv\">\n\n        {/* Header */}\n        <div\n          className=\"flex items-center justify-between p-6 border-b border-white/10 flex-shrink-0\"\n          data-oid=\"gxd5574\">\n\n          <h2 className=\"text-xl font-semibold text-white\" data-oid=\"90:scn_\">\n            Создать проект\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"p-2 hover:bg-white/10 rounded-lg transition-colors\"\n            data-oid=\"b9hx7vc\">\n\n            <X className=\"w-5 h-5 text-gray-400\" data-oid=\"lw1amj-\" />\n          </button>\n        </div>\n\n        <div className=\"p-6 space-y-6 overflow-y-auto flex-1\" data-oid=\"u4l9zpa\">\n          {/* Name */}\n          <div data-oid=\"b9mqchc\">\n            <label\n              className=\"block text-sm font-medium text-gray-300 mb-2\"\n              data-oid=\"416-wuh\">\n\n              Название проекта *\n            </label>\n            <input\n              type=\"text\"\n              value={formData.name}\n              onChange={(e) =>\n              setFormData({ ...formData, name: e.target.value })\n              }\n              className=\"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-primary-500\"\n              placeholder=\"Введите название проекта\"\n              autoFocus\n              data-oid=\"q-4h2qo\" />\n\n          </div>\n\n          {/* Description */}\n          <div data-oid=\"18vkhh9\">\n            <label\n              className=\"block text-sm font-medium text-gray-300 mb-2\"\n              data-oid=\"_wa:u0d\">\n\n              Описание\n            </label>\n            <textarea\n              value={formData.description}\n              onChange={(e) =>\n              setFormData({ ...formData, description: e.target.value })\n              }\n              rows={3}\n              className=\"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-primary-500 resize-none\"\n              placeholder=\"Добавьте описание проекта\"\n              data-oid=\"7bj9.uk\" />\n\n          </div>\n\n          {/* Color */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n              Цвет проекта\n            </label>\n            <ColorPicker\n              selectedColor={formData.color}\n              onColorSelect={(color) => setFormData({ ...formData, color })}\n            />\n          </div>\n\n          {/* Members */}\n          <div data-oid=\"yhaanv:\">\n            <label\n              className=\"block text-sm font-medium text-gray-300 mb-2\"\n              data-oid=\"uklfg-o\">\n\n              <Users className=\"w-4 h-4 inline mr-1\" data-oid=\"02tedyo\" />\n              Участники проекта\n            </label>\n            <div\n              className=\"space-y-2 max-h-32 overflow-y-auto\"\n              data-oid=\"-3.9tsc\">\n\n              {state.users.\n              filter((user) => user.id !== state.currentUser?.id).\n              map((user) =>\n              <label\n                key={user.id}\n                className=\"flex items-center gap-3 p-2 hover:bg-white/5 rounded-lg cursor-pointer\"\n                data-oid=\"n4c2:xw\">\n\n                    <input\n                  type=\"checkbox\"\n                  checked={formData.memberIds.includes(user.id)}\n                  onChange={() => toggleMember(user.id)}\n                  className=\"w-4 h-4 text-primary-500 bg-white/5 border-white/20 rounded focus:ring-primary-500\"\n                  data-oid=\"o4k1x57\" />\n\n\n                    <div className=\"flex items-center gap-2\" data-oid=\"b66n06e\">\n                      {state.settings?.showAvatars && (\n                        user.avatar ?\n                        <img\n                          src={user.avatar}\n                          alt={user.name}\n                          className=\"w-6 h-6 rounded-full\"\n                          data-oid=\":-_yxya\" /> :\n\n\n                        <div\n                          className=\"w-6 h-6 bg-primary-500 rounded-full flex items-center justify-center text-xs text-white\"\n                          data-oid=\"pvyjrt6\">\n\n                            {user.name.charAt(0)}\n                          </div>\n                      )}\n                      <span className=\"text-white\" data-oid=\"8jq04fu\">\n                        {user.name}\n                      </span>\n                      <span\n                    className=\"text-xs text-gray-400\"\n                    data-oid=\"a_8nuiu\">\n\n                        ({user.role === 'admin' ? 'Администратор' : 'Пользователь'})\n                      </span>\n                    </div>\n                  </label>\n              )}\n            </div>\n          </div>\n\n          {/* Telegram Integration */}\n          <div\n            className=\"space-y-4 p-4 bg-white/5 rounded-lg\"\n            data-oid=\"9j4gpnt\">\n\n            <h3\n              className=\"text-sm font-medium text-gray-300 flex items-center gap-2\"\n              data-oid=\"pnm.ywv\">\n\n              <MessageCircle className=\"w-4 h-4\" data-oid=\"ayb8q3w\" />\n              Интеграция с Telegram\n            </h3>\n\n            <div data-oid=\"u6lu2av\">\n              <label\n                className=\"block text-xs text-gray-400 mb-1\"\n                data-oid=\"q4q7:t8\">\n\n                ID чата/группы (необязательно)\n              </label>\n              <input\n                type=\"text\"\n                value={formData.telegramChatId}\n                onChange={(e) =>\n                setFormData({ ...formData, telegramChatId: e.target.value })\n                }\n                className=\"w-full px-3 py-2 bg-white/5 border border-white/10 rounded text-white placeholder-gray-400 focus:outline-none focus:border-primary-500 text-sm\"\n                placeholder=\"-1001234567890\"\n                data-oid=\"_mxgof2\" />\n\n            </div>\n\n            <div data-oid=\"-p:mvr6\">\n              <label\n                className=\"block text-xs text-gray-400 mb-1\"\n                data-oid=\"u2jnepd\">\n\n                ID топика (для групп с топиками)\n              </label>\n              <input\n                type=\"text\"\n                value={formData.telegramTopicId}\n                onChange={(e) =>\n                setFormData({ ...formData, telegramTopicId: e.target.value })\n                }\n                className=\"w-full px-3 py-2 bg-white/5 border border-white/10 rounded text-white placeholder-gray-400 focus:outline-none focus:border-primary-500 text-sm\"\n                placeholder=\"123\"\n                data-oid=\"7gvv45b\" />\n\n            </div>\n          </div>\n        </div>\n\n        {/* Error Message */}\n        {error && (\n          <div className=\"mx-6 p-3 bg-red-500/10 border border-red-500/20 rounded-lg\">\n            <p className=\"text-sm text-red-400\">{error}</p>\n          </div>\n        )}\n\n        {/* Actions */}\n        <div\n          className=\"flex justify-end gap-3 p-6 border-t border-white/10 flex-shrink-0\"\n          data-oid=\"2_z-bg5\">\n\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 text-gray-400 hover:text-white transition-colors\"\n            data-oid=\"c3wa42z\">\n\n            Отмена\n          </button>\n          <button\n            onClick={handleSave}\n            disabled={!formData.name.trim() || isSubmitting}\n            className=\"flex items-center gap-2 px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n            data-oid=\"ny:l5cm\">\n\n            <Save className=\"w-4 h-4\" data-oid=\"h9j_v5c\" />\n            {isSubmitting ? 'Создание...' : 'Создать проект'}\n          </button>\n        </div>\n      </div>\n    </div>);\n\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 844, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/axele/Downloads/encore-tasks/encore-tasks-main/src/components/ConfirmationModal.tsx"],"sourcesContent":["import React from 'react';\nimport { X, AlertTriangle, Info, AlertCircle } from 'lucide-react';\nimport { createPortal } from 'react-dom';\n\ninterface ConfirmationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onConfirm: () => void;\n  title: string;\n  message: string;\n  confirmText?: string;\n  cancelText?: string;\n  type?: 'danger' | 'warning' | 'info';\n}\n\nconst ConfirmationModal: React.FC<ConfirmationModalProps> = ({\n  isOpen,\n  onClose,\n  onConfirm,\n  title,\n  message,\n  confirmText = 'Подтвердить',\n  cancelText = 'Отмена',\n  type = 'warning'\n}) => {\n  if (!isOpen) return null;\n\n  const getTypeStyles = () => {\n    switch (type) {\n      case 'danger':\n        return {\n          icon: AlertTriangle,\n          confirmButton: 'bg-red-600 hover:bg-red-700 text-white shadow-lg hover:shadow-red-700/25',\n          iconBg: 'bg-red-500/20',\n          iconColor: 'text-red-400'\n        };\n      case 'warning':\n        return {\n          icon: AlertCircle,\n          confirmButton: 'bg-yellow-600 hover:bg-yellow-700 text-white shadow-lg hover:shadow-yellow-700/25',\n          iconBg: 'bg-yellow-500/20',\n          iconColor: 'text-yellow-400'\n        };\n      case 'info':\n        return {\n          icon: Info,\n          confirmButton: 'bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-blue-700/25',\n          iconBg: 'bg-blue-500/20',\n          iconColor: 'text-blue-400'\n        };\n      default:\n        return {\n          icon: AlertCircle,\n          confirmButton: 'bg-yellow-600 hover:bg-yellow-700 text-white shadow-lg hover:shadow-yellow-700/25',\n          iconBg: 'bg-yellow-500/20',\n          iconColor: 'text-yellow-400'\n        };\n    }\n  };\n\n  const styles = getTypeStyles();\n  const IconComponent = styles.icon;\n\n  const handleBackdropClick = (e: React.MouseEvent) => {\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  };\n\n  const handleConfirm = () => {\n    onConfirm();\n    onClose();\n  };\n\n  const modalContent = (\n    <div \n      className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999] flex items-center justify-center p-4\"\n      onClick={handleBackdropClick}\n    >\n      <div className=\"glass-dark p-6 max-w-md w-full mx-4 shadow-2xl animate-in fade-in-0 zoom-in-95 duration-200\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center gap-3\">\n            <div className={`p-2 ${styles.iconBg} rounded-lg`}>\n              <IconComponent className={`w-5 h-5 ${styles.iconColor}`} />\n            </div>\n            <h3 className=\"text-lg font-semibold text-white\">\n              {title}\n            </h3>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"p-1 hover:bg-gray-700/50 rounded-lg transition-colors\"\n          >\n            <X className=\"w-5 h-5 text-gray-400\" />\n          </button>\n        </div>\n\n        {/* Message */}\n        <p className=\"text-gray-300 mb-6 leading-relaxed\">\n          {message}\n        </p>\n\n        {/* Actions */}\n        <div className=\"flex gap-3 justify-end\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 text-gray-300 hover:text-white hover:bg-gray-700/50 rounded-lg transition-all duration-200 font-medium\"\n          >\n            {cancelText}\n          </button>\n          <button\n            onClick={handleConfirm}\n            className={`px-4 py-2 rounded-lg transition-all duration-200 font-medium ${styles.confirmButton}`}\n          >\n            {confirmText}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n\n  // Рендерим модальное окно в body через портал\n  return typeof window !== 'undefined' ? createPortal(modalContent, document.body) : null;\n};\n\nexport default ConfirmationModal;"],"names":[],"mappings":";;;;AACA;AAAA;AAAA;AAAA;AACA;;;;AAaA,MAAM,oBAAsD,CAAC,EAC3D,MAAM,EACN,OAAO,EACP,SAAS,EACT,KAAK,EACL,OAAO,EACP,cAAc,aAAa,EAC3B,aAAa,QAAQ,EACrB,OAAO,SAAS,EACjB;IACC,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,gBAAgB;QACpB,OAAQ;YACN,KAAK;gBACH,OAAO;oBACL,MAAM,wNAAA,CAAA,gBAAa;oBACnB,eAAe;oBACf,QAAQ;oBACR,WAAW;gBACb;YACF,KAAK;gBACH,OAAO;oBACL,MAAM,oNAAA,CAAA,cAAW;oBACjB,eAAe;oBACf,QAAQ;oBACR,WAAW;gBACb;YACF,KAAK;gBACH,OAAO;oBACL,MAAM,kMAAA,CAAA,OAAI;oBACV,eAAe;oBACf,QAAQ;oBACR,WAAW;gBACb;YACF;gBACE,OAAO;oBACL,MAAM,oNAAA,CAAA,cAAW;oBACjB,eAAe;oBACf,QAAQ;oBACR,WAAW;gBACb;QACJ;IACF;IAEA,MAAM,SAAS;IACf,MAAM,gBAAgB,OAAO,IAAI;IAEjC,MAAM,sBAAsB,CAAC;QAC3B,IAAI,EAAE,MAAM,KAAK,EAAE,aAAa,EAAE;YAChC;QACF;IACF;IAEA,MAAM,gBAAgB;QACpB;QACA;IACF;IAEA,MAAM,6BACJ,8OAAC;QACC,WAAU;QACV,SAAS;kBAET,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAW,CAAC,IAAI,EAAE,OAAO,MAAM,CAAC,WAAW,CAAC;8CAC/C,cAAA,8OAAC;wCAAc,WAAW,CAAC,QAAQ,EAAE,OAAO,SAAS,EAAE;;;;;;;;;;;8CAEzD,8OAAC;oCAAG,WAAU;8CACX;;;;;;;;;;;;sCAGL,8OAAC;4BACC,SAAS;4BACT,WAAU;sCAEV,cAAA,8OAAC,4LAAA,CAAA,IAAC;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAKjB,8OAAC;oBAAE,WAAU;8BACV;;;;;;8BAIH,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,SAAS;4BACT,WAAU;sCAET;;;;;;sCAEH,8OAAC;4BACC,SAAS;4BACT,WAAW,CAAC,6DAA6D,EAAE,OAAO,aAAa,EAAE;sCAEhG;;;;;;;;;;;;;;;;;;;;;;;IAOX,8CAA8C;IAC9C,OAAO,6EAA4E;AACrF;uCAEe","debugId":null}},
    {"offset": {"line": 1017, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 1023, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/axele/Downloads/encore-tasks/encore-tasks-main/src/components/CustomSelect.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { ChevronDown, Check } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface Option {\n  value: string;\n  label: string;\n  color?: string;\n}\n\ninterface CustomSelectProps {\n  options: Option[];\n  value: string;\n  onChange: (value: string) => void;\n  placeholder?: string;\n  className?: string;\n  disabled?: boolean;\n}\n\nexport function CustomSelect({\n  options,\n  value,\n  onChange,\n  placeholder = \"Выберите...\",\n  className,\n  disabled = false\n}: CustomSelectProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const selectRef = useRef<HTMLDivElement>(null);\n\n  const selectedOption = options.find(option => option.value === value);\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (selectRef.current && !selectRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n  }, []);\n\n  const handleSelect = (optionValue: string) => {\n    onChange(optionValue);\n    setIsOpen(false);\n  };\n\n  return (\n    <div ref={selectRef} className={cn(\"relative\", className)}>\n      <button\n        type=\"button\"\n        onClick={() => !disabled && setIsOpen(!isOpen)}\n        disabled={disabled}\n        className={cn(\n          \"w-full min-w-[200px] px-4 py-3 bg-gray-800/80 backdrop-blur-sm border border-white/20 rounded-xl text-white\",\n          \"focus:outline-none focus:border-primary-400 focus:ring-2 focus:ring-primary-400/20 transition-all duration-200\",\n          \"flex items-center justify-between shadow-lg hover:bg-gray-700/80 hover:border-white/30\",\n          disabled && \"opacity-50 cursor-not-allowed\",\n          isOpen && \"border-primary-400 ring-2 ring-primary-400/20 bg-gray-700/80\"\n        )}\n      >\n        <span className=\"flex items-center gap-2 truncate\">\n          {selectedOption?.color && (\n            <div\n              className=\"w-3 h-3 rounded-full flex-shrink-0\"\n              style={{ backgroundColor: selectedOption.color }}\n            />\n          )}\n          <span className=\"truncate\">{selectedOption ? selectedOption.label : placeholder}</span>\n        </span>\n        <ChevronDown\n          className={cn(\n            \"w-4 h-4 text-gray-400 transition-transform flex-shrink-0 ml-2\",\n            isOpen && \"rotate-180\"\n          )}\n        />\n      </button>\n\n      {isOpen && (\n        <div className=\"absolute top-full left-0 w-full min-w-[200px] mt-2 bg-gray-800/95 backdrop-blur-xl border border-white/20 rounded-xl shadow-2xl z-50 max-h-60 overflow-y-auto\">\n          {options.map((option, index) => (\n            <button\n              key={`${option.value}-${index}`}\n              type=\"button\"\n              onClick={() => handleSelect(option.value)}\n              className={cn(\n                \"w-full px-4 py-3 text-left hover:bg-white/15 transition-all duration-150\",\n                \"flex items-center justify-between first:rounded-t-xl last:rounded-b-xl\",\n                \"border-b border-white/5 last:border-b-0\",\n                option.value === value && \"bg-primary-500/25 text-primary-200 hover:bg-primary-500/30\"\n              )}\n            >\n              <span className=\"flex items-center gap-3 truncate\">\n                {option.color && (\n                  <div\n                    className=\"w-3 h-3 rounded-full shadow-sm flex-shrink-0\"\n                    style={{ backgroundColor: option.color }}\n                  />\n                )}\n                <span className=\"font-medium truncate\">{option.label}</span>\n              </span>\n              {option.value === value && (\n                <Check className=\"w-4 h-4 text-primary-300 flex-shrink-0\" />\n              )}\n            </button>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AACA;AAJA;;;;;AAqBO,SAAS,aAAa,EAC3B,OAAO,EACP,KAAK,EACL,QAAQ,EACR,cAAc,aAAa,EAC3B,SAAS,EACT,WAAW,KAAK,EACE;IAClB,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACrC,MAAM,YAAY,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAkB;IAEzC,MAAM,iBAAiB,QAAQ,IAAI,CAAC,CAAA,SAAU,OAAO,KAAK,KAAK;IAE/D,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,qBAAqB,CAAC;YAC1B,IAAI,UAAU,OAAO,IAAI,CAAC,UAAU,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;gBAC1E,UAAU;YACZ;QACF;QAEA,SAAS,gBAAgB,CAAC,aAAa;QACvC,OAAO,IAAM,SAAS,mBAAmB,CAAC,aAAa;IACzD,GAAG,EAAE;IAEL,MAAM,eAAe,CAAC;QACpB,SAAS;QACT,UAAU;IACZ;IAEA,qBACE,8OAAC;QAAI,KAAK;QAAW,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;;0BAC7C,8OAAC;gBACC,MAAK;gBACL,SAAS,IAAM,CAAC,YAAY,UAAU,CAAC;gBACvC,UAAU;gBACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,+GACA,kHACA,0FACA,YAAY,iCACZ,UAAU;;kCAGZ,8OAAC;wBAAK,WAAU;;4BACb,gBAAgB,uBACf,8OAAC;gCACC,WAAU;gCACV,OAAO;oCAAE,iBAAiB,eAAe,KAAK;gCAAC;;;;;;0CAGnD,8OAAC;gCAAK,WAAU;0CAAY,iBAAiB,eAAe,KAAK,GAAG;;;;;;;;;;;;kCAEtE,8OAAC,oNAAA,CAAA,cAAW;wBACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iEACA,UAAU;;;;;;;;;;;;YAKf,wBACC,8OAAC;gBAAI,WAAU;0BACZ,QAAQ,GAAG,CAAC,CAAC,QAAQ,sBACpB,8OAAC;wBAEC,MAAK;wBACL,SAAS,IAAM,aAAa,OAAO,KAAK;wBACxC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4EACA,0EACA,2CACA,OAAO,KAAK,KAAK,SAAS;;0CAG5B,8OAAC;gCAAK,WAAU;;oCACb,OAAO,KAAK,kBACX,8OAAC;wCACC,WAAU;wCACV,OAAO;4CAAE,iBAAiB,OAAO,KAAK;wCAAC;;;;;;kDAG3C,8OAAC;wCAAK,WAAU;kDAAwB,OAAO,KAAK;;;;;;;;;;;;4BAErD,OAAO,KAAK,KAAK,uBAChB,8OAAC,oMAAA,CAAA,QAAK;gCAAC,WAAU;;;;;;;uBApBd,GAAG,OAAO,KAAK,CAAC,CAAC,EAAE,OAAO;;;;;;;;;;;;;;;;AA4B7C","debugId":null}},
    {"offset": {"line": 1168, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/axele/Downloads/encore-tasks/encore-tasks-main/src/components/DeleteConfirmationModal.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { AlertTriangle, X } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface DeleteConfirmationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onConfirm: () => void;\n  title: string;\n  message: string;\n}\n\nconst DeleteConfirmationModal: React.FC<DeleteConfirmationModalProps> = ({\n  isOpen,\n  onClose,\n  onConfirm,\n  title,\n  message\n}) => {\n  if (!isOpen) return null;\n\n  const handleBackdropClick = (e: React.MouseEvent) => {\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  };\n\n  const handleConfirm = () => {\n    onConfirm();\n    onClose();\n  };\n\n  const modalContent = (\n    <div \n      className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999] flex items-center justify-center p-4\"\n      onClick={handleBackdropClick}\n    >\n      <div className=\"glass-dark p-6 max-w-md w-full mx-4 shadow-2xl animate-in fade-in-0 zoom-in-95 duration-200\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-red-500/20 rounded-lg\">\n              <AlertTriangle className=\"w-5 h-5 text-red-400\" />\n            </div>\n            <h3 className=\"text-lg font-semibold text-white\">\n              {title}\n            </h3>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"p-1 hover:bg-gray-700/50 rounded-lg transition-colors\"\n          >\n            <X className=\"w-5 h-5 text-gray-400\" />\n          </button>\n        </div>\n\n        {/* Message */}\n        <p className=\"text-gray-300 mb-6 leading-relaxed\">\n          {message}\n        </p>\n\n        {/* Actions */}\n        <div className=\"flex gap-3 justify-end\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 text-gray-300 hover:text-white hover:bg-gray-700/50 rounded-lg transition-all duration-200 font-medium\"\n          >\n            Отмена\n          </button>\n          <button\n            onClick={handleConfirm}\n            className=\"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-all duration-200 font-medium shadow-lg hover:shadow-red-700/25\"\n          >\n            Удалить\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n\n  // Рендерим модальное окно в body через портал\n  return typeof window !== 'undefined' ? createPortal(modalContent, document.body) : null;\n};\n\nexport default DeleteConfirmationModal;"],"names":[],"mappings":";;;;AAGA;AACA;AAAA;AAJA;;;;AAeA,MAAM,0BAAkE,CAAC,EACvE,MAAM,EACN,OAAO,EACP,SAAS,EACT,KAAK,EACL,OAAO,EACR;IACC,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,sBAAsB,CAAC;QAC3B,IAAI,EAAE,MAAM,KAAK,EAAE,aAAa,EAAE;YAChC;QACF;IACF;IAEA,MAAM,gBAAgB;QACpB;QACA;IACF;IAEA,MAAM,6BACJ,8OAAC;QACC,WAAU;QACV,SAAS;kBAET,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC,wNAAA,CAAA,gBAAa;wCAAC,WAAU;;;;;;;;;;;8CAE3B,8OAAC;oCAAG,WAAU;8CACX;;;;;;;;;;;;sCAGL,8OAAC;4BACC,SAAS;4BACT,WAAU;sCAEV,cAAA,8OAAC,4LAAA,CAAA,IAAC;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAKjB,8OAAC;oBAAE,WAAU;8BACV;;;;;;8BAIH,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;sCAGD,8OAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;IAQT,8CAA8C;IAC9C,OAAO,6EAA4E;AACrF;uCAEe","debugId":null}},
    {"offset": {"line": 1307, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/axele/Downloads/encore-tasks/encore-tasks-main/src/components/UserProfile.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport { useApp } from \"@/contexts/AppContext\";\nimport { getInitials, formatDate } from \"@/lib/utils\";\nimport {\n  User,\n  Mail,\n  Calendar,\n  Target,\n  CheckCircle2,\n  Clock,\n  AlertTriangle,\n  Edit,\n  X,\n  Award,\n  TrendingUp,\n  Activity\n} from \"lucide-react\";\n\ninterface UserProfileProps {\n  isOpen: boolean;\n  onClose: () => void;\n  userId?: string; // If not provided, shows current user profile\n}\n\nexport function UserProfile({ isOpen, onClose, userId }: UserProfileProps) {\n  const { state } = useApp();\n  const [isEditing, setIsEditing] = useState(false);\n  \n  // Get user data - either specified user or current user\n  const user = userId \n    ? state.users.find(u => u.id === userId) \n    : state.currentUser;\n    \n  if (!user || !isOpen) return null;\n\n  // Calculate user statistics\n  const userTasks = state.tasks.filter(\n    (task) => task.assignees?.some(a => a.id === user.id) || task.assignee?.id === user.id\n  );\n  \n  const completedTasks = userTasks.filter((task) => task.status === \"done\");\n  const inProgressTasks = userTasks.filter((task) => task.status === \"in-progress\");\n  const overdueTasks = userTasks.filter((task) => {\n    if (!task.deadline) return false;\n    const deadline = new Date(task.deadline);\n    const now = new Date();\n    return deadline < now && task.status !== \"done\";\n  });\n  \n  // Calculate completion rate by month for the last 6 months\n  const getMonthlyStats = () => {\n    const months = [];\n    const now = new Date();\n    \n    for (let i = 5; i >= 0; i--) {\n      const date = new Date(now.getFullYear(), now.getMonth() - i, 1);\n      const monthName = date.toLocaleDateString('ru-RU', { month: 'short' });\n      \n      const monthTasks = userTasks.filter(task => {\n        if (task.status !== 'done') return false;\n        \n        // Используем completedAt если есть, иначе updatedAt для выполненных задач\n        const completedDate = task.completedAt ? new Date(task.completedAt) : new Date(task.updatedAt);\n        \n        return completedDate.getMonth() === date.getMonth() && \n               completedDate.getFullYear() === date.getFullYear();\n      });\n      \n      months.push({\n        month: monthName,\n        completed: monthTasks.length,\n        percentage: Math.min(100, (monthTasks.length / Math.max(1, userTasks.length)) * 100)\n      });\n    }\n    \n    return months;\n  };\n  \n  const monthlyStats = getMonthlyStats();\n  const maxCompleted = Math.max(...monthlyStats.map(m => m.completed), 1);\n  \n  // Calculate skill levels based on real user data\n  const getSkillLevels = () => {\n    const totalTasks = userTasks.length;\n    const completionRate = totalTasks > 0 ? (completedTasks.length / totalTasks) * 100 : 0;\n    const onTimeRate = totalTasks > 0 ? ((totalTasks - overdueTasks.length) / totalTasks) * 100 : 0;\n    \n    // Calculate teamwork based on collaborative tasks\n    const collaborativeTasks = userTasks.filter(task => \n      (task.assignees && task.assignees.length > 1) || \n      (task.comments && task.comments.length > 0)\n    );\n    const teamworkScore = totalTasks > 0 ? (collaborativeTasks.length / totalTasks) * 100 : 0;\n    \n    // Calculate communication based on comments and task interactions\n    const totalComments = userTasks.reduce((sum, task) => \n      sum + (task.comments?.filter(comment => comment.author.id === user.id)?.length || 0), 0\n    );\n    const communicationScore = Math.min(100, (totalComments / Math.max(1, totalTasks)) * 20);\n    \n    // Calculate leadership based on role and project management\n    const userProjects = state.projects.filter(project => \n      project.members.some(member => member.id === user.id && (member.role === 'admin' || member.role === 'manager'))\n    );\n    const leadershipBase = user.role === 'admin' ? 80 : user.role === 'manager' ? 60 : 40;\n    const leadershipBonus = Math.min(20, userProjects.length * 5);\n    \n    return {\n      productivity: Math.min(100, Math.max(0, completionRate)),\n      quality: Math.min(100, Math.max(0, onTimeRate)),\n      teamwork: Math.min(100, Math.max(0, teamworkScore + 20)), // Base 20 points\n      communication: Math.min(100, Math.max(0, communicationScore + 30)), // Base 30 points\n      leadership: Math.min(100, Math.max(0, leadershipBase + leadershipBonus))\n    };\n  };\n  \n  const skills = getSkillLevels();\n  \n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\n      <div className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\" onClick={onClose} />\n      \n      <div className=\"relative w-full max-w-4xl max-h-[90vh] bg-gray-900/95 backdrop-blur-xl border border-white/10 rounded-2xl overflow-hidden\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-white/10\">\n          <div className=\"flex items-center gap-4\">\n            {state.settings?.showAvatars && (\n              user.avatar ? (\n                <img\n                  src={user.avatar}\n                  alt={user.name}\n                  className=\"w-16 h-16 rounded-full\"\n                />\n              ) : (\n                <div className=\"w-16 h-16 bg-primary-500 rounded-full flex items-center justify-center text-xl text-white font-semibold\">\n                  {getInitials(user.name)}\n                </div>\n              )\n            )}\n            <div>\n              <h2 className=\"text-2xl font-bold text-white\">{user.name}</h2>\n              <p className=\"text-gray-400\">{user.role === 'admin' ? 'Администратор' : user.role === 'manager' ? 'Менеджер' : 'Пользователь'}</p>\n            </div>\n          </div>\n          \n          <div className=\"flex items-center gap-2\">\n            {(state.currentUser?.id === user.id || state.currentUser?.role === 'admin') && (\n              <button\n                onClick={() => setIsEditing(true)}\n                className=\"flex items-center gap-2 px-4 py-2 bg-primary-500/20 hover:bg-primary-500/30 text-primary-400 rounded-lg transition-colors\"\n              >\n                <Edit className=\"w-4 h-4\" />\n                Редактировать\n              </button>\n            )}\n            <button\n              onClick={onClose}\n              className=\"p-2 hover:bg-white/10 rounded-lg transition-colors\"\n            >\n              <X className=\"w-5 h-5 text-gray-400\" />\n            </button>\n          </div>\n        </div>\n        \n        <div className=\"p-6 overflow-y-auto max-h-[calc(90vh-120px)]\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {/* User Info */}\n            <div className=\"space-y-6\">\n              {/* Basic Info */}\n              <div className=\"bg-white/5 rounded-xl p-6\">\n                <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center gap-2\">\n                  <User className=\"w-5 h-5\" />\n                  Досье\n                </h3>\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center gap-3\">\n                    <Mail className=\"w-4 h-4 text-gray-400\" />\n                    <span className=\"text-gray-300\">{user.email}</span>\n                  </div>\n                  <div className=\"flex items-center gap-3\">\n                    <Calendar className=\"w-4 h-4 text-gray-400\" />\n                    <span className=\"text-gray-300\">Присоединился {formatDate(user.createdAt || new Date().toISOString())}</span>\n                  </div>\n                  <div className=\"flex items-center gap-3\">\n                    <Target className=\"w-4 h-4 text-gray-400\" />\n                    <span className=\"text-gray-300\">Всего задач: {userTasks.length}</span>\n                  </div>\n                </div>\n              </div>\n              \n              {/* Task Statistics */}\n              <div className=\"bg-white/5 rounded-xl p-6\">\n                <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center gap-2\">\n                  <Activity className=\"w-5 h-5\" />\n                  Статистика задач\n                </h3>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"text-center p-4 bg-green-500/10 rounded-lg\">\n                    <CheckCircle2 className=\"w-8 h-8 text-green-400 mx-auto mb-2\" />\n                    <div className=\"text-2xl font-bold text-white\">{completedTasks.length}</div>\n                    <div className=\"text-sm text-gray-400\">Выполнено</div>\n                  </div>\n                  <div className=\"text-center p-4 bg-gray-500/10 rounded-lg\">\n                  <Clock className=\"w-8 h-8 text-gray-400 mx-auto mb-2\" />\n                    <div className=\"text-2xl font-bold text-white\">{inProgressTasks.length}</div>\n                    <div className=\"text-sm text-gray-400\">В работе</div>\n                  </div>\n                  <div className=\"text-center p-4 bg-red-500/10 rounded-lg\">\n                    <AlertTriangle className=\"w-8 h-8 text-red-400 mx-auto mb-2\" />\n                    <div className=\"text-2xl font-bold text-white\">{overdueTasks.length}</div>\n                    <div className=\"text-sm text-gray-400\">Просрочено</div>\n                  </div>\n                  <div className=\"text-center p-4 bg-purple-500/10 rounded-lg\">\n                    <Award className=\"w-8 h-8 text-purple-400 mx-auto mb-2\" />\n                    <div className=\"text-2xl font-bold text-white\">\n                      {userTasks.length > 0 ? Math.round((completedTasks.length / userTasks.length) * 100) : 0}%\n                    </div>\n                    <div className=\"text-sm text-gray-400\">Успешность</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            {/* Performance Charts */}\n            <div className=\"space-y-6\">\n              {/* Monthly Activity Chart */}\n              <div className=\"bg-white/5 rounded-xl p-6\">\n                <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center gap-2\">\n                  <TrendingUp className=\"w-5 h-5\" />\n                  Активность по месяцам\n                </h3>\n                <div className=\"space-y-3\">\n                  {monthlyStats.map((stat, index) => (\n                    <div key={`${stat.month}-${index}`} className=\"flex items-center gap-3\">\n                      <div className=\"w-12 text-sm text-gray-400\">{stat.month}</div>\n                      <div className=\"flex-1 bg-gray-700 rounded-full h-6 relative overflow-hidden\">\n                        <div \n                          className=\"h-full bg-gradient-to-r from-primary-500 to-primary-400 rounded-full transition-all duration-500\"\n                          style={{ width: `${(stat.completed / maxCompleted) * 100}%` }}\n                        />\n                        <div className=\"absolute inset-0 flex items-center justify-center text-xs text-white font-medium\">\n                          {stat.completed}\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n              \n              {/* Skills Radar Chart */}\n              <div className=\"bg-white/5 rounded-xl p-6\">\n                <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center gap-2\">\n                  <Award className=\"w-5 h-5\" />\n                  Навыки\n                </h3>\n                <div className=\"space-y-4\">\n                  {Object.entries(skills).map(([skill, value]) => (\n                    <div key={skill} className=\"space-y-2\">\n                      <div className=\"flex justify-between text-sm\">\n                        <span className=\"text-gray-300 capitalize\">\n                          {skill === 'productivity' ? 'Продуктивность' :\n                           skill === 'quality' ? 'Качество' :\n                           skill === 'teamwork' ? 'Командная работа' :\n                           skill === 'communication' ? 'Коммуникация' :\n                           skill === 'leadership' ? 'Лидерство' : skill}\n                        </span>\n                        <span className=\"text-white font-medium\">{Math.round(value)}%</span>\n                      </div>\n                      <div className=\"w-full bg-gray-700 rounded-full h-2\">\n                        <div \n                          className=\"h-2 bg-gradient-to-r from-primary-500 to-primary-400 rounded-full transition-all duration-500\"\n                          style={{ width: `${value}%` }}\n                        />\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2007, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/axele/Downloads/encore-tasks/encore-tasks-main/src/components/TaskCard.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { memo, useMemo, useCallback, useState } from \"react\";\nimport { useSortable } from \"@dnd-kit/sortable\";\nimport { CSS } from \"@dnd-kit/utilities\";\nimport { Task, TaskPriority } from \"@/types\";\nimport { cn, formatDate, getDaysUntilDeadline, getInitials } from \"@/lib/utils\";\nimport { logTaskDeleted } from \"@/utils/taskLogger\";\nimport {\n  Calendar,\n  MessageSquare,\n  Paperclip,\n  User,\n  AlertTriangle,\n  Clock,\n  CheckCircle2,\n  Trash2,\n  Check } from\n\"lucide-react\";\nimport { useApp } from \"@/contexts/AppContext\";\nimport DeleteConfirmationModal from \"./DeleteConfirmationModal\";\n\ninterface TaskCardProps {\n  task: Task;\n  onViewDetails?: () => void;\n  onEdit?: () => void;\n  isDragOverlay?: boolean;\n}\n\n// Removed priority colors for left border\n\nconst statusColors: Record<string, string> = {\n  \"todo\": \"bg-gray-500/10 border-gray-500/20\",\n  \"in-progress\": \"bg-blue-500/15 border-blue-500/30\",\n  \"review\": \"bg-purple-500/15 border-purple-500/30\",\n  \"done\": \"bg-green-500/15 border-green-500/30\"\n};\n\nconst priorityIcons: Record<TaskPriority, React.ReactNode> = {\n  low: <CheckCircle2 className=\"w-4 h-4 text-green-400 drop-shadow-sm\" data-oid=\"hklu-g4\" />,\n  medium: <Clock className=\"w-4 h-4 text-yellow-400 drop-shadow-sm\" data-oid=\"rnv5m:0\" />,\n  high: <AlertTriangle className=\"w-4 h-4 text-orange-400 drop-shadow-sm\" data-oid=\"0r:wuf:\" />,\n  urgent: <AlertTriangle className=\"w-4 h-4 text-red-400 drop-shadow-sm animate-pulse\" data-oid=\"ke7azx6\" />\n};\n\nconst TaskCardComponent = ({ task, onViewDetails, onEdit, isDragOverlay = false }: TaskCardProps) => {\n  const { state, dispatch, deleteTask, updateTask } = useApp();\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  \n  const sortableData = useMemo(() => ({\n    type: \"task\" as const,\n    task: task\n  }), [task]);\n  \n  const {\n    attributes,\n    listeners,\n    setNodeRef,\n    transform,\n    transition,\n    isDragging\n  } = useSortable({ \n    id: task.id,\n    data: sortableData,\n    disabled: isDragOverlay\n  });\n\n  const style = useMemo(() => {\n    if (isDragOverlay) {\n      return {\n        transform: 'none',\n        transition: 'none',\n        cursor: 'grabbing'\n      };\n    }\n    \n    return {\n      transform: CSS.Transform.toString(transform),\n      transition: isDragging ? 'none' : transition,\n      zIndex: isDragging ? 1000 : 'auto',\n      opacity: isDragging ? 0.5 : 1\n    };\n  }, [isDragOverlay, transform, transition, isDragging]);\n\n  const daysUntilDeadline = task.deadline ?\n  getDaysUntilDeadline(task.deadline) :\n  null;\n  const isOverdue = daysUntilDeadline !== null && daysUntilDeadline < 0;\n  const isDueSoon =\n  daysUntilDeadline !== null &&\n  daysUntilDeadline <= 2 &&\n  daysUntilDeadline >= 0;\n\n  const handleDelete = useCallback((e: React.MouseEvent) => {\n    e.stopPropagation();\n    setShowDeleteModal(true);\n  }, []);\n\n  const handleConfirmDelete = useCallback(async () => {\n    try {\n      await deleteTask(task.id);\n      \n      // Логирование удаления задачи\n      if (state.currentUser) {\n        const taskAction = logTaskDeleted(\n          dispatch,\n          task.id,\n          state.selectedBoard?.id || '',\n          state.selectedProject?.id || '',\n          task.title,\n          state.currentUser.id,\n          state.currentUser.name\n        );\n      }\n      \n      setShowDeleteModal(false);\n    } catch (error) {\n      console.error('Failed to delete task:', error);\n    }\n  }, [deleteTask, task.id, state.currentUser]);\n\n  const handleCardClick = useCallback((e: React.MouseEvent) => {\n    // Don't trigger onClick if clicking on action buttons or if dragging\n    if ((e.target as HTMLElement).closest(\".task-actions\") || (e.target as HTMLElement).closest(\".task-checkbox\") || isDragging) {\n      return;\n    }\n    onViewDetails?.();\n  }, [onViewDetails, isDragging]);\n\n\n\n  const handleCompleteTask = useCallback(async (e: React.MouseEvent) => {\n    e.stopPropagation();\n    try {\n      const newStatus = task.status === 'done' ? 'todo' : 'done';\n      const updatedTask = { ...task, status: newStatus, updatedAt: new Date() };\n      await updateTask(task.id, { status: newStatus });\n    } catch (error) {\n      console.error('Failed to update task:', error);\n    }\n  }, [updateTask, task]);\n\n  // Handle multiple assignees with backward compatibility\n  const assignees = task.assignees || (task.assignee ? [task.assignee] : []);\n\n  return (\n    <div\n      ref={isDragOverlay ? undefined : setNodeRef}\n      style={style}\n      {...(isDragOverlay ? {} : attributes)}\n      {...(isDragOverlay ? {} : listeners)}\n      className={cn(\n        \"group relative cursor-pointer task-card hover-lift animate-scale-in backdrop-blur-xl border rounded-xl p-4 transition-all duration-300\",\n        statusColors[task.status] || \"bg-white/5 border-white/10\",\n        task.status === 'done' && \"opacity-70 saturate-75 contrast-90\",\n        isDragging && \"opacity-50 shadow-2xl scale-105 rotate-2 bg-white/20\",\n        \"hover:shadow-lg hover:scale-[1.02]\"\n      )}\n      onClick={handleCardClick}\n      data-oid=\"quv.626\">\n\n      {/* Subtasks counter */}\n      {task.subtasks.length > 0 &&\n      <div className=\"flex justify-end mb-1\">\n        <div className=\"text-xs text-gray-400\" data-oid=\"kathmuh\">\n          {task.subtasks.filter((st) => st.status === \"done\").length}/\n          {task.subtasks.length}\n        </div>\n      </div>\n      }\n\n      {/* Task title with checkbox and actions */}\n      <div className=\"flex items-start gap-2 mb-2\">\n        <button\n          onClick={handleCompleteTask}\n          className={cn(\n            \"task-checkbox w-4 h-4 rounded-full border-2 flex items-center justify-center transition-all flex-shrink-0 mt-0.5\",\n            task.status === 'done' \n              ? \"bg-green-500 border-green-500 text-white\" \n              : \"border-gray-400 hover:border-green-400\"\n          )}\n          title={task.status === 'done' ? \"Отметить как невыполненную\" : \"Отметить как выполненную\"}\n        >\n          {task.status === 'done' && <Check className=\"w-3 h-3\" />}\n        </button>\n        <h3\n          className={cn(\n            \"text-sm font-medium line-clamp-2 flex-1\",\n            task.status === 'done' ? \"text-gray-300\" : \"text-white\"\n          )}\n          data-oid=\"fq7kujc\">\n          {task.title}\n        </h3>\n        \n        {/* Task actions */}\n        <div className=\"task-actions flex items-center opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0\">\n          {/* Only task creator, admins, or managers can delete tasks */}\n          {(state.currentUser?.id === task.reporter.id || \n            state.currentUser?.role === 'admin' || \n            state.currentUser?.role === 'manager') && (\n            <button\n              onClick={handleDelete}\n              className=\"p-1 hover:bg-primary-500/20 rounded transition-colors\"\n              title=\"Удалить задачу\"\n              data-oid=\"delete-btn\">\n              <Trash2 className=\"w-3 h-3 text-red-400\" />\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Task description */}\n      {task.description &&\n      <p\n        className={cn(\n          \"text-xs mb-3 line-clamp-2\",\n          task.status === 'done' ? \"text-gray-500\" : \"text-gray-400\"\n        )}\n        data-oid=\"soff5zg\">\n\n          {task.description}\n        </p>\n      }\n\n      {/* Tags */}\n      {task.tags?.length > 0 &&\n      <div className=\"flex flex-wrap gap-1 mb-3\" data-oid=\"l6a3ze.\">\n          {task.tags?.slice(0, 3).map((tag, index) =>\n        <span\n          key={`${task.id}-tag-${index}`}\n          className=\"px-2 py-1 text-xs bg-primary-500/20 text-primary-300 rounded-full\"\n          data-oid=\"1.37n8b\">\n\n              {tag}\n            </span>\n        )}\n          {task.tags?.length > 3 &&\n        <span\n          className=\"px-2 py-1 text-xs bg-gray-500/20 text-gray-400 rounded-full\"\n          data-oid=\"g0ql3g:\">\n\n              +{task.tags.length - 3}\n            </span>\n        }\n        </div>\n      }\n\n      {/* Deadline */}\n      {task.deadline &&\n      <div\n        className={cn(\n          \"flex items-center gap-1 mb-2 text-xs\",\n          isOverdue && \"text-red-400\",\n          isDueSoon && \"text-yellow-400\",\n          !isOverdue && !isDueSoon && \"text-gray-400\"\n        )}\n        data-oid=\"73h4pgz\">\n\n          <Calendar className=\"w-3 h-3\" data-oid=\"-.8767z\" />\n          <span data-oid=\"d69j4.m\">{!isNaN(new Date(task.deadline).getTime()) ? formatDate(new Date(task.deadline)) : 'Неверная дата'}</span>\n          {isOverdue &&\n        <span className=\"text-red-400\" data-oid=\"9lat1ca\">\n              (просрочено)\n            </span>\n        }\n          {isDueSoon &&\n        <span className=\"text-yellow-400\" data-oid=\"9liw4fa\">\n              ({Math.abs(daysUntilDeadline!)} дн.)\n            </span>\n        }\n        </div>\n      }\n\n      {/* Bottom section */}\n      <div className=\"flex items-center justify-between\" data-oid=\"qmks2-3\">\n        {/* Assignees */}\n        <div className=\"flex items-center gap-2\" data-oid=\"yid2xpu\">\n          {assignees.length > 0 ?\n          <div className=\"flex items-center gap-1\" data-oid=\"adz7fpr\">\n              {/* Show avatars for multiple assignees */}\n              {state.settings?.showAvatars && (\n                <div className=\"flex -space-x-1\" data-oid=\"4z3qxlj\">\n                  {assignees.slice(0, 3).map((assignee, index) =>\n                <div\n                  key={assignee.id}\n                  className=\"relative\"\n                  data-oid=\"6vc888p\">\n\n                      {assignee.avatar ?\n                  <img\n                    src={assignee.avatar}\n                    alt={assignee.name}\n                    className=\"w-5 h-5 lg:w-6 lg:h-6 rounded-full border border-white/20\"\n                    title={assignee.name}\n                    data-oid=\"_id-0_w\" /> :\n\n\n                  <div\n                    className=\"w-5 h-5 lg:w-6 lg:h-6 bg-primary-500 rounded-full flex items-center justify-center text-xs text-white border border-white/20\"\n                    title={assignee.name}\n                    data-oid=\"omx5dpx\">\n\n                          {getInitials(assignee.name)}\n                        </div>\n                  }\n                    </div>\n                )}\n                  {assignees.length > 3 &&\n                <div\n                  className=\"w-6 h-6 bg-gray-500 rounded-full flex items-center justify-center text-xs text-white border border-white/20\"\n                  title={`+${assignees.length - 3} еще`}\n                  data-oid=\"hs5ik9.\">\n\n                      +{assignees.length - 3}\n                    </div>\n                }\n                </div>\n              )}\n              {/* Show name only for single assignee */}\n              {assignees.length === 1 &&\n            <span\n              className=\"text-xs text-gray-400 hidden sm:inline\"\n              data-oid=\"3q8q4kj\">\n\n                  {assignees.length > 0 ? assignees[0].name.split(\" \")[0] : 'Не назначен'}\n                </span>\n            }\n              {/* Show count for multiple assignees */}\n              {assignees.length > 1 &&\n            <span\n              className=\"text-xs text-gray-400 hidden sm:inline\"\n              data-oid=\"c4igr7q\">\n\n                  {assignees.length} исп.\n                </span>\n            }\n            </div> :\n\n          <div\n            className=\"flex items-center gap-1 text-gray-500\"\n            data-oid=\"7jmjpnf\">\n\n              <User className=\"w-3 h-3 lg:w-4 lg:h-4\" data-oid=\"y87f1.0\" />\n              <span className=\"text-xs\" data-oid=\"uvmeo5a\">\n                Не назначено\n              </span>\n            </div>\n          }\n        </div>\n\n        {/* Attachments, comments and priority */}\n        <div className=\"flex items-center gap-2\" data-oid=\"wx2esgm\">\n          {task.attachments.length > 0 &&\n          <div\n            className=\"flex items-center gap-1 text-gray-400\"\n            data-oid=\"t.c6u7s\">\n\n              <Paperclip className=\"w-3 h-3\" data-oid=\"zzl-zwp\" />\n              <span className=\"text-xs\" data-oid=\"k2t-5rf\">\n                {task.attachments.length}\n              </span>\n            </div>\n          }\n          {task.comments.length > 0 &&\n          <div\n            className=\"flex items-center gap-1 text-gray-400\"\n            data-oid=\"a50y8rh\">\n\n              <MessageSquare className=\"w-3 h-3\" data-oid=\"tqxpzuv\" />\n              <span className=\"text-xs\" data-oid=\"4ngdj-7\">\n                {task.comments.length}\n              </span>\n            </div>\n          }\n          {/* Priority icon */}\n          <div \n            className=\"flex items-center ml-auto\"\n            title={`Приоритет: ${task.priority === 'low' ? 'низкий' : task.priority === 'medium' ? 'средний' : task.priority === 'high' ? 'высокий' : 'срочный'}`}\n          >\n            {priorityIcons[task.priority]}\n          </div>\n        </div>\n      </div>\n\n      {/* Hover overlay */}\n      <div\n        className=\"absolute inset-0 bg-gradient-to-r from-primary-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200 rounded-lg pointer-events-none\"\n        data-oid=\"n-:kn_p\" />\n\n      {/* Темно-зеленое перекрытие для выполненных задач */}\n      {task.status === \"done\" && (\n        <div className=\"absolute inset-0 bg-primary-900/20 rounded-lg pointer-events-none\" />\n      )}\n\n      {/* Delete Confirmation Modal */}\n      <DeleteConfirmationModal\n        isOpen={showDeleteModal}\n        onClose={() => setShowDeleteModal(false)}\n        onConfirm={handleConfirmDelete}\n        title=\"Удаление задачи\"\n        message={`Вы уверены, что хотите удалить задачу \"${task.title}\"? Это действие нельзя отменить.`}\n      />\n    </div>);\n\n};\n\n// Мемоизированный экспорт для оптимизации производительности\nexport const TaskCard = memo(TaskCardComponent, (prevProps, nextProps) => {\n  // Сравниваем только необходимые свойства для предотвращения лишних рендеров\n  return (\n    prevProps.task.id === nextProps.task.id &&\n    prevProps.task.title === nextProps.task.title &&\n    prevProps.task.status === nextProps.task.status &&\n    prevProps.task.priority === nextProps.task.priority &&\n    prevProps.task.deadline === nextProps.task.deadline &&\n    prevProps.task.assignee === nextProps.task.assignee &&\n    JSON.stringify(prevProps.task.assignees) === JSON.stringify(nextProps.task.assignees) &&\n    prevProps.task.attachments.length === nextProps.task.attachments.length &&\n    prevProps.task.comments.length === nextProps.task.comments.length &&\n    prevProps.isDragOverlay === nextProps.isDragOverlay &&\n    prevProps.onViewDetails === nextProps.onViewDetails &&\n    prevProps.onEdit === nextProps.onEdit\n  );\n});"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2585, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/axele/Downloads/encore-tasks/encore-tasks-main/src/components/CompletedTasksBlock.tsx"],"sourcesContent":["import React from 'react';\nimport { Archive, ChevronDown } from 'lucide-react';\nimport { Task } from '../types';\n\ninterface CompletedTasksBlockProps {\n  completedTasksCount: number;\n  onViewCompleted: () => void;\n}\n\nconst CompletedTasksBlock: React.FC<CompletedTasksBlockProps> = ({\n  completedTasksCount,\n  onViewCompleted\n}) => {\n  if (completedTasksCount === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"mt-4 border-t border-gray-200 dark:border-gray-700 pt-4\">\n      <button\n        onClick={onViewCompleted}\n        className=\"w-full flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors group\"\n      >\n        <div className=\"flex items-center gap-2\">\n          <Archive className=\"w-4 h-4 text-gray-500 dark:text-gray-400\" />\n          <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n            Выполненные задачи\n          </span>\n          <span className=\"text-xs bg-gray-200 dark:bg-gray-600 text-gray-600 dark:text-gray-400 px-2 py-1 rounded-full\">\n            {completedTasksCount}\n          </span>\n        </div>\n        <ChevronDown className=\"w-4 h-4 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors\" />\n      </button>\n    </div>\n  );\n};\n\nexport default CompletedTasksBlock;"],"names":[],"mappings":";;;;AACA;AAAA;;;AAQA,MAAM,sBAA0D,CAAC,EAC/D,mBAAmB,EACnB,eAAe,EAChB;IACC,IAAI,wBAAwB,GAAG;QAC7B,OAAO;IACT;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YACC,SAAS;YACT,WAAU;;8BAEV,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,wMAAA,CAAA,UAAO;4BAAC,WAAU;;;;;;sCACnB,8OAAC;4BAAK,WAAU;sCAAuD;;;;;;sCAGvE,8OAAC;4BAAK,WAAU;sCACb;;;;;;;;;;;;8BAGL,8OAAC,oNAAA,CAAA,cAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI/B;uCAEe","debugId":null}},
    {"offset": {"line": 2661, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/axele/Downloads/encore-tasks/encore-tasks-main/src/components/KanbanColumn.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { memo, useMemo, useCallback, useEffect } from \"react\";\nimport { useDroppable } from \"@dnd-kit/core\";\nimport {\n  SortableContext,\n  verticalListSortingStrategy } from\n\"@dnd-kit/sortable\";\nimport { Column, Task } from \"@/types\";\nimport { TaskCard } from \"./TaskCard\";\nimport { cn } from \"@/lib/utils\";\nimport { Plus, MoreHorizontal } from \"lucide-react\";\nimport CompletedTasksBlock from \"./CompletedTasksBlock\";\nimport { useApp } from \"@/contexts/AppContext\";\n\ninterface KanbanColumnProps {\n  column: Column;\n  tasks: Task[];\n  onAddTask?: () => void;\n  onTaskClick?: (task: Task) => void;\n  onViewCompleted?: () => void;\n}\n\nconst KanbanColumnComponent = ({\n  column,\n  tasks,\n  onAddTask,\n  onTaskClick,\n  onViewCompleted\n}: KanbanColumnProps) => {\n\n  const { state, dispatch } = useApp();\n  const droppableData = useMemo(() => ({\n    type: \"column\" as const,\n    column: column,\n    accepts: [\"task\"] as const\n  }), [column]);\n  \n  const { setNodeRef, isOver } = useDroppable({\n    id: column.id,\n    data: droppableData\n  });\n  \n  const taskIds = useMemo(() => tasks.map(task => task.id), [tasks]);\n  \n  const handleTaskClick = useCallback((task: Task) => {\n    onTaskClick?.(task);\n  }, [onTaskClick]);\n  \n  const handleAddTask = useCallback(() => {\n    onAddTask?.();\n  }, [onAddTask]);\n\n  // Логика автоматического архивирования для колонки Done\n  useEffect(() => {\n    if ((column.name === \"Done\" || column.name === \"Выполнено\") && tasks.length > 0) {\n      const timer = setTimeout(() => {\n        const now = new Date();\n        const oneWeekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\n        \n        // Архивируем старые задачи (больше недели)\n        const oldTasks = tasks.filter(task => {\n          const completedDate = task.completedAt || task.updatedAt;\n          return completedDate && new Date(completedDate) < oneWeekAgo;\n        });\n        \n        // Архивируем старые задачи по одной с интервалом\n        oldTasks.forEach((task, index) => {\n          setTimeout(() => {\n            dispatch({ type: \"ARCHIVE_TASK\", payload: task.id });\n          }, index * 100);\n        });\n        \n        // Если задач больше 5 (после архивирования старых), архивируем самые старые\n        setTimeout(() => {\n          const remainingTasks = tasks.filter(task => !oldTasks.includes(task));\n          if (remainingTasks.length > 5) {\n            const sortedTasks = [...remainingTasks]\n              .sort((a, b) => {\n                const aDate = a.completedAt || a.updatedAt;\n                const bDate = b.completedAt || b.updatedAt;\n                return new Date(aDate).getTime() - new Date(bDate).getTime();\n              });\n            \n            const tasksToArchive = sortedTasks.slice(0, remainingTasks.length - 5);\n            \n            tasksToArchive.forEach((task, index) => {\n              setTimeout(() => {\n                dispatch({ type: \"ARCHIVE_TASK\", payload: task.id });\n              }, index * 100);\n            });\n          }\n        }, oldTasks.length * 100 + 200);\n      }, 1000); // Задержка в 1 секунду\n      \n      return () => clearTimeout(timer);\n    }\n  }, [column.name, tasks.length, dispatch]);\n\n  const handleViewCompleted = useCallback(() => {\n    onViewCompleted?.();\n  }, [onViewCompleted]);\n\n  // Подсчитываем количество архивированных задач для этой доски\n  const archivedTasksCount = useMemo(() => {\n    return state.archivedTasks.filter(task => \n      task.boardId === state.selectedBoard?.id && task.status === \"done\"\n    ).length;\n  }, [state.archivedTasks, state.selectedBoard?.id]);\n\n  const isDoneColumn = column.name === \"Done\" || column.name === \"Выполнено\";\n\n  return (\n    <div\n      ref={setNodeRef}\n      className={cn(\n        \"flex flex-col h-full min-w-[260px] w-[280px] lg:min-w-[280px] lg:max-w-[320px] flex-shrink-0 animate-scale-in hover-lift transition-all duration-300\",\n        isOver && \"ring-2 ring-primary-500/30 scale-[1.01] bg-primary-500/10\"\n      )}\n      data-oid=\"baevvrb\">\n\n      {/* Column header */}\n      <div\n        className=\"flex items-center justify-between p-3 lg:p-4 backdrop-blur-sm border border-white/10 rounded-t-lg flex-shrink-0 animate-slide-in-left animate-delay-100\"\n        style={{ backgroundColor: `${column.color}20` }}\n        data-oid=\"x9qxwd-\">\n\n        <div className=\"flex items-center gap-2\" data-oid=\"zp7bg-6\">\n          <div\n            className=\"w-3 h-3 rounded-full animate-bounce-in animate-delay-200\"\n            style={{ backgroundColor: column.color || \"#6b7280\" }}\n            data-oid=\"zknb_rz\" />\n\n\n          <h3 className=\"font-medium text-white animate-slide-in-left animate-delay-300\" data-oid=\"uc-rl45\">\n            {column.name}\n          </h3>\n          <span\n            className=\"px-2 py-1 text-xs bg-white/10 text-gray-300 rounded-full badge animate-delay-400\"\n            data-oid=\"ucetj-m\">\n\n            {tasks.length}\n          </span>\n        </div>\n        <div className=\"flex items-center gap-1\" data-oid=\"k:fwdbq\">\n          <button\n            onClick={handleAddTask}\n            className=\"p-1 hover:bg-white/10 rounded transition-colors\"\n            title=\"Добавить задачу\"\n            data-oid=\"0vd2-:n\">\n\n            <Plus className=\"w-4 h-4 text-gray-400\" data-oid=\"0-5f3lo\" />\n          </button>\n          <button\n            className=\"p-1 hover:bg-white/10 rounded transition-colors\"\n            data-oid=\"qewdylh\">\n\n            <MoreHorizontal\n              className=\"w-4 h-4 text-gray-400\"\n              data-oid=\"d90:62i\" />\n\n          </button>\n        </div>\n      </div>\n\n      {/* Tasks container */}\n      <div\n        data-column-id={column.id}\n        className={cn(\n          \"flex-1 p-3 lg:p-4 bg-white/5 backdrop-blur-sm border-x border-b border-white/10 rounded-b-lg transition-all duration-200 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600 scrollbar-track-transparent\",\n          tasks.length === 0 ? \"min-h-[400px]\" : \"min-h-[200px]\"\n        )}\n        data-oid=\"0_737rg\">\n\n        <SortableContext\n          items={taskIds}\n          strategy={verticalListSortingStrategy}\n          data-oid=\"md:ek_j\">\n\n          <div \n            className=\"space-y-3\" \n            data-oid=\"ojk-ldx\">\n            {tasks.map((task) =>\n            <TaskCard\n              key={task.id}\n              task={task}\n              onViewDetails={() => handleTaskClick(task)}\n              onEdit={() => handleTaskClick(task)}\n              data-oid=\"nko.htr\" />\n\n            )}\n\n            {/* Empty column drop zone */}\n            {tasks.length === 0 && (\n              <div \n                className={cn(\n                  \"w-full p-8 border-2 border-dashed border-white/20 rounded-lg transition-all min-h-[200px] flex flex-col items-center justify-center gap-4\",\n                  isOver ? \"border-primary-500/50 bg-primary-500/10\" : \"border-white/20\"\n                )}>\n                <div className=\"text-center text-gray-400\">\n                  <div className=\"text-sm opacity-60\">\n                    {isOver ? \"Отпустите, чтобы переместить задачу сюда\" : \"Перетащите задачу сюда\"}\n                  </div>\n                </div>\n                \n                {/* Add task button inside drop zone */}\n                {onAddTask && (\n                  <button\n                  onClick={(e) => {\n                     e.preventDefault();\n                     e.stopPropagation();\n                     handleAddTask();\n                   }}\n                  className=\"px-4 py-2 border-2 border-dashed border-white/30 bg-white/5 rounded-lg text-white/70 hover:border-white/50 hover:text-white transition-all group flex items-center gap-2\"\n                  data-oid=\"i7h0k2e\">\n                    <Plus className=\"w-4 h-4 group-hover:scale-110 transition-transform\" />\n                    <span className=\"text-sm\">Добавить задачу</span>\n                  </button>\n                )}\n              </div>\n            )}\n\n            {/* Add task button for non-empty columns */}\n            {tasks.length > 0 && onAddTask && (\n            <button\n              onClick={(e) => {\n                 e.preventDefault();\n                 e.stopPropagation();\n                 handleAddTask();\n               }}\n              className=\"w-full p-4 border-2 border-dashed border-white/30 bg-white/5 rounded-lg text-white/70 hover:border-white/50 hover:text-white transition-all group mt-3\"\n              data-oid=\"i7h0k2e-nonempty\">\n\n                <div\n                className=\"flex flex-col items-center gap-2\"\n                data-oid=\"74fq3xl\">\n\n                  <Plus\n                  className=\"w-6 h-6 group-hover:scale-110 transition-transform\"\n                  data-oid=\"d00xrgp\" />\n\n                  <span className=\"text-sm\" data-oid=\"ip_3ezx\">\n                    Добавить задачу\n                  </span>\n                </div>\n              </button>\n            )}\n\n            {/* Drop zone indicator when dragging */}\n            {isOver && tasks.length > 0 && (\n              <div className=\"space-y-2\">\n                <div className=\"w-full h-1 bg-primary-500/50 rounded-full animate-pulse\" />\n                <div className=\"w-full p-4 border-2 border-dashed border-primary-500/50 bg-primary-500/10 rounded-lg flex items-center justify-center\">\n                  <div className=\"text-primary-300 text-sm font-medium animate-pulse\">\n                    Отпустите, чтобы переместить задачу сюда\n                  </div>\n                </div>\n                <div className=\"w-full h-1 bg-primary-500/50 rounded-full animate-pulse\" />\n              </div>\n            )}\n          </div>\n        </SortableContext>\n        \n        {/* Completed Tasks Block for Done column */}\n        {isDoneColumn && (\n          <CompletedTasksBlock\n            completedTasksCount={archivedTasksCount}\n            onViewCompleted={handleViewCompleted}\n          />\n        )}\n      </div>\n    </div>);\n\n};\n\n// Мемоизированный экспорт для оптимизации производительности\nexport const KanbanColumn = memo(KanbanColumnComponent, (prevProps, nextProps) => {\n  // Сравниваем только необходимые свойства\n  return (\n    prevProps.column.id === nextProps.column.id &&\n    prevProps.column.name === nextProps.column.name &&\n    prevProps.tasks.length === nextProps.tasks.length &&\n    prevProps.tasks.every((task, index) => \n      task.id === nextProps.tasks[index]?.id &&\n      task.title === nextProps.tasks[index]?.title &&\n      task.status === nextProps.tasks[index]?.status\n    ) &&\n    prevProps.onAddTask === nextProps.onAddTask &&\n    prevProps.onTaskClick === nextProps.onTaskClick &&\n    prevProps.onViewCompleted === nextProps.onViewCompleted\n  );\n});"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3073, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/axele/Downloads/encore-tasks/encore-tasks-main/src/components/MultiSelect.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { ChevronDown, X } from \"lucide-react\";\nimport { User } from \"@/types\";\nimport { getInitials } from \"@/lib/utils\";\n\ninterface MultiSelectProps {\n  value: User[];\n  onChange: (users: User[]) => void;\n  options: User[];\n  placeholder?: string;\n  className?: string;\n  maxDisplay?: number;\n}\n\nexport function MultiSelect({\n  value,\n  onChange,\n  options,\n  placeholder = \"Выберите исполнителей\",\n  className = \"\",\n  maxDisplay = 3\n}: MultiSelectProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n  }, []);\n\n  const handleToggleUser = (user: User) => {\n    const isSelected = value.some(u => u.id === user.id);\n    if (isSelected) {\n      onChange(value.filter(u => u.id !== user.id));\n    } else {\n      onChange([...value, user]);\n    }\n  };\n\n  const handleRemoveUser = (userId: string, e: React.MouseEvent) => {\n    e.stopPropagation();\n    onChange(value.filter(u => u.id !== userId));\n  };\n\n  const displayUsers = value.slice(0, maxDisplay);\n  const remainingCount = value.length - maxDisplay;\n\n  return (\n    <div className={`relative ${className}`} ref={dropdownRef}>\n      <button\n        type=\"button\"\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white text-left focus:outline-none focus:border-primary-500 transition-colors flex items-center justify-between min-h-[42px]\"\n      >\n        <div className=\"flex items-center gap-2 flex-wrap\">\n          {value.length === 0 ? (\n            <span className=\"text-gray-400\">{placeholder}</span>\n          ) : (\n            <>\n              {displayUsers.map((user) => (\n                <div\n                  key={user.id}\n                  className=\"flex items-center gap-1 bg-primary-500/20 text-primary-300 px-2 py-1 rounded text-sm\"\n                >\n                  <div className=\"w-5 h-5 rounded-full bg-primary-500 flex items-center justify-center text-xs text-white\">\n                    {getInitials(user.name)}\n                  </div>\n                  <span className=\"truncate max-w-[80px]\">{user.name}</span>\n                  <span\n                    onClick={(e) => handleRemoveUser(user.id, e)}\n                    className=\"hover:bg-primary-500/30 rounded p-0.5 transition-colors cursor-pointer\"\n                  >\n                    <X className=\"w-3 h-3\" />\n                  </span>\n                </div>\n              ))}\n              {remainingCount > 0 && (\n                <div className=\"bg-gray-500/20 text-gray-300 px-2 py-1 rounded text-sm\">\n                  +{remainingCount}\n                </div>\n              )}\n            </>\n          )}\n        </div>\n        <ChevronDown\n          className={`w-4 h-4 text-gray-400 transition-transform ${\n            isOpen ? \"rotate-180\" : \"\"\n          }`}\n        />\n      </button>\n\n      {isOpen && (\n        <div className=\"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-white/10 rounded-lg shadow-lg z-50 max-h-60 overflow-y-auto\">\n          {options.length === 0 ? (\n            <div className=\"px-4 py-2 text-gray-400 text-sm\">\n              Нет доступных пользователей\n            </div>\n          ) : (\n            options.map((user) => {\n              const isSelected = value.some(u => u.id === user.id);\n              return (\n                <button\n                  key={user.id}\n                  type=\"button\"\n                  onClick={() => handleToggleUser(user)}\n                  className={`w-full px-4 py-2 text-left hover:bg-white/5 transition-colors flex items-center gap-3 ${\n                    isSelected ? \"bg-primary-500/20 text-primary-300\" : \"text-white\"\n                  }`}\n                >\n                  <div className=\"w-8 h-8 rounded-full bg-primary-500 flex items-center justify-center text-sm text-white\">\n                    {getInitials(user.name)}\n                  </div>\n                  <div className=\"flex-1\">\n                    <div className=\"font-medium\">{user.name}</div>\n                    <div className=\"text-sm text-gray-400\">{user.email}</div>\n                  </div>\n                  {isSelected && (\n                    <div className=\"w-4 h-4 rounded-full bg-primary-500 flex items-center justify-center\">\n                      <div className=\"w-2 h-2 bg-white rounded-full\" />\n                    </div>\n                  )}\n                </button>\n              );\n            })\n          )}\n        </div>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3294, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/axele/Downloads/encore-tasks/encore-tasks-main/src/components/TaskModal.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { Task, TaskPriority, User } from \"@/types\";\nimport { useApp } from \"@/contexts/AppContext\";\nimport { cn, formatDate, getInitials } from \"@/lib/utils\";\nimport {\n  X,\n  Calendar,\n  User as UserIcon,\n  Flag,\n  Paperclip,\n  MessageSquare,\n  Plus,\n  Trash2,\n  Save } from\n\"lucide-react\";\nimport { CustomSelect } from \"./CustomSelect\";\nimport { MultiSelect } from \"./MultiSelect\";\nimport { logTaskAssigneesChanged } from \"@/utils/taskLogger\";\n\ninterface TaskModalProps {\n  task: Task;\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: (task: Task) => void;\n}\n\nconst priorityOptions: {value: TaskPriority;label: string;color: string;}[] =\n[\n{ value: \"low\", label: \"Низкий\", color: \"text-green-500\" },\n{ value: \"medium\", label: \"Средний\", color: \"text-yellow-500\" },\n{ value: \"high\", label: \"Высокий\", color: \"text-orange-500\" },\n{ value: \"urgent\", label: \"Срочный\", color: \"text-red-500\" }];\n\nconst statusLabels: Record<string, string> = {\n  \"todo\": \"К выполнению\",\n  \"in-progress\": \"В работе\",\n  \"review\": \"На проверке\",\n  \"done\": \"Выполнено\"\n};\n\nconst statusColors: Record<string, string> = {\n  \"todo\": \"bg-gray-500/20 text-gray-300 border-gray-500/30\",\n  \"in-progress\": \"bg-yellow-500/20 text-yellow-300 border-yellow-500/30\",\n  \"review\": \"bg-purple-500/20 text-purple-300 border-purple-500/30\",\n  \"done\": \"bg-emerald-500/25 text-emerald-300 border-emerald-500/40\"\n};\n\n\nexport function TaskModal({ task, isOpen, onClose, onSave }: TaskModalProps) {\n  const { state, dispatch, updateTask } = useApp();\n  const [editedTask, setEditedTask] = useState<Task>(task);\n  const [newComment, setNewComment] = useState(\"\");\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    setEditedTask(task);\n  }, [task]);\n\n  const handleFileUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const files = event.target.files;\n    if (files && files.length > 0) {\n      const newAttachments = Array.from(files).map(file => ({\n        id: Date.now().toString() + Math.random().toString(36).substr(2, 9),\n        name: file.name,\n        url: URL.createObjectURL(file),\n        type: file.type.startsWith('image/') ? 'image' as const : \n              file.type.includes('pdf') || file.type.includes('document') ? 'document' as const : \n              'other' as const,\n        size: file.size,\n        uploadedBy: state.currentUser?.id || '',\n        uploadedAt: new Date()\n      }));\n      \n      setEditedTask({\n        ...editedTask,\n        attachments: [...(editedTask.attachments || []), ...newAttachments]\n      });\n    }\n    // Reset file input\n    if (event.target) {\n      event.target.value = '';\n    }\n  };\n\n  const handleRemoveAttachment = (attachmentId: string) => {\n    setEditedTask({\n      ...editedTask,\n      attachments: (editedTask.attachments || []).filter(att => att.id !== attachmentId)\n    });\n  };\n\n  if (!isOpen) return null;\n\n  const handleSave = async () => {\n    try {\n      // Log assignees changes if they occurred\n      const originalAssignees = task.assignees || (task.assignee ? [task.assignee] : []);\n      const newAssignees = editedTask.assignees || [];\n      \n      const originalNames = originalAssignees.map(a => a.name);\n      const newNames = newAssignees.map(a => a.name);\n      \n      if (JSON.stringify(originalNames.sort()) !== JSON.stringify(newNames.sort()) && state.currentUser) {\n        logTaskAssigneesChanged(\n          dispatch,\n          task.id,\n          task.boardId,\n          task.projectId,\n          task.title,\n          state.currentUser.id,\n          state.currentUser.name,\n          originalNames,\n          newNames\n        );\n      }\n      \n      const updatedTask = {\n        ...editedTask,\n        updatedAt: new Date()\n      };\n      \n      await updateTask(editedTask.id, updatedTask);\n      onClose();\n    } catch (error) {\n      console.error('Failed to update task:', error);\n    }\n  };\n\n  const handleAddComment = () => {\n    if (!newComment.trim() || !state.currentUser) return;\n\n    const comment = {\n      id: Date.now().toString(),\n      content: newComment,\n      author: state.currentUser,\n      createdAt: new Date()\n    };\n\n    setEditedTask({\n      ...editedTask,\n      comments: [...editedTask.comments, comment]\n    });\n    setNewComment(\"\");\n  };\n\n  const availableUsers = state.selectedProject?.members || [];\n\n  return (\n    <div\n      className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm\"\n      data-oid=\".x7bai8\">\n\n      <div\n        className=\"glass-dark w-full max-w-4xl max-h-[90vh] overflow-hidden\"\n        data-oid=\"a6d2100\">\n\n        {/* Header */}\n        <div\n          className=\"flex items-center justify-between p-6 border-b border-white/10\"\n          data-oid=\"ktojc2t\">\n\n          <h2 className=\"text-xl font-semibold text-white\" data-oid=\"-pvm16q\">\n            Редактирование задачи\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"p-2 hover:bg-white/10 rounded-lg transition-colors\"\n            data-oid=\"d2gg2sp\">\n\n            <X className=\"w-5 h-5 text-gray-400\" data-oid=\"be2lgo5\" />\n          </button>\n        </div>\n\n        <div className=\"flex h-[calc(90vh-80px)]\" data-oid=\"l200d2:\">\n          {/* Main content */}\n          <div className=\"flex-1 p-6 overflow-y-auto\" data-oid=\"0yg709e\">\n            {/* Title */}\n            <div className=\"mb-6\" data-oid=\"fxsuh7d\">\n              <label\n                className=\"block text-sm font-medium text-gray-300 mb-2\"\n                data-oid=\":ubc.od\">\n\n                Название задачи\n              </label>\n              <input\n                type=\"text\"\n                value={editedTask.title}\n                onChange={(e) =>\n                setEditedTask({ ...editedTask, title: e.target.value })\n                }\n                className=\"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-primary-500\"\n                placeholder=\"Введите название задачи\"\n                data-oid=\"4b-h4w1\" />\n\n            </div>\n\n            {/* Description */}\n            <div className=\"mb-6\" data-oid=\"q4k0.uw\">\n              <label\n                className=\"block text-sm font-medium text-gray-300 mb-2\"\n                data-oid=\"3oa_2fy\">\n\n                Описание\n              </label>\n              <textarea\n                value={editedTask.description || \"\"}\n                onChange={(e) =>\n                setEditedTask({ ...editedTask, description: e.target.value })\n                }\n                rows={4}\n                className=\"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-primary-500 resize-none\"\n                placeholder=\"Добавьте описание задачи\"\n                data-oid=\"5:ze-bw\" />\n\n            </div>\n\n            {/* Properties */}\n            <div\n              className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\"\n              data-oid=\"26u4lyl\">\n\n              {/* Assignees */}\n              <div data-oid=\"frcbsgd\">\n                <label\n                  className=\"block text-sm font-medium text-gray-300 mb-2\"\n                  data-oid=\"folklz:\">\n\n                  Исполнители\n                </label>\n                <MultiSelect\n                  value={editedTask.assignees || (editedTask.assignee ? [editedTask.assignee] : [])}\n                  onChange={(users) => {\n                    setEditedTask({ \n                      ...editedTask, \n                      assignees: users,\n                      assignee: users.length > 0 ? users[0] : undefined // Keep backward compatibility\n                    });\n                  }}\n                  options={availableUsers}\n                  placeholder=\"Выберите исполнителей\"\n                />\n              </div>\n\n              {/* Priority */}\n              <div data-oid=\"vwb1low\">\n                <label\n                  className=\"block text-sm font-medium text-gray-300 mb-2\"\n                  data-oid=\"t.69qd2\">\n\n                  Приоритет\n                </label>\n                <CustomSelect\n                  value={editedTask.priority}\n                  onChange={(value) =>\n                  setEditedTask({\n                    ...editedTask,\n                    priority: value as TaskPriority\n                  })\n                  }\n                  options={priorityOptions.map((option) => ({\n                    value: option.value,\n                    label: option.label\n                  }))}\n                  placeholder=\"Выберите приоритет\"\n                />\n              </div>\n\n              {/* Deadline */}\n              <div data-oid=\"ppr_wxo\">\n                <label\n                  className=\"block text-sm font-medium text-gray-300 mb-2\"\n                  data-oid=\"hhl_o2h\">\n\n                  Дедлайн\n                </label>\n                <input\n                  type=\"date\"\n                  value={\n                  editedTask.deadline ?\n                  editedTask.deadline.toISOString().split(\"T\")[0] :\n                  \"\"\n                  }\n                  onChange={(e) => {\n                    const date = e.target.value ? (() => {\n                      const newDate = new Date(e.target.value);\n                      return isNaN(newDate.getTime()) ? undefined : newDate;\n                    })() : undefined;\n                    setEditedTask({ ...editedTask, deadline: date });\n                  }}\n                  className=\"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:border-primary-500\"\n                  data-oid=\"esq072m\" />\n\n              </div>\n\n              {/* Tags */}\n              <div data-oid=\"-q29zox\">\n                <label\n                  className=\"block text-sm font-medium text-gray-300 mb-2\"\n                  data-oid=\"43e09wy\">\n\n                  Теги\n                </label>\n                <input\n                  type=\"text\"\n                  value={editedTask.tags?.join(\", \") || \"\"}\n                  onChange={(e) => {\n                    const tags = e.target.value.\n                    split(\",\").\n                    map((tag) => tag.trim()).\n                    filter(Boolean);\n                    setEditedTask({ ...editedTask, tags });\n                  }}\n                  className=\"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-primary-500\"\n                  placeholder=\"Введите теги через запятую\"\n                  data-oid=\"wh370-5\" />\n\n              </div>\n            </div>\n\n            {/* Comments */}\n            <div className=\"mb-6\" data-oid=\"gp.jsd0\">\n              <h3\n                className=\"text-lg font-medium text-white mb-4\"\n                data-oid=\"nbvw-e7\">\n\n                Комментарии\n              </h3>\n\n              {/* Add comment */}\n              <div className=\"mb-4\" data-oid=\"475evbq\">\n                <div className=\"flex gap-3\" data-oid=\"-lc2a3c\">\n                  {state.settings?.showAvatars && (\n                    <div className=\"flex-shrink-0\" data-oid=\"ky0_ms0\">\n                      {state.currentUser?.avatar ?\n                      <img\n                        src={state.currentUser.avatar}\n                        alt={state.currentUser.name}\n                        className=\"w-8 h-8 rounded-full\"\n                        data-oid=\"atbpn0_\" /> :\n\n\n                      <div\n                        className=\"w-8 h-8 bg-primary-500 rounded-full flex items-center justify-center text-sm text-white\"\n                        data-oid=\"luwz7cn\">\n\n                          {state.currentUser ?\n                        getInitials(state.currentUser.name) :\n                        \"?\"}\n                        </div>\n                      }\n                    </div>\n                  )}\n                  <div className=\"flex-1\" data-oid=\"865f59w\">\n                    <textarea\n                      value={newComment}\n                      onChange={(e) => setNewComment(e.target.value)}\n                      rows={3}\n                      className=\"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-primary-500 resize-none\"\n                      placeholder=\"Добавить комментарий...\"\n                      data-oid=\"q5rai27\" />\n\n\n                    <div className=\"flex justify-end mt-2\" data-oid=\"jk.3u53\">\n                      <button\n                        onClick={handleAddComment}\n                        disabled={!newComment.trim()}\n                        className=\"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                        data-oid=\"h-4:r_m\">\n\n                        Добавить\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Comments list */}\n              <div className=\"space-y-4\" data-oid=\"ot-bjl:\">\n                {editedTask.comments?.map((comment) =>\n                <div\n                  key={comment.id}\n                  className=\"flex gap-3\"\n                  data-oid=\"beb5_vl\">\n\n                    <div className=\"flex-shrink-0\" data-oid=\"9j:s0:d\">\n                      {comment.author.avatar ?\n                    <img\n                      src={comment.author.avatar}\n                      alt={comment.author.name}\n                      className=\"w-8 h-8 rounded-full\"\n                      data-oid=\"enozgl9\" /> :\n\n\n                    <div\n                      className=\"w-8 h-8 bg-primary-500 rounded-full flex items-center justify-center text-sm text-white\"\n                      data-oid=\"sjsm.b1\">\n\n                          {getInitials(comment.author.name)}\n                        </div>\n                    }\n                    </div>\n                    <div className=\"flex-1\" data-oid=\"84ugd7p\">\n                      <div\n                      className=\"flex items-center gap-2 mb-1\"\n                      data-oid=\"9h_i0nf\">\n\n                        <span\n                        className=\"text-sm font-medium text-white\"\n                        data-oid=\"2vn.s7k\">\n\n                          {comment.author.name}\n                        </span>\n                        <span\n                        className=\"text-xs text-gray-400\"\n                        data-oid=\"kf2s72y\">\n\n                          {formatDate(new Date(comment.createdAt))}\n                        </span>\n                      </div>\n                      <p className=\"text-sm text-gray-300\" data-oid=\"..0.xv9\">\n                        {comment.content}\n                      </p>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Sidebar */}\n          <div\n            className=\"w-80 border-l border-white/10 p-6 bg-white/5\"\n            data-oid=\"ql.poch\">\n\n            <h3\n              className=\"text-lg font-medium text-white mb-4\"\n              data-oid=\".nenowg\">\n\n              Информация\n            </h3>\n\n            <div className=\"space-y-4\" data-oid=\"wql9ct0\">\n              {/* Status */}\n              <div data-oid=\"w:-8-5r\">\n                <span className=\"text-sm text-gray-400\" data-oid=\"l6pzqoc\">\n                  Статус:\n                </span>\n                <div className=\"mt-1\">\n                  <span className={cn(\n                    \"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border\",\n                    statusColors[editedTask.status] || \"bg-gray-500/20 text-gray-300 border-gray-500/30\"\n                  )}>\n                    {statusLabels[editedTask.status] || editedTask.status?.replace(\"-\", \" \") || \"Не указан\"}\n                  </span>\n                </div>\n              </div>\n\n              {/* Created */}\n              <div data-oid=\"_34srde\">\n                <span className=\"text-sm text-gray-400\" data-oid=\"56ub_4q\">\n                  Создано:\n                </span>\n                <p className=\"text-white\" data-oid=\":_-upsr\">\n                  {formatDate(new Date(editedTask.createdAt))}\n                </p>\n              </div>\n\n              {/* Reporter */}\n              <div data-oid=\"xv3obyt\">\n                <span className=\"text-sm text-gray-400\" data-oid=\"kjy3ugs\">\n                  Автор:\n                </span>\n                <p className=\"text-white\" data-oid=\"blsrf4i\">\n                  {editedTask.reporter.name}\n                </p>\n              </div>\n\n              {/* Attachments */}\n              <div data-oid=\"540:wz3\">\n                <div\n                  className=\"flex items-center justify-between mb-2\"\n                  data-oid=\"zg:g:-r\">\n\n                  <span className=\"text-sm text-gray-400\" data-oid=\"q7-wgrp\">\n                    Вложения:\n                  </span>\n                  <button\n                    onClick={() => fileInputRef.current?.click()}\n                    className=\"p-1 hover:bg-white/10 rounded transition-colors\"\n                    title=\"Добавить вложение\"\n                    data-oid=\"-g-tqxr\">\n\n                    <Plus\n                      className=\"w-4 h-4 text-gray-400\"\n                      data-oid=\"pcbp3w3\" />\n\n                  </button>\n                  <input\n                    ref={fileInputRef}\n                    type=\"file\"\n                    multiple\n                    className=\"hidden\"\n                    onChange={handleFileUpload}\n                    accept=\".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png,.gif,.zip,.rar\"\n                  />\n                </div>\n                {editedTask.attachments.length === 0 ?\n                <p className=\"text-sm text-gray-500\" data-oid=\"_-6em6z\">\n                    Нет вложений\n                  </p> :\n\n                <div className=\"space-y-2\" data-oid=\"ojm172r\">\n                    {editedTask.attachments?.map((attachment) =>\n                  <div\n                    key={attachment.id}\n                    className=\"flex items-center justify-between gap-2 p-2 bg-white/5 rounded hover:bg-white/10 transition-colors\"\n                    data-oid=\"vhpzgr7\">\n\n                        <div className=\"flex items-center gap-2 flex-1 min-w-0\">\n                          <Paperclip\n                            className=\"w-4 h-4 text-gray-400 flex-shrink-0\"\n                            data-oid=\"3c2foa5\" />\n\n                          <span\n                            className=\"text-sm text-white truncate\"\n                            data-oid=\"95zy.66\">\n\n                            {attachment.name}\n                          </span>\n                          <span className=\"text-xs text-gray-500 flex-shrink-0\">\n                            ({(attachment.size / 1024).toFixed(1)} KB)\n                          </span>\n                        </div>\n                        \n                        <button\n                          onClick={() => handleRemoveAttachment(attachment.id)}\n                          className=\"p-1 hover:bg-primary-500/20 rounded transition-colors flex-shrink-0\"\n                          title=\"Удалить вложение\">\n                          <Trash2 className=\"w-3 h-3 text-red-400\" />\n                        </button>\n                      </div>\n                  )}\n                  </div>\n                }\n              </div>\n            </div>\n\n            {/* Actions */}\n            <div className=\"mt-8 space-y-3\" data-oid=\"9-lejip\">\n              <button\n                onClick={handleSave}\n                className=\"w-full flex items-center justify-center gap-2 px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors\"\n                data-oid=\"pc_b6cs\">\n\n                <Save className=\"w-4 h-4\" data-oid=\"q6bf507\" />\n                Сохранить\n              </button>\n              <button\n                onClick={onClose}\n                className=\"w-full px-4 py-2 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-colors\"\n                data-oid=\"2cl-_l8\">\n\n                Отмена\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>);\n\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4226, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/axele/Downloads/encore-tasks/encore-tasks-main/src/components/ArchivedTasksModal.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useMemo } from \"react\";\nimport { X, Calendar, User, Filter, Search, Archive, RotateCcw, Trash2 } from \"lucide-react\";\nimport { Task, User as UserType } from \"@/types\";\nimport { useApp } from \"@/contexts/AppContext\";\nimport { formatDate } from \"@/lib/utils\";\nimport { CustomSelect } from \"./CustomSelect\";\nimport { useConfirmation } from \"@/hooks/useConfirmation\";\n\ninterface ArchivedTasksModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  boardId: string;\n}\n\nfunction ArchivedTasksModal({ isOpen, onClose, boardId }: ArchivedTasksModalProps) {\n  const { state, dispatch } = useApp();\n  const { ConfirmationComponent, confirm } = useConfirmation();\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [selectedAssignee, setSelectedAssignee] = useState(\"\");\n  const [selectedPriority, setSelectedPriority] = useState(\"\");\n  const [dateFilter, setDateFilter] = useState(\"\");\n  const [sortBy, setSortBy] = useState<\"completedAt\" | \"archivedAt\" | \"title\">(\"archivedAt\");\n  const [sortOrder, setSortOrder] = useState<\"asc\" | \"desc\">(\"desc\");\n\n  const handleRestoreTask = (taskId: string) => {\n    dispatch({ type: \"UNARCHIVE_TASK\", payload: taskId });\n  };\n\n  const handleDeleteTask = async (taskId: string) => {\n    const confirmed = await confirm({\n      title: 'Удаление задачи',\n      message: 'Вы уверены, что хотите окончательно удалить эту задачу? Это действие нельзя отменить.',\n      confirmText: 'Удалить',\n      cancelText: 'Отмена',\n      type: 'danger'\n    });\n\n    if (confirmed) {\n      dispatch({ type: \"DELETE_TASK\", payload: taskId });\n    }\n  };\n\n  const isAdmin = state.currentUser?.role === \"admin\";\n\n  const filteredAndSortedTasks = useMemo(() => {\n    if (!state.archivedTasks || !Array.isArray(state.archivedTasks)) {\n      return [];\n    }\n    \n    let filtered = state.archivedTasks.filter(task => {\n      if (task.boardId !== boardId) return false;\n      \n      const matchesSearch = task.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                            task.description?.toLowerCase().includes(searchTerm.toLowerCase());\n      \n      const matchesAssignee = !selectedAssignee || \n                             (task.assignees && Array.isArray(task.assignees) && task.assignees.some(assignee => assignee.id === selectedAssignee)) ||\n                             task.assignee?.id === selectedAssignee;\n      \n      const matchesPriority = !selectedPriority || task.priority === selectedPriority;\n      \n      let matchesDate = true;\n      if (dateFilter) {\n        const filterDate = new Date(dateFilter);\n        const taskDate = task.completedAt || task.archivedAt;\n        if (taskDate) {\n          const taskDateOnly = new Date(taskDate.getFullYear(), taskDate.getMonth(), taskDate.getDate());\n          const filterDateOnly = new Date(filterDate.getFullYear(), filterDate.getMonth(), filterDate.getDate());\n          matchesDate = taskDateOnly.getTime() === filterDateOnly.getTime();\n        }\n      }\n      \n      return matchesSearch && matchesAssignee && matchesPriority && matchesDate;\n    });\n\n    // Сортировка\n    filtered.sort((a, b) => {\n      let aValue: any, bValue: any;\n      \n      switch (sortBy) {\n        case \"completedAt\":\n          aValue = a.completedAt || a.archivedAt;\n          bValue = b.completedAt || b.archivedAt;\n          break;\n        case \"archivedAt\":\n          aValue = a.archivedAt;\n          bValue = b.archivedAt;\n          break;\n        case \"title\":\n          aValue = a.title.toLowerCase();\n          bValue = b.title.toLowerCase();\n          break;\n        default:\n          return 0;\n      }\n      \n      if (!aValue && !bValue) return 0;\n      if (!aValue) return 1;\n      if (!bValue) return -1;\n      \n      if (sortBy === \"title\") {\n        return sortOrder === \"asc\" ? aValue.localeCompare(bValue) : bValue.localeCompare(aValue);\n      } else {\n        const aTime = new Date(aValue).getTime();\n        const bTime = new Date(bValue).getTime();\n        return sortOrder === \"asc\" ? aTime - bTime : bTime - aTime;\n      }\n    });\n\n    return filtered;\n  }, [state.archivedTasks, boardId, searchTerm, selectedAssignee, selectedPriority, dateFilter, sortBy, sortOrder]);\n\n  const availableUsers = useMemo(() => {\n    const users = new Set<UserType>();\n    if (state.archivedTasks && Array.isArray(state.archivedTasks)) {\n      state.archivedTasks.forEach(task => {\n        if (task.boardId === boardId) {\n          if (task.assignees && Array.isArray(task.assignees)) {\n            task.assignees.forEach(assignee => users.add(assignee));\n          }\n          if (task.assignee) users.add(task.assignee);\n        }\n      });\n    }\n    return Array.from(users);\n  }, [state.archivedTasks, boardId]);\n\n  const clearFilters = () => {\n    setSearchTerm(\"\");\n    setSelectedAssignee(\"\");\n    setSelectedPriority(\"\");\n    setDateFilter(\"\");\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\n      <div className=\"glass-dark w-full max-w-6xl max-h-[90vh] flex flex-col\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-white/10\">\n          <div className=\"flex items-center gap-3\">\n            <Archive className=\"w-6 h-6 text-primary-400\" />\n            <h2 className=\"text-xl font-semibold text-white\">Архивированные задачи</h2>\n            <span className=\"px-2 py-1 bg-primary-500/20 text-primary-300 rounded text-sm\">\n              {filteredAndSortedTasks.length} из {(state.archivedTasks || []).filter(task => task.boardId === boardId).length}\n            </span>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"p-2 hover:bg-white/10 rounded-lg transition-colors\"\n          >\n            <X className=\"w-5 h-5 text-gray-400\" />\n          </button>\n        </div>\n\n        {/* Filters */}\n        <div className=\"p-6 border-b border-white/10 space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\">\n            {/* Search */}\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" />\n              <input\n                type=\"text\"\n                placeholder=\"Поиск задач...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"w-full pl-10 pr-4 py-3 bg-gray-800/80 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary-400 focus:ring-2 focus:ring-primary-400/20 transition-all duration-200 shadow-lg hover:bg-gray-700/80 hover:border-white/30\"\n              />\n            </div>\n\n            {/* Assignee filter */}\n            <CustomSelect\n              value={selectedAssignee}\n              onChange={setSelectedAssignee}\n              options={[\n                { value: \"\", label: \"Все исполнители\" },\n                ...availableUsers.map(user => ({\n                  value: user.id,\n                  label: user.name\n                }))\n              ]}\n              placeholder=\"Все исполнители\"\n              className=\"min-w-0\"\n            />\n\n            {/* Priority filter */}\n            <CustomSelect\n              value={selectedPriority}\n              onChange={setSelectedPriority}\n              options={[\n                { value: \"\", label: \"Все приоритеты\" },\n                { value: \"low\", label: \"Низкий\", color: \"#a5b4fc\" },\n    { value: \"medium\", label: \"Средний\", color: \"#818cf8\" },\n    { value: \"high\", label: \"Высокий\", color: \"#6366f1\" },\n    { value: \"urgent\", label: \"Срочный\", color: \"#4f46e5\" }\n              ]}\n              placeholder=\"Все приоритеты\"\n              className=\"min-w-0\"\n            />\n\n            {/* Date filter */}\n            <input\n              type=\"date\"\n              value={dateFilter}\n              onChange={(e) => setDateFilter(e.target.value)}\n              className=\"px-4 py-3 bg-gray-800/80 backdrop-blur-sm border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-400 focus:ring-2 focus:ring-primary-400/20 transition-all duration-200 shadow-lg hover:bg-gray-700/80 hover:border-white/30\"\n            />\n\n            {/* Clear filters */}\n            <button\n              onClick={clearFilters}\n              className=\"px-4 py-3 bg-red-500/20 text-red-300 rounded-xl hover:bg-red-500/30 transition-all duration-200 border border-red-500/30 hover:border-red-500/50 shadow-lg backdrop-blur-sm\"\n            >\n              Очистить\n            </button>\n          </div>\n\n          {/* Sort options */}\n          <div className=\"flex items-center gap-4\">\n            <span className=\"text-gray-400 text-sm\">Сортировка:</span>\n            <CustomSelect\n              value={sortBy}\n              onChange={(value) => setSortBy(value as any)}\n              options={[\n                { value: \"archivedAt\", label: \"По дате архивирования\" },\n                { value: \"completedAt\", label: \"По дате завершения\" },\n                { value: \"title\", label: \"По названию\" }\n              ]}\n              placeholder=\"Сортировка\"\n              className=\"min-w-0\"\n            />\n            <button\n              onClick={() => setSortOrder(sortOrder === \"asc\" ? \"desc\" : \"asc\")}\n              className=\"px-4 py-3 bg-gray-800/80 backdrop-blur-sm border border-white/20 rounded-xl text-white hover:bg-gray-700/80 hover:border-white/30 transition-all duration-200 shadow-lg focus:outline-none focus:border-primary-400 focus:ring-2 focus:ring-primary-400/20\"\n            >\n              {sortOrder === \"asc\" ? \"↑\" : \"↓\"}\n            </button>\n          </div>\n        </div>\n\n        {/* Tasks list */}\n        <div className=\"flex-1 overflow-y-auto p-6\">\n          {filteredAndSortedTasks.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <Archive className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n              <p className=\"text-gray-400\">\n                {(state.archivedTasks || []).filter(task => task.boardId === boardId).length === 0 ? \"Нет архивированных задач\" : \"Задачи не найдены\"}\n              </p>\n            </div>\n          ) : (\n            <div className=\"space-y-3\">\n              {filteredAndSortedTasks.map(task => (\n                <div\n                  key={task.id}\n                  className=\"bg-white/5 border border-white/10 rounded-lg p-4 hover:bg-white/10 transition-colors\"\n                >\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <h3 className=\"font-medium text-white mb-2\">{task.title}</h3>\n                      {task.description && (\n                        <p className=\"text-gray-400 text-sm mb-3 line-clamp-2\">{task.description}</p>\n                      )}\n                      \n                      <div className=\"flex items-center gap-4 text-xs text-gray-400\">\n                        <span className={`px-2 py-1 rounded ${\n                          task.priority === 'urgent' ? 'bg-primary-700/20 text-primary-400' :\n          task.priority === 'high' ? 'bg-primary-600/20 text-primary-400' :\n          task.priority === 'medium' ? 'bg-primary-500/20 text-primary-400' :\n          'bg-primary-400/20 text-primary-400'\n                        }`}>\n                          {task.priority === 'urgent' ? 'Срочный' :\n                           task.priority === 'high' ? 'Высокий' :\n                           task.priority === 'medium' ? 'Средний' : 'Низкий'}\n                        </span>\n                        \n                        {task.assignees && Array.isArray(task.assignees) && task.assignees.length > 0 && (\n                          <div className=\"flex items-center gap-1\">\n                            <User className=\"w-3 h-3\" />\n                            <span>{task.assignees?.map(a => a.name).join(', ') || 'Не назначено'}</span>\n                          </div>\n                        )}\n                        \n                        {task.completedAt && (\n                          <div className=\"flex items-center gap-1\">\n                            <Calendar className=\"w-3 h-3\" />\n                            <span>Завершено: {formatDate(new Date(task.completedAt))}</span>\n                          </div>\n                        )}\n                        \n                        {task.archivedAt && (\n                          <div className=\"flex items-center gap-1\">\n                            <Archive className=\"w-3 h-3\" />\n                            <span>Архивировано: {formatDate(new Date(task.archivedAt))}</span>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                    \n                    {/* Action buttons for admin */}\n                    {isAdmin && (\n                      <div className=\"flex items-center gap-2 ml-4\">\n                        <button\n                          onClick={() => handleRestoreTask(task.id)}\n                          className=\"p-2 bg-primary-600/20 text-primary-400 rounded-lg hover:bg-primary-600/30 transition-colors\"\n                          title=\"Восстановить задачу\"\n                        >\n                          <RotateCcw className=\"w-4 h-4\" />\n                        </button>\n                        <button\n                          onClick={() => handleDeleteTask(task.id)}\n                          className=\"p-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors\"\n                          title=\"Удалить навсегда\"\n                        >\n                          <Trash2 className=\"w-4 h-4\" />\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n      {ConfirmationComponent()}\n    </div>\n  );\n}\n\nexport default ArchivedTasksModal;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4835, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/axele/Downloads/encore-tasks/encore-tasks-main/src/components/KanbanBoard.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport {\n  DndContext,\n  DragEndEvent,\n  DragOverlay,\n  DragStartEvent,\n  PointerSensor,\n  KeyboardSensor,\n  TouchSensor,\n  useSensor,\n  useSensors,\n  DragOverEvent,\n  closestCenter,\n  pointerWithin,\n  rectIntersection,\n  MouseSensor\n} from \"@dnd-kit/core\";\nimport { snapCenterToCursor } from \"@dnd-kit/modifiers\";\nimport { arrayMove } from \"@dnd-kit/sortable\";\nimport { Task, TaskStatus } from \"@/types\";\nimport { useApp } from \"@/contexts/AppContext\";\nimport { KanbanColumn } from \"./KanbanColumn\";\nimport { TaskCard } from \"./TaskCard\";\nimport { TaskModal } from \"./TaskModal\";\nimport ArchivedTasksModal from \"./ArchivedTasksModal\";\nimport { logTaskMoved, logTaskCreated, logTaskUpdated } from \"@/utils/taskLogger\";\n\n// Динамическое сопоставление колонок со статусами на основе позиции\nconst getStatusMapping = (columns: { id: string; position: number; name: string }[]): Record<string, TaskStatus> => {\n  const sortedColumns = [...columns].sort((a, b) => a.position - b.position);\n  const mapping: Record<string, TaskStatus> = {};\n  \n  sortedColumns.forEach((column, index) => {\n    // Определяем статус на основе названия колонки или позиции\n    let status: TaskStatus;\n    \n    if (column.name.toLowerCase().includes('выполнено') || column.name.toLowerCase().includes('done') || column.name.toLowerCase().includes('завершено')) {\n      status = 'done';\n    } else if (column.name.toLowerCase().includes('работе') || column.name.toLowerCase().includes('progress') || column.name.toLowerCase().includes('процессе')) {\n      status = 'in-progress';\n    } else if (column.name.toLowerCase().includes('проверк') || column.name.toLowerCase().includes('review') || column.name.toLowerCase().includes('тест')) {\n      status = 'review';\n    } else {\n      // Для первой колонки или неопознанных - todo\n      status = 'todo';\n    }\n    \n    mapping[column.id] = status;\n  });\n  \n  return mapping;\n};\n\nexport function KanbanBoard() {\n  const { state, dispatch, loadBoards, loadTasks, updateTask, deleteTask, createTask } = useApp();\n  const [activeTask, setActiveTask] = useState<Task | null>(null);\n  const [selectedTask, setSelectedTask] = useState<Task | null>(null);\n  const [isTaskModalOpen, setIsTaskModalOpen] = useState(false);\n  const [isArchivedTasksModalOpen, setIsArchivedTasksModalOpen] = useState(false);\n  \n  // Получаем динамическое сопоставление колонок и статусов\n  const statusMapping = state.selectedBoard ? getStatusMapping(state.selectedBoard.columns) : {};\n\n  // Load boards when project is selected\n  useEffect(() => {\n    if (state.selectedProject && state.selectedProject.id && state.isAuthenticated) {\n      loadBoards(state.selectedProject.id);\n    }\n  }, [state.selectedProject?.id, state.isAuthenticated, loadBoards]);\n\n  // Load tasks when board is selected\n  useEffect(() => {\n    if (state.selectedBoard && state.isAuthenticated) {\n      loadTasks({ boardId: state.selectedBoard.id });\n    }\n  }, [state.selectedBoard?.id, state.isAuthenticated, loadTasks]);\n\n  const sensors = useSensors(\n    useSensor(MouseSensor, {\n      activationConstraint: {\n        distance: 1\n      }\n    }),\n    useSensor(TouchSensor, {\n      activationConstraint: {\n        delay: 250,\n        tolerance: 5\n      }\n    }),\n    useSensor(KeyboardSensor, {\n      coordinateGetter: (event, { context: { active, droppableRects, droppableContainers, collisionRect } }) => {\n        if (event.code === 'Space') {\n          event.preventDefault();\n          return;\n        }\n        \n        if (!active?.rect?.current?.translated) {\n          return;\n        }\n        \n        const translated = active.rect.current.translated;\n          // Handle both ClientRect and coordinate object types\n          const x = 'x' in translated && typeof translated.x === 'number' ? translated.x : 0;\n          const y = 'y' in translated && typeof translated.y === 'number' ? translated.y : 0;\n        \n        switch (event.code) {\n          case 'ArrowDown':\n            return { x, y: y + 25 };\n          case 'ArrowUp':\n            return { x, y: y - 25 };\n          case 'ArrowRight':\n            return { x: x + 25, y };\n          case 'ArrowLeft':\n            return { x: x - 25, y };\n        }\n        \n        return undefined;\n      }\n    })\n  );\n\n  // Filter and sort tasks for current board only\n  const getFilteredAndSortedTasks = (tasks: Task[]) => {\n    // Use search filtered tasks if available, otherwise use all tasks\n    const tasksToFilter = state.filteredTasks || tasks;\n    let filteredTasks = tasksToFilter.filter(\n      (task) =>\n      task.projectId === state.selectedProject?.id &&\n      task.boardId === state.selectedBoard?.id\n    );\n\n    // Apply filters\n    if (state.filters.assignee) {\n      filteredTasks = filteredTasks.filter(\n        (task) => {\n          const assignees = task.assignees || (task.assignee ? [task.assignee] : []);\n          return assignees.some(a => a.id === state.filters.assignee);\n        }\n      );\n    }\n\n    if (state.filters.priority) {\n      filteredTasks = filteredTasks.filter(\n        (task) => task.priority === state.filters.priority\n      );\n    }\n\n    if (state.filters.status) {\n      filteredTasks = filteredTasks.filter(\n        (task) => task.status === state.filters.status\n      );\n    }\n\n    if (state.filters.deadline) {\n      const now = new Date();\n      const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n      const weekFromNow = new Date(today.getTime() + 7 * 24 * 60 * 60 * 1000);\n      const monthFromNow = new Date(\n        today.getFullYear(),\n        today.getMonth() + 1,\n        today.getDate()\n      );\n\n      filteredTasks = filteredTasks.filter((task) => {\n        if (!task.deadline) return state.filters.deadline === \"\";\n\n        const deadline = new Date(task.deadline);\n\n        switch (state.filters.deadline) {\n          case \"overdue\":\n            return deadline < today;\n          case \"today\":\n            return deadline.toDateString() === today.toDateString();\n          case \"week\":\n            return deadline >= today && deadline <= weekFromNow;\n          case \"month\":\n            return deadline >= today && deadline <= monthFromNow;\n          default:\n            return true;\n        }\n      });\n    }\n\n    // Apply sorting\n    filteredTasks.sort((a, b) => {\n      let comparison = 0;\n\n      switch (state.sortBy) {\n        case \"priority\":\n          const priorityOrder = { urgent: 4, high: 3, medium: 2, low: 1 };\n          comparison = priorityOrder[a.priority] - priorityOrder[b.priority];\n          break;\n        case \"deadline\":\n          if (!a.deadline && !b.deadline) comparison = 0;else\n          if (!a.deadline) comparison = 1;else\n          if (!b.deadline) comparison = -1;else\n\n          comparison =\n          new Date(a.deadline).getTime() - new Date(b.deadline).getTime();\n          break;\n        case \"created\":\n          comparison =\n          new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime();\n          break;\n        case \"updated\":\n          comparison =\n          new Date(a.updatedAt).getTime() - new Date(b.updatedAt).getTime();\n          break;\n        default:\n          comparison = a.position - b.position;\n      }\n\n      return state.sortOrder === \"asc\" ? comparison : -comparison;\n    });\n\n    return filteredTasks;\n  };\n\n  const findContainer = (id: string): TaskStatus | null => {\n    // Check if it's a column ID\n    if (statusMapping[id]) {\n      return statusMapping[id];\n    }\n    \n    // Check if it's a task ID\n    const task = state.tasks.find(t => t.id === id);\n    return task ? task.status : null;\n  };\n\n  const getTasksByStatus = (status: TaskStatus) => {\n    return getFilteredAndSortedTasks(state.tasks).filter(\n      (task) => task.status === status &&\n                task.projectId === state.selectedProject?.id &&\n                task.boardId === state.selectedBoard?.id\n    );\n  };\n\n  const handleDragStart = (event: DragStartEvent) => {\n    const { active } = event;\n    const task = active.data.current?.task || state.tasks.find((t) => t.id === active.id);\n    if (task) {\n      setActiveTask(task);\n      // Announce drag start for screen readers\n      const announcement = `Начато перетаскивание задачи: ${task.title}`;\n      const liveRegion = document.getElementById('dnd-live-region');\n      if (liveRegion) {\n        liveRegion.textContent = announcement;\n      }\n    }\n  };\n\n  const handleDragOver = (event: DragOverEvent) => {\n    const { active, over } = event;\n    \n    if (!over || !active) return;\n    \n    const overId = over.id as string;\n    const activeId = active.id as string;\n    \n    // Validate targets\n    const isOverColumn = statusMapping[overId];\n    const overTask = state.tasks.find(task => task.id === overId);\n    const activeTask = state.tasks.find(task => task.id === activeId);\n    \n    if (!activeTask) return;\n    if (!isOverColumn && !overTask) return;\n    \n    // Provide audio feedback for screen readers\n    const targetName = isOverColumn \n      ? `колонку ${over.data.current?.column?.name || 'неизвестную'}`\n      : `задачу ${overTask?.title || 'неизвестную'}`;\n    \n    const announcement = `Над ${targetName}`;\n    const liveRegion = document.getElementById('dnd-live-region');\n    if (liveRegion && liveRegion.textContent !== announcement) {\n      liveRegion.textContent = announcement;\n    }\n  };\n  \n  const handleDragEnd = (event: DragEndEvent) => {\n    const { active, over } = event;\n    const draggedTask = activeTask;\n    setActiveTask(null);\n    \n    // Clear live region\n    const liveRegion = document.getElementById('dnd-live-region');\n    if (liveRegion) {\n      liveRegion.textContent = '';\n    }\n    \n    if (!over || !draggedTask) {\n      // Announce cancelled drag\n      if (liveRegion && draggedTask) {\n        liveRegion.textContent = `Перетаскивание задачи \"${draggedTask.title}\" отменено`;\n      }\n      return;\n    }\n    \n    const activeId = active.id as string;\n    const overId = over.id as string;\n    \n    // Prevent dropping on self\n    if (activeId === overId) return;\n    \n    // Determine target status\n    let targetStatus: TaskStatus | null = null;\n    let targetColumnTitle = '';\n    \n    if (statusMapping[overId]) {\n      targetStatus = statusMapping[overId];\n      targetColumnTitle = over.data.current?.column?.name || 'неизвестную колонку';\n    } else {\n      const overTask = state.tasks.find(task => task.id === overId);\n      if (overTask) {\n        targetStatus = overTask.status;\n        const targetColumn = state.selectedBoard?.columns.find(col => statusMapping[col.id] === overTask.status);\n        targetColumnTitle = targetColumn?.name || 'неизвестную колонку';\n      }\n    }\n    \n    if (!targetStatus) {\n      if (liveRegion) {\n        liveRegion.textContent = `Невозможно переместить задачу \"${draggedTask.title}\" в недопустимое место`;\n      }\n      return;\n    }\n    \n    const activeContainer = draggedTask.status;\n    const overContainer = targetStatus;\n    \n    try {\n      // Handle cross-column moves\n      if (activeContainer !== overContainer) {\n        const updatedTask = {\n          ...draggedTask,\n          status: overContainer,\n          updatedAt: new Date(),\n          // Устанавливаем completedAt при перемещении в Done\n          ...(overContainer === \"done\" && { completedAt: new Date() })\n        };\n        \n        // Update task via API\n        updateTask(updatedTask.id, updatedTask);\n        \n        // Логирование перемещения задачи\n        if (state.currentUser) {\n          const oldColumn = state.selectedBoard?.columns.find(col => statusMapping[col.id] === activeContainer);\n          const newColumn = state.selectedBoard?.columns.find(col => statusMapping[col.id] === overContainer);\n          logTaskMoved(\n            dispatch,\n            draggedTask.id,\n            state.selectedBoard?.id || '',\n            state.selectedProject?.id || '',\n            draggedTask.title,\n            state.currentUser.id,\n            state.currentUser.name,\n            oldColumn?.name || activeContainer,\n            newColumn?.name || overContainer\n          );\n        }\n        \n        // Announce successful move\n        if (liveRegion) {\n          liveRegion.textContent = `Задача \"${draggedTask.title}\" перемещена в ${targetColumnTitle}`;\n        }\n      }\n      // Handle reordering within same column\n      else if (!statusMapping[overId]) {\n        const columnTasks = getTasksByStatus(activeContainer);\n        const activeIndex = columnTasks.findIndex(task => task.id === activeId);\n        const overIndex = columnTasks.findIndex(task => task.id === overId);\n        \n        if (activeIndex !== -1 && overIndex !== -1 && activeIndex !== overIndex) {\n          const reorderedTasks = arrayMove(columnTasks, activeIndex, overIndex);\n          \n          // Batch update positions\n          reorderedTasks.forEach((task, index) => {\n            dispatch({\n              type: \"UPDATE_TASK\",\n              payload: {\n                ...task,\n                position: index,\n                updatedAt: new Date()\n              }\n            });\n          });\n          \n          // Announce reorder\n          if (liveRegion) {\n            const direction = activeIndex < overIndex ? 'вниз' : 'вверх';\n            liveRegion.textContent = `Задача \"${draggedTask.title}\" перемещена ${direction} в колонке ${targetColumnTitle}`;\n          }\n        }\n      }\n    } catch (error) {\n      console.error('Ошибка при перетаскивании:', error);\n      if (liveRegion) {\n        liveRegion.textContent = `Ошибка при перемещении задачи \"${draggedTask.title}\"`;\n      }\n    }\n  };\n\n  const handleTaskClick = (task: Task) => {\n    setSelectedTask(task);\n    setIsTaskModalOpen(true);\n  };\n\n  const handleAddTask = useCallback(async (columnId: string | number) => {\n    // Ensure columnId is treated as string for statusMapping lookup\n    const columnIdStr = String(columnId);\n    \n    const status = statusMapping[columnIdStr];\n    console.log('Column ID:', columnId, 'Type:', typeof columnId);\n    console.log('Column ID as string:', columnIdStr);\n    console.log('Status mapping:', statusMapping);\n    console.log('Mapped status:', status);\n    console.log('Selected board:', state.selectedBoard);\n    \n    if (!status || !state.selectedBoard) {\n      console.log('Early return: no status or board');\n      return;\n    }\n\n    // Create a new task with default values\n    const newTaskData = {\n      title: \"Новая задача\",\n      description: \"\",\n      status,\n      priority: \"medium\" as const,\n      columnId: columnIdStr, // Use string columnId for API\n      position: 0,\n      tags: []\n    };\n\n    try {\n      const success = await createTask(newTaskData);\n      \n      if (success) {\n        // Wait a bit for state to update, then find and open the task\n        setTimeout(() => {\n          // Find the newly created task in the state (get the most recent one)\n          const createdTasks = state.tasks\n            .filter(task => \n              task.title === newTaskData.title && \n              task.projectId === newTaskData.projectId &&\n              task.boardId === newTaskData.boardId &&\n              task.status === newTaskData.status\n            )\n            .sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n          \n          const createdTask = createdTasks[0]; // Get the most recent one\n          \n          if (createdTask) {\n            setSelectedTask(createdTask);\n            setIsTaskModalOpen(true);\n          }\n        }, 100);\n      }\n    } catch (error) {\n      console.error('Ошибка при создании задачи:', error);\n    }\n  }, [statusMapping, state.selectedBoard, state.selectedProject, state.tasks, createTask, loadTasks]);\n\n  if (!state.selectedBoard) {\n    return (\n      <div\n        className=\"flex items-center justify-center h-full text-gray-400\"\n        data-oid=\"miujqkr\">\n\n        <div className=\"text-center\" data-oid=\"5y43:ig\">\n          <p data-oid=\"10:187z\">Выберите доску для работы</p>\n          <p className=\"text-sm mt-2\" data-oid=\"dgvjqa9\">\n            Используйте боковое меню для выбора проекта и доски\n          </p>\n        </div>\n      </div>);\n\n  }\n\n  return (\n    <div className=\"h-full flex flex-col animate-fade-in\" data-oid=\"-kpg_.1\">\n      {/* Live region for screen reader announcements */}\n      <div\n        id=\"dnd-live-region\"\n        aria-live=\"assertive\"\n        aria-atomic=\"true\"\n        className=\"sr-only\"\n        role=\"status\"\n      />\n      \n      <DndContext\n        sensors={sensors}\n        collisionDetection={closestCenter}\n        onDragStart={handleDragStart}\n        onDragOver={handleDragOver}\n        onDragEnd={handleDragEnd}\n        accessibility={{\n          announcements: {\n            onDragStart: ({ active }) => {\n              const task = active.data.current?.task;\n              return task ? `Начато перетаскивание задачи: ${task.title}` : 'Начато перетаскивание';\n            },\n            onDragOver: ({ active, over }) => {\n              if (!over) return 'Перетаскивание';\n              const isOverColumn = statusMapping[over.id as string];\n              const targetName = isOverColumn \n                ? `колонку ${over.data.current?.column?.name || 'неизвестную'}`\n                : 'задачу';\n              return `Над ${targetName}`;\n            },\n            onDragEnd: ({ active, over }) => {\n              const task = active.data.current?.task;\n              if (!over || !task) return `Перетаскивание задачи \"${task?.title || 'неизвестной'}\" отменено`;\n              \n              const isOverColumn = statusMapping[over.id as string];\n              const targetName = isOverColumn \n                ? over.data.current?.column?.title || 'неизвестную колонку'\n                : 'другую позицию';\n              return `Задача \"${task.title}\" перемещена в ${targetName}`;\n            },\n            onDragCancel: ({ active }) => {\n              const task = active.data.current?.task;\n              return `Перетаскивание задачи \"${task?.title || 'неизвестной'}\" отменено`;\n            }\n          }\n        }}\n        data-oid=\"mpofvb6\">\n\n        <div\n          className=\"flex gap-4 lg:gap-6 h-full overflow-x-auto overflow-y-hidden p-4 lg:p-6 min-h-0\"\n          style={{ scrollbarWidth: 'thin' }}\n          data-oid=\"_skbiyy\">\n\n          {state.selectedBoard?.columns?.map((column) => {\n            const columnTasks = state.tasks.filter(\n              (task) =>\n              task.projectId === state.selectedProject?.id &&\n              task.boardId === state.selectedBoard?.id &&\n              task.status === statusMapping[column.id]\n            );\n\n            const filteredAndSortedTasks =\n            getFilteredAndSortedTasks(columnTasks);\n\n            return (\n              <KanbanColumn\n                key={column.id}\n                column={column}\n                tasks={filteredAndSortedTasks}\n                onAddTask={() => handleAddTask(column.id)}\n                onTaskClick={handleTaskClick}\n                onViewCompleted={() => setIsArchivedTasksModalOpen(true)}\n                data-oid=\"kd4guir\" />);\n\n\n          })}\n        </div>\n\n        <DragOverlay\n          adjustScale={false}\n          modifiers={[snapCenterToCursor]}\n          style={{\n            cursor: 'grabbing'\n          }}\n          dropAnimation={{\n            duration: 200,\n            easing: 'cubic-bezier(0.18, 0.67, 0.6, 1.22)'\n          }}\n          data-oid=\"u3n2_9u\">\n          {activeTask ?\n          <div className=\"opacity-90 shadow-2xl transform-none\" data-oid=\"wl0c6uw\">\n              <TaskCard task={activeTask} isDragOverlay={true} data-oid=\"yp0pnz9\" />\n            </div> :\n          null}\n        </DragOverlay>\n      </DndContext>\n\n      {/* Task Modal */}\n      {selectedTask &&\n      <TaskModal\n        task={selectedTask}\n        isOpen={isTaskModalOpen}\n        onClose={() => {\n          setIsTaskModalOpen(false);\n          setSelectedTask(null);\n        }}\n        onSave={(updatedTask) => {\n          dispatch({ type: \"UPDATE_TASK\", payload: updatedTask });\n          \n          // Логирование обновления задачи\n          if (state.currentUser && selectedTask) {\n            const changes = [];\n            if (selectedTask.title !== updatedTask.title) {\n              changes.push({ field: 'title', oldValue: selectedTask.title, newValue: updatedTask.title });\n            }\n            if (selectedTask.description !== updatedTask.description) {\n              changes.push({ field: 'description', oldValue: selectedTask.description, newValue: updatedTask.description });\n            }\n            if (selectedTask.priority !== updatedTask.priority) {\n              changes.push({ field: 'priority', oldValue: selectedTask.priority, newValue: updatedTask.priority });\n            }\n            if (JSON.stringify(selectedTask.assignees) !== JSON.stringify(updatedTask.assignees)) {\n              const oldAssignees = selectedTask.assignees?.map((assignee: any) => assignee.name).filter(Boolean).join(', ') || 'Не назначено';\n              const newAssignees = updatedTask.assignees?.map((assignee: any) => assignee.name).filter(Boolean).join(', ') || 'Не назначено';\n              changes.push({ field: 'assignees', oldValue: oldAssignees, newValue: newAssignees });\n            }\n            if (selectedTask.deadline !== updatedTask.deadline) {\n              changes.push({ field: 'deadline', oldValue: selectedTask.deadline || 'Не установлен', newValue: updatedTask.deadline || 'Не установлен' });\n            }\n            if (JSON.stringify(selectedTask.tags) !== JSON.stringify(updatedTask.tags)) {\n              changes.push({ field: 'tags', oldValue: selectedTask.tags?.join(', ') || 'Нет тегов', newValue: updatedTask.tags?.join(', ') || 'Нет тегов' });\n            }\n            \n            if (changes.length > 0) {\n              logTaskUpdated(\n                dispatch,\n                updatedTask.id,\n                state.selectedBoard?.id || '',\n                state.selectedProject?.id || '',\n                updatedTask.title,\n                state.currentUser.id,\n                state.currentUser.name,\n                changes\n              );\n            }\n          }\n          \n          setIsTaskModalOpen(false);\n          setSelectedTask(null);\n        }}\n        data-oid=\"cjfjdu0\" />\n\n      }\n      \n      {/* Archived Tasks Modal */}\n      <ArchivedTasksModal\n        isOpen={isArchivedTasksModalOpen}\n        onClose={() => setIsArchivedTasksModalOpen(false)}\n        boardId={state.selectedBoard?.id || ''}\n      />\n    </div>);\n\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5475, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/axele/Downloads/encore-tasks/encore-tasks-main/src/components/AuthModal.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport { useApp } from \"@/contexts/AppContext\";\nimport { User, UserRole } from \"@/types\";\nimport { generateId } from \"@/lib/utils\";\nimport { api } from \"@/lib/api\";\nimport { Eye, EyeOff, LogIn, UserPlus } from \"lucide-react\";\nimport { useConfirmation } from \"@/hooks/useConfirmation\";\n\ninterface AuthModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport function AuthModal({ isOpen, onClose }: AuthModalProps) {\n  const { state, dispatch, login } = useApp();\n  const { ConfirmationComponent, confirm } = useConfirmation();\n  const [isLogin, setIsLogin] = useState(true);\n  const [showPassword, setShowPassword] = useState(false);\n  const [formData, setFormData] = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\"\n  });\n  const [errors, setErrors] = useState<Record<string, string>>({});\n\n  if (!isOpen) return null;\n\n  const validateForm = () => {\n    const newErrors: Record<string, string> = {};\n\n    if (!formData.email) {\n      newErrors.email = \"Email обязателен\";\n    } else if (!/\\S+@\\S+\\.\\S+/.test(formData.email)) {\n      newErrors.email = \"Неверный формат email\";\n    }\n\n    if (!formData.password) {\n      newErrors.password = \"Пароль обязателен\";\n    } else if (formData.password.length < 6) {\n      newErrors.password = \"Пароль должен содержать минимум 6 символов\";\n    }\n\n    if (!isLogin) {\n      if (!formData.name) {\n        newErrors.name = \"Имя обязательно\";\n      }\n      if (formData.password !== formData.confirmPassword) {\n        newErrors.confirmPassword = \"Пароли не совпадают\";\n      }\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!validateForm()) return;\n\n    if (isLogin) {\n      // Login logic using API\n      const success = await login(formData.email, formData.password);\n      \n      if (!success) {\n        setErrors({ email: \"Неверный email или пароль\" });\n        return;\n      }\n    } else {\n      // Registration logic using API\n      const response = await api.register(formData.name, formData.email, formData.password);\n      \n      if (response.error) {\n        if (response.error.includes('already exists')) {\n          setErrors({ email: \"Пользователь с таким email уже существует\" });\n        } else {\n          setErrors({ email: response.error });\n        }\n        return;\n      }\n      \n      // Проверяем, требуется ли подтверждение\n      if (response.data?.requiresApproval) {\n        // Устанавливаем пользователя как аутентифицированного, но неодобренного\n        if (response.data.user) {\n          dispatch({\n            type: 'LOGIN',\n            payload: {\n              id: response.data.user.id,\n              name: response.data.user.name,\n              email: response.data.user.email,\n              role: response.data.user.role,\n              isApproved: false,\n              avatar: response.data.user.avatar,\n              createdAt: new Date(response.data.user.createdAt),\n              updatedAt: new Date(response.data.user.updatedAt)\n            }\n          });\n        }\n        \n        onClose();\n        \n        // Reset form\n        setFormData({\n          name: \"\",\n          email: \"\",\n          password: \"\",\n          confirmPassword: \"\"\n        });\n        setErrors({});\n        return;\n      }\n      \n      // Если подтверждение не требуется (например, для админов), пытаемся войти\n      const loginSuccess = await login(formData.email, formData.password);\n      \n      if (!loginSuccess) {\n        setErrors({ email: \"Регистрация прошла успешно, но не удалось войти в систему\" });\n        return;\n      }\n    }\n\n    onClose();\n\n    // Reset form\n    setFormData({\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      confirmPassword: \"\"\n    });\n    setErrors({});\n  };\n\n  const handleDemoLogin = (email: string) => {\n    const user = state.users.find(u => u.email === email);\n    if (user) {\n      dispatch({ type: \"LOGIN\", payload: user });\n      onClose();\n    }\n  };\n\n  const handleInputChange = (field: string, value: string) => {\n    setFormData((prev) => ({ ...prev, [field]: value }));\n    if (errors[field]) {\n      setErrors((prev) => ({ ...prev, [field]: \"\" }));\n    }\n  };\n\n  return (\n    <div\n      className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm modal-overlay animate-fade-in\"\n      data-oid=\"3ye2vpd\">\n\n      <div\n        className=\"w-full max-w-md bg-gray-900/95 backdrop-blur-xl border border-white/10 rounded-xl overflow-hidden modal-content animate-scale-in\"\n        data-oid=\"0m9:rvw\">\n\n        {/* Header */}\n        <div className=\"p-6 border-b border-white/10\" data-oid=\":6ybbdd\">\n          <div\n            className=\"flex items-center justify-center gap-2 mb-4\"\n            data-oid=\"mvmftvv\">\n\n            <div\n              className=\"w-8 h-8 bg-primary-500 rounded-lg flex items-center justify-center\"\n              data-oid=\"ybrgm_b\">\n\n              <span className=\"text-white font-bold\" data-oid=\"sg_oky:\">\n                T\n              </span>\n            </div>\n            <h1 className=\"text-2xl text-white\" data-oid=\"0xqvbcp\">\n               <span className=\"font-black\">ENCORE</span> <span className=\"relative -top-0.5\">|</span> <span className=\"text-primary-500 font-medium\">TASKS</span>\n            </h1>\n          </div>\n\n          <div className=\"flex bg-white/5 rounded-lg p-1\" data-oid=\"0bfjcn-\">\n            <button\n              onClick={() => setIsLogin(true)}\n              className={`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${\n              isLogin ?\n              \"bg-primary-500 text-white\" :\n              \"text-gray-400 hover:text-white\"}`\n              }\n              data-oid=\"faphu9.\">\n\n              Вход\n            </button>\n            <button\n              onClick={() => setIsLogin(false)}\n              className={`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${\n              !isLogin ?\n              \"bg-primary-500 text-white\" :\n              \"text-gray-400 hover:text-white\"}`\n              }\n              data-oid=\"hgv7a86\">\n\n              Регистрация\n            </button>\n          </div>\n        </div>\n\n        {/* Form */}\n        <form\n          onSubmit={handleSubmit}\n          className=\"p-6 space-y-4\"\n          data-oid=\"0i2lf_1\">\n\n          {!isLogin &&\n          <div data-oid=\"afiw-qf\">\n              <label\n              className=\"block text-sm font-medium text-gray-300 mb-2\"\n              data-oid=\"q1yv0jx\">\n\n                Имя\n              </label>\n              <input\n              type=\"text\"\n              value={formData.name}\n              onChange={(e) => handleInputChange(\"name\", e.target.value)}\n              className={`w-full px-4 py-2 bg-white/5 border rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-primary-500 ${\n              errors.name ? \"border-red-500\" : \"border-white/10\"}`\n              }\n              placeholder=\"Введите ваше имя\"\n              data-oid=\"_03_n3m\" />\n\n\n              {errors.name &&\n            <p className=\"text-red-400 text-sm mt-1\" data-oid=\"2.0k4wv\">\n                  {errors.name}\n                </p>\n            }\n            </div>\n          }\n\n          <div data-oid=\"b5smqad\">\n            <label\n              className=\"block text-sm font-medium text-gray-300 mb-2\"\n              data-oid=\"v:tvzde\">\n\n              Email\n            </label>\n            <input\n              type=\"email\"\n              value={formData.email}\n              onChange={(e) => handleInputChange(\"email\", e.target.value)}\n              className={`w-full px-4 py-2 bg-white/5 border rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-primary-500 ${\n              errors.email ? \"border-red-500\" : \"border-white/10\"}`\n              }\n              placeholder=\"Введите ваш email\"\n              data-oid=\"ua:--nc\" />\n\n\n            {errors.email &&\n            <p className=\"text-red-400 text-sm mt-1\" data-oid=\"apl16r8\">\n                {errors.email}\n              </p>\n            }\n          </div>\n\n          <div data-oid=\"yl9:isw\">\n            <label\n              className=\"block text-sm font-medium text-gray-300 mb-2\"\n              data-oid=\"l.q58sh\">\n\n              Пароль\n            </label>\n            <div className=\"relative\" data-oid=\"mx027n-\">\n              <input\n                type={showPassword ? \"text\" : \"password\"}\n                value={formData.password}\n                onChange={(e) => handleInputChange(\"password\", e.target.value)}\n                className={`w-full px-4 py-2 pr-12 bg-white/5 border rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-primary-500 ${\n                errors.password ? \"border-red-500\" : \"border-white/10\"}`\n                }\n                placeholder=\"Введите пароль\"\n                data-oid=\"dth2pxi\" />\n\n\n              <button\n                type=\"button\"\n                onClick={() => setShowPassword(!showPassword)}\n                className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white\"\n                data-oid=\"t3dlh_w\">\n\n                {showPassword ?\n                <EyeOff className=\"w-5 h-5\" data-oid=\"rm0.2vc\" /> :\n\n                <Eye className=\"w-5 h-5\" data-oid=\"3avvs0l\" />\n                }\n              </button>\n            </div>\n            {errors.password &&\n            <p className=\"text-red-400 text-sm mt-1\" data-oid=\"52-5pe-\">\n                {errors.password}\n              </p>\n            }\n          </div>\n\n          {!isLogin &&\n          <div data-oid=\"l06ze1.\">\n              <label\n              className=\"block text-sm font-medium text-gray-300 mb-2\"\n              data-oid=\"r4plpq7\">\n\n                Подтвердите пароль\n              </label>\n              <input\n              type=\"password\"\n              value={formData.confirmPassword}\n              onChange={(e) =>\n              handleInputChange(\"confirmPassword\", e.target.value)\n              }\n              className={`w-full px-4 py-2 bg-white/5 border rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-primary-500 ${\n              errors.confirmPassword ? \"border-red-500\" : \"border-white/10\"}`\n              }\n              placeholder=\"Подтвердите пароль\"\n              data-oid=\"j6aq-de\" />\n\n\n              {errors.confirmPassword &&\n            <p className=\"text-red-400 text-sm mt-1\" data-oid=\"r_7:1ha\">\n                  {errors.confirmPassword}\n                </p>\n            }\n            </div>\n          }\n\n          <button\n            type=\"submit\"\n            className=\"w-full flex items-center justify-center gap-2 px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg transition-colors\"\n            data-oid=\"o6-jl2i\">\n\n            {isLogin ?\n            <>\n                <LogIn className=\"w-4 h-4\" data-oid=\"srdk2tq\" />\n                Войти\n              </> :\n            <>\n                <UserPlus className=\"w-4 h-4\" data-oid=\"lw0h7pr\" />\n                Зарегистрироваться\n              </>\n            }\n          </button>\n        </form>\n      </div>\n      {ConfirmationComponent()}\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5994, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/axele/Downloads/encore-tasks/encore-tasks-main/src/components/WelcomeScreen.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport { useApp } from \"@/contexts/AppContext\";\nimport { Users, Mail, Clock, CheckCircle, LogOut } from \"lucide-react\";\n\nexport function WelcomeScreen() {\n  const { state, logout } = useApp();\n\n  const handleLogout = () => {\n    if (confirm(\"Вы уверены, что хотите выйти?\")) {\n      logout();\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 flex items-center justify-center p-4 animate-fade-in\">\n      <div className=\"max-w-2xl w-full\">\n        {/* Welcome Card */}\n        <div className=\"bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-8 lg:p-12 text-center animate-bounce-in\">\n          {/* Logo/Icon */}\n          <div className=\"w-20 h-20 bg-primary-500/20 rounded-full flex items-center justify-center mx-auto mb-6 animate-scale-in animate-delay-200\">\n            <Users className=\"w-10 h-10 text-primary-400\" />\n          </div>\n\n          {/* Welcome Message */}\n          <h1 className=\"text-4xl lg:text-5xl text-white mb-4 animate-slide-in-left animate-delay-300\">\n             Добро пожаловать в <span className=\"font-black\">ENCORE</span> <span className=\"text-primary-500 font-medium\">TASKS</span>!\n          </h1>\n          \n          <p className=\"text-xl text-gray-300 mb-2\">\n            Привет, {state.currentUser?.name}!\n          </p>\n          \n          <p className=\"text-gray-400 mb-8 leading-relaxed\">\n            Ваш аккаунт успешно создан, но для начала работы необходимо подтверждение администратора. \n            Пожалуйста, свяжитесь с администратором системы, чтобы получить доступ к проектам и задачам.\n          </p>\n\n          {/* Status Steps */}\n          <div className=\"space-y-4 mb-8\">\n            <div className=\"flex items-center gap-4 p-4 bg-white/5 rounded-lg\">\n              <div className=\"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center flex-shrink-0\">\n                <CheckCircle className=\"w-5 h-5 text-white\" />\n              </div>\n              <div className=\"text-left\">\n                <p className=\"text-white font-medium\">Аккаунт создан</p>\n                <p className=\"text-gray-400 text-sm\">Ваш профиль успешно зарегистрирован</p>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-4 p-4 bg-white/5 rounded-lg\">\n              <div className=\"w-8 h-8 bg-primary-500 rounded-full flex items-center justify-center flex-shrink-0\">\n                <Clock className=\"w-5 h-5 text-white\" />\n              </div>\n              <div className=\"text-left\">\n                <p className=\"text-white font-medium\">Ожидание подтверждения</p>\n                <p className=\"text-gray-400 text-sm\">Администратор должен одобрить ваш доступ</p>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-4 p-4 bg-white/5 rounded-lg opacity-50\">\n              <div className=\"w-8 h-8 bg-gray-500 rounded-full flex items-center justify-center flex-shrink-0\">\n                <Users className=\"w-5 h-5 text-white\" />\n              </div>\n              <div className=\"text-left\">\n                <p className=\"text-white font-medium\">Доступ к проектам</p>\n                <p className=\"text-gray-400 text-sm\">Будет доступен после подтверждения</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Contact Info */}\n          <div className=\"bg-primary-500/10 border border-primary-500/20 rounded-lg p-6\">\n            <div className=\"flex items-center justify-center gap-2 mb-3\">\n              <Mail className=\"w-5 h-5 text-primary-400\" />\n              <h3 className=\"text-lg font-semibold text-white\">Как получить доступ?</h3>\n            </div>\n            <p className=\"text-gray-300 text-sm leading-relaxed\">\n              Обратитесь к администратору системы для активации вашего аккаунта. \n              После подтверждения вы получите доступ ко всем функциям платформы.\n            </p>\n          </div>\n\n          {/* User Info */}\n          <div className=\"mt-8 pt-6 border-t border-white/10 flex items-center justify-between\">\n            <p className=\"text-gray-400 text-sm\">\n              Вы вошли как: <span className=\"text-white font-medium\">{state.currentUser?.email}</span>\n            </p>\n            <button\n              onClick={handleLogout}\n              className=\"flex items-center gap-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors\"\n              title=\"Выйти\">\n              <LogOut className=\"w-4 h-4\" />\n              <span className=\"text-sm\">Выйти</span>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAJA;;;;AAMO,SAAS;IACd,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,8HAAA,CAAA,SAAM,AAAD;IAE/B,MAAM,eAAe;QACnB,IAAI,QAAQ,kCAAkC;YAC5C;QACF;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;sBAEb,cAAA,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,oMAAA,CAAA,QAAK;4BAAC,WAAU;;;;;;;;;;;kCAInB,8OAAC;wBAAG,WAAU;;4BAA+E;0CACvE,8OAAC;gCAAK,WAAU;0CAAa;;;;;;4BAAa;0CAAC,8OAAC;gCAAK,WAAU;0CAA+B;;;;;;4BAAY;;;;;;;kCAG5H,8OAAC;wBAAE,WAAU;;4BAA6B;4BAC/B,MAAM,WAAW,EAAE;4BAAK;;;;;;;kCAGnC,8OAAC;wBAAE,WAAU;kCAAqC;;;;;;kCAMlD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC,2NAAA,CAAA,cAAW;4CAAC,WAAU;;;;;;;;;;;kDAEzB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAE,WAAU;0DAAyB;;;;;;0DACtC,8OAAC;gDAAE,WAAU;0DAAwB;;;;;;;;;;;;;;;;;;0CAIzC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC,oMAAA,CAAA,QAAK;4CAAC,WAAU;;;;;;;;;;;kDAEnB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAE,WAAU;0DAAyB;;;;;;0DACtC,8OAAC;gDAAE,WAAU;0DAAwB;;;;;;;;;;;;;;;;;;0CAIzC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC,oMAAA,CAAA,QAAK;4CAAC,WAAU;;;;;;;;;;;kDAEnB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAE,WAAU;0DAAyB;;;;;;0DACtC,8OAAC;gDAAE,WAAU;0DAAwB;;;;;;;;;;;;;;;;;;;;;;;;kCAM3C,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,kMAAA,CAAA,OAAI;wCAAC,WAAU;;;;;;kDAChB,8OAAC;wCAAG,WAAU;kDAAmC;;;;;;;;;;;;0CAEnD,8OAAC;gCAAE,WAAU;0CAAwC;;;;;;;;;;;;kCAOvD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAE,WAAU;;oCAAwB;kDACrB,8OAAC;wCAAK,WAAU;kDAA0B,MAAM,WAAW,EAAE;;;;;;;;;;;;0CAE7E,8OAAC;gCACC,SAAS;gCACT,WAAU;gCACV,OAAM;;kDACN,8OAAC,0MAAA,CAAA,SAAM;wCAAC,WAAU;;;;;;kDAClB,8OAAC;wCAAK,WAAU;kDAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOxC","debugId":null}},
    {"offset": {"line": 6354, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/axele/Downloads/encore-tasks/encore-tasks-main/src/components/NoProjectsScreen.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport { useApp } from \"@/contexts/AppContext\";\nimport { Users, Mail, Clock, FolderX, LogOut } from \"lucide-react\";\n\nexport function NoProjectsScreen() {\n  const { state, logout } = useApp();\n\n  const handleLogout = () => {\n    if (confirm(\"Вы уверены, что хотите выйти?\")) {\n      logout();\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 flex items-center justify-center p-4 animate-fade-in\">\n      <div className=\"max-w-2xl w-full\">\n        {/* No Projects Card */}\n        <div className=\"bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-8 lg:p-12 text-center animate-bounce-in\">\n          {/* Logo/Icon */}\n          <div className=\"w-20 h-20 bg-primary-500/20 rounded-full flex items-center justify-center mx-auto mb-6 animate-bounce-in\">\n            <FolderX className=\"w-10 h-10 text-orange-400\" />\n          </div>\n\n          {/* Welcome Message */}\n          <h1 className=\"text-4xl lg:text-5xl text-white mb-4 animate-slide-in-left animate-delay-200\">\n             Добро пожаловать в <span className=\"font-black\">ENCORE</span> <span className=\"text-primary-500 font-medium\">TASKS</span>!\n          </h1>\n          \n          <p className=\"text-xl text-gray-300 mb-2 animate-slide-in-left animate-delay-300\">\n            Привет, {state.currentUser?.name}!\n          </p>\n          \n          <p className=\"text-gray-400 mb-8 leading-relaxed\">\n            Ваш аккаунт активен, но вы пока не добавлены ни в один проект. \n            Обратитесь к администратору или менеджеру проекта, чтобы получить доступ к проектам и задачам.\n          </p>\n\n          {/* Status Steps */}\n          <div className=\"space-y-4 mb-8\">\n            <div className=\"flex items-center gap-4 p-4 bg-white/5 rounded-lg\">\n              <div className=\"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center flex-shrink-0\">\n                <Users className=\"w-5 h-5 text-white\" />\n              </div>\n              <div className=\"text-left\">\n                <p className=\"text-white font-medium\">Аккаунт активен</p>\n                <p className=\"text-gray-400 text-sm\">Ваш профиль подтвержден и готов к работе</p>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-4 p-4 bg-white/5 rounded-lg\">\n              <div className=\"w-8 h-8 bg-primary-500 rounded-full flex items-center justify-center flex-shrink-0\">\n                <Clock className=\"w-5 h-5 text-white\" />\n              </div>\n              <div className=\"text-left\">\n                <p className=\"text-white font-medium\">Ожидание добавления в проект</p>\n                <p className=\"text-gray-400 text-sm\">Администратор должен добавить вас в проект</p>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-4 p-4 bg-white/5 rounded-lg opacity-50\">\n              <div className=\"w-8 h-8 bg-gray-500 rounded-full flex items-center justify-center flex-shrink-0\">\n                <FolderX className=\"w-5 h-5 text-white\" />\n              </div>\n              <div className=\"text-left\">\n                <p className=\"text-white font-medium\">Доступ к проектам</p>\n                <p className=\"text-gray-400 text-sm\">Будет доступен после добавления в проект</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Contact Info */}\n          <div className=\"bg-primary-500/10 border border-primary-500/20 rounded-lg p-6\">\n            <div className=\"flex items-center justify-center gap-2 mb-3\">\n              <Mail className=\"w-5 h-5 text-orange-400\" />\n              <h3 className=\"text-lg font-semibold text-white\">Как получить доступ к проектам?</h3>\n            </div>\n            <p className=\"text-gray-300 text-sm leading-relaxed\">\n              Обратитесь к администратору системы или менеджеру проекта для добавления в команду. \n              После добавления в проект вы получите доступ к задачам и всем функциям платформы.\n            </p>\n          </div>\n\n          {/* User Info */}\n          <div className=\"mt-8 pt-6 border-t border-white/10 flex items-center justify-between\">\n            <p className=\"text-gray-400 text-sm\">\n              Вы вошли как: <span className=\"text-white font-medium\">{state.currentUser?.email}</span>\n            </p>\n            <button\n              onClick={handleLogout}\n              className=\"flex items-center gap-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors\"\n              title=\"Выйти\">\n              <LogOut className=\"w-4 h-4\" />\n              <span className=\"text-sm\">Выйти</span>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAJA;;;;AAMO,SAAS;IACd,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,8HAAA,CAAA,SAAM,AAAD;IAE/B,MAAM,eAAe;QACnB,IAAI,QAAQ,kCAAkC;YAC5C;QACF;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;sBAEb,cAAA,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,4MAAA,CAAA,UAAO;4BAAC,WAAU;;;;;;;;;;;kCAIrB,8OAAC;wBAAG,WAAU;;4BAA+E;0CACvE,8OAAC;gCAAK,WAAU;0CAAa;;;;;;4BAAa;0CAAC,8OAAC;gCAAK,WAAU;0CAA+B;;;;;;4BAAY;;;;;;;kCAG5H,8OAAC;wBAAE,WAAU;;4BAAqE;4BACvE,MAAM,WAAW,EAAE;4BAAK;;;;;;;kCAGnC,8OAAC;wBAAE,WAAU;kCAAqC;;;;;;kCAMlD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC,oMAAA,CAAA,QAAK;4CAAC,WAAU;;;;;;;;;;;kDAEnB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAE,WAAU;0DAAyB;;;;;;0DACtC,8OAAC;gDAAE,WAAU;0DAAwB;;;;;;;;;;;;;;;;;;0CAIzC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC,oMAAA,CAAA,QAAK;4CAAC,WAAU;;;;;;;;;;;kDAEnB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAE,WAAU;0DAAyB;;;;;;0DACtC,8OAAC;gDAAE,WAAU;0DAAwB;;;;;;;;;;;;;;;;;;0CAIzC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC,4MAAA,CAAA,UAAO;4CAAC,WAAU;;;;;;;;;;;kDAErB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAE,WAAU;0DAAyB;;;;;;0DACtC,8OAAC;gDAAE,WAAU;0DAAwB;;;;;;;;;;;;;;;;;;;;;;;;kCAM3C,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,kMAAA,CAAA,OAAI;wCAAC,WAAU;;;;;;kDAChB,8OAAC;wCAAG,WAAU;kDAAmC;;;;;;;;;;;;0CAEnD,8OAAC;gCAAE,WAAU;0CAAwC;;;;;;;;;;;;kCAOvD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAE,WAAU;;oCAAwB;kDACrB,8OAAC;wCAAK,WAAU;kDAA0B,MAAM,WAAW,EAAE;;;;;;;;;;;;0CAE7E,8OAAC;gCACC,SAAS;gCACT,WAAU;gCACV,OAAM;;kDACN,8OAAC,0MAAA,CAAA,SAAM;wCAAC,WAAU;;;;;;kDAClB,8OAAC;wCAAK,WAAU;kDAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOxC","debugId":null}},
    {"offset": {"line": 6714, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/axele/Downloads/encore-tasks/encore-tasks-main/src/components/AdminPanel.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport { useApp } from \"@/contexts/AppContext\";\nimport { User } from \"@/types\";\nimport { Users, Check, X, Clock, Mail, Calendar, Shield, UserPlus, ArrowLeft, Plus, Minus, Briefcase, Crown, UserCheck } from \"lucide-react\";\nimport DeleteConfirmationModal from \"./DeleteConfirmationModal\";\n\ninterface AdminPanelProps {\n  onNavigate?: (page: string) => void;\n}\n\nexport function AdminPanel({ onNavigate }: AdminPanelProps) {\n  const { state, dispatch, updateUser, deleteUser } = useApp();\n  const [selectedTab, setSelectedTab] = useState<'pending' | 'approved'>('pending');\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [userToDelete, setUserToDelete] = useState<User | null>(null);\n  const [deleteAction, setDeleteAction] = useState<'reject' | 'remove'>('reject');\n\n  // Filter users based on approval status\n  const pendingUsers = state.users.filter(user => !user.isApproved && user.role !== 'admin');\n  const approvedUsers = state.users.filter(user => user.isApproved && user.role !== 'admin');\n  const newUserNotifications = state.pendingUserNotifications || [];\n\n  const handleApproveUser = async (userId: string) => {\n    try {\n      const success = await updateUser(userId, { status: 'approved' });\n      if (success) {\n        dispatch({ type: 'APPROVE_USER', payload: userId });\n      } else {\n        console.error('Ошибка одобрения пользователя');\n      }\n    } catch (error) {\n      console.error('Ошибка одобрения пользователя:', error);\n    }\n  };\n\n  const handleRejectUser = (user: User) => {\n    setUserToDelete(user);\n    setDeleteAction('reject');\n    setShowDeleteModal(true);\n  };\n\n  const handleRemoveUserAccess = (user: User) => {\n    setUserToDelete(user);\n    setDeleteAction('remove');\n    setShowDeleteModal(true);\n  };\n\n  const handleConfirmDelete = async () => {\n    if (userToDelete) {\n      try {\n        if (deleteAction === 'reject' || deleteAction === 'remove') {\n          const success = await deleteUser(userToDelete.id);\n          if (!success) {\n            console.error('Ошибка удаления пользователя');\n          }\n        }\n      } catch (error) {\n        console.error('Ошибка удаления пользователя:', error);\n      }\n      setUserToDelete(null);\n    }\n    setShowDeleteModal(false);\n  };\n\n  const handlePromoteToManager = async (userId: string) => {\n    try {\n      const success = await updateUser(userId, { role: 'manager' });\n      if (!success) {\n        console.error('Ошибка назначения менеджера');\n      }\n    } catch (error) {\n      console.error('Ошибка назначения менеджера:', error);\n    }\n  };\n\n  const handleDemoteFromManager = async (userId: string) => {\n    try {\n      const success = await updateUser(userId, { role: 'user' });\n      if (!success) {\n        console.error('Ошибка снятия роли администратора');\n      }\n    } catch (error) {\n      console.error('Ошибка снятия роли менеджера:', error);\n    }\n  };\n\n  const handleAddUserToProject = (userId: string, projectId: string) => {\n    const user = state.users.find(u => u.id === userId);\n    const project = state.projects.find(p => p.id === projectId);\n    \n    if (user && project && !project.members.find(m => m.id === userId)) {\n      const updatedProject = {\n        ...project,\n        members: [...project.members, user]\n      };\n      dispatch({ type: 'UPDATE_PROJECT', payload: updatedProject });\n    }\n  };\n\n  const handleRemoveUserFromProject = (userId: string, projectId: string) => {\n    const project = state.projects.find(p => p.id === projectId);\n    \n    if (project) {\n      const updatedProject = {\n        ...project,\n        members: project.members.filter(m => m.id !== userId)\n      };\n      dispatch({ type: 'UPDATE_PROJECT', payload: updatedProject });\n    }\n  };\n\n  const formatDate = (date: Date) => {\n    return new Intl.DateTimeFormat('ru-RU', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    }).format(date);\n  };\n\n  const UserCard = ({ user, isPending }: { user: User; isPending: boolean }) => {\n    const userProjects = state.projects.filter(p => p.members.some(m => m.id === user.id));\n    const availableProjects = state.projects.filter(p => !p.members.some(m => m.id === user.id));\n    \n    return (\n      <div className=\"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-6 hover:bg-white/10 transition-all duration-200\">\n        <div className=\"flex items-start justify-between\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-12 h-12 bg-primary-500/20 rounded-full flex items-center justify-center\">\n              <Users className=\"w-6 h-6 text-primary-400\" />\n            </div>\n            <div>\n              <h3 className=\"text-lg font-semibold text-white\">{user.name}</h3>\n              <div className=\"flex items-center gap-2 text-gray-400 text-sm mt-1\">\n                <Mail className=\"w-4 h-4\" />\n                <span>{user.email}</span>\n              </div>\n              <div className=\"flex items-center gap-2 text-gray-400 text-sm mt-1\">\n                <Calendar className=\"w-4 h-4\" />\n                <span>Регистрация: {formatDate(new Date(user.createdAt))}</span>\n              </div>\n              <div className=\"flex items-center gap-2 text-gray-400 text-sm mt-1\">\n                <Shield className=\"w-4 h-4\" />\n                <span>Роль: {user.role === 'manager' ? 'Менеджер' : 'Пользователь'}</span>\n              </div>\n              {!isPending && userProjects.length > 0 && (\n                <div className=\"flex items-center gap-2 text-gray-400 text-sm mt-1\">\n                  <Briefcase className=\"w-4 h-4\" />\n                  <span>Проекты: {userProjects.map(p => p.name).join(', ')}</span>\n                </div>\n              )}\n            </div>\n          </div>\n          \n          <div className=\"flex items-center gap-2\">\n            {isPending ? (\n              <>\n                <div className=\"flex items-center gap-1 px-3 py-1 bg-primary-500/20 text-primary-400 rounded-full text-sm\">\n                  <Clock className=\"w-4 h-4\" />\n                  <span>Ожидает</span>\n                </div>\n                <button\n                  onClick={() => handleApproveUser(user.id)}\n                  className=\"p-2 bg-primary-600/20 hover:bg-primary-600/30 text-primary-400 rounded-lg transition-colors\"\n                  title=\"Одобрить пользователя\"\n                >\n                  <Check className=\"w-5 h-5\" />\n                </button>\n                <button\n                  onClick={() => handleRejectUser(user)}\n                  className=\"p-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg transition-colors\"\n                  title=\"Отклонить пользователя\"\n                >\n                  <X className=\"w-5 h-5\" />\n                </button>\n              </>\n            ) : (\n              <>\n                <div className=\"flex items-center gap-1 px-3 py-1 bg-primary-600/20 text-primary-400 rounded-full text-sm\">\n                  <Check className=\"w-4 h-4\" />\n                  <span>Одобрен</span>\n                </div>\n                {/* Manager role controls - only for admins */}\n                {state.currentUser?.role === 'admin' && (\n                  <>\n                    {user.role === 'user' ? (\n                      <button\n                        onClick={() => handlePromoteToManager(user.id)}\n                        className=\"p-2 bg-purple-500/20 hover:bg-purple-500/30 text-purple-400 rounded-lg transition-colors\"\n                        title=\"Назначить менеджером\"\n                      >\n                        <Crown className=\"w-5 h-5\" />\n                      </button>\n                    ) : user.role === 'manager' ? (\n                      <button\n                        onClick={() => handleDemoteFromManager(user.id)}\n                        className=\"p-2 bg-gray-500/20 hover:bg-gray-500/30 text-gray-400 rounded-lg transition-colors\"\n                        title=\"Убрать роль менеджера\"\n                      >\n                        <UserCheck className=\"w-5 h-5\" />\n                      </button>\n                    ) : null}\n                  </>\n                )}\n                <button\n                  onClick={() => handleRemoveUserAccess(user)}\n                  className=\"p-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg transition-colors\"\n                  title=\"Удалить доступ пользователя\"\n                >\n                  <X className=\"w-5 h-5\" />\n                </button>\n              </>\n            )}\n          </div>\n        </div>\n        \n        {/* Project Management for Approved Users */}\n        {!isPending && (\n          <div className=\"mt-4 pt-4 border-t border-white/10\">\n            <h4 className=\"text-sm font-medium text-white mb-3\">Управление проектами</h4>\n            \n            {/* Current Projects */}\n            {userProjects.length > 0 && (\n              <div className=\"mb-3\">\n                <p className=\"text-xs text-gray-400 mb-2\">Участвует в проектах:</p>\n                <div className=\"flex flex-wrap gap-2\">\n                  {userProjects.map(project => (\n                    <div key={project.id} className=\"flex items-center gap-2 px-3 py-1 bg-primary-500/20 text-primary-300 rounded-full text-sm\">\n                      <div className=\"w-2 h-2 rounded-full\" style={{ backgroundColor: project.color }}></div>\n                      <span>{project.name}</span>\n                      <button\n                        onClick={() => handleRemoveUserFromProject(user.id, project.id)}\n                        className=\"hover:text-red-400 transition-colors\"\n                        title=\"Удалить из проекта\"\n                      >\n                        <Minus className=\"w-3 h-3\" />\n                      </button>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n            \n            {/* Available Projects */}\n            {availableProjects.length > 0 && (\n              <div>\n                <p className=\"text-xs text-gray-400 mb-2\">Добавить в проект:</p>\n                <div className=\"flex flex-wrap gap-2\">\n                  {availableProjects.map(project => (\n                    <button\n                      key={project.id}\n                      onClick={() => handleAddUserToProject(user.id, project.id)}\n                      className=\"flex items-center gap-2 px-3 py-1 bg-gray-500/20 hover:bg-primary-600/20 text-gray-300 hover:text-primary-300 rounded-full text-sm transition-colors\"\n                      title=\"Добавить в проект\"\n                    >\n                      <div className=\"w-2 h-2 rounded-full\" style={{ backgroundColor: project.color }}></div>\n                      <span>{project.name}</span>\n                      <Plus className=\"w-3 h-3\" />\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n            \n            {availableProjects.length === 0 && userProjects.length === state.projects.length && (\n              <p className=\"text-xs text-gray-500\">Пользователь участвует во всех доступных проектах</p>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-6 animate-fade-in\">\n      <div className=\"max-w-6xl mx-auto\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-12 h-12 bg-primary-500/20 rounded-xl flex items-center justify-center\">\n                <Shield className=\"w-6 h-6 text-primary-400\" />\n              </div>\n              <div>\n                <h1 className=\"text-3xl font-bold text-white flex items-center gap-3 animate-slide-in-left\">\n                  Панель администратора\n                  {newUserNotifications.length > 0 && (\n                    <span className=\"px-3 py-1 bg-primary-700 text-white text-sm rounded-full animate-pulse\">\n                      {newUserNotifications.length} новых\n                    </span>\n                  )}\n                </h1>\n                <p className=\"text-gray-400\">Управление пользователями и доступом</p>\n                {newUserNotifications.length > 0 && (\n                  <div className=\"mt-3 p-3 bg-primary-500/20 border border-primary-500/30 rounded-lg\">\n                    <p className=\"text-gray-300 text-sm\">\n                      📢 У вас {newUserNotifications.length} новых заявок на регистрацию, ожидающих подтверждения\n                    </p>\n                  </div>\n                )}\n              </div>\n            </div>\n            {onNavigate && (\n              <button\n                onClick={() => onNavigate('boards')}\n                className=\"flex items-center gap-2 px-4 py-2 bg-white/5 hover:bg-white/10 text-gray-400 hover:text-white rounded-lg transition-colors\"\n                title=\"Вернуться к доскам\"\n              >\n                <ArrowLeft className=\"w-5 h-5\" />\n                <span>Назад к доскам</span>\n              </button>\n            )}\n          </div>\n        </div>\n\n        {/* Stats */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n          <div className=\"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-6\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"w-12 h-12 bg-primary-500/20 rounded-xl flex items-center justify-center\">\n                <Clock className=\"w-6 h-6 text-yellow-400\" />\n              </div>\n              <div>\n                <p className=\"text-2xl font-bold text-white\">{pendingUsers.length}</p>\n                <p className=\"text-gray-400\">Ожидают подтверждения</p>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-6\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"w-12 h-12 bg-primary-600/20 rounded-xl flex items-center justify-center\">\n                <Check className=\"w-6 h-6 text-green-400\" />\n              </div>\n              <div>\n                <p className=\"text-2xl font-bold text-white\">{approvedUsers.length}</p>\n                <p className=\"text-gray-400\">Одобренные пользователи</p>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-6\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"w-12 h-12 bg-primary-400/20 rounded-xl flex items-center justify-center\">\n                <Users className=\"w-6 h-6 text-gray-400\" />\n              </div>\n              <div>\n                <p className=\"text-2xl font-bold text-white\">{state.users.filter(u => u.role !== 'admin').length}</p>\n                <p className=\"text-gray-400\">Всего пользователей</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Tabs */}\n        <div className=\"flex gap-4 mb-6\">\n          <button\n            onClick={() => setSelectedTab('pending')}\n            className={`px-6 py-3 rounded-lg font-medium transition-all duration-200 ${\n              selectedTab === 'pending'\n                ? 'bg-primary-500 text-white'\n                : 'bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white'\n            }`}\n          >\n            <div className=\"flex items-center gap-2\">\n              <Clock className=\"w-5 h-5\" />\n              <span>Ожидают подтверждения ({pendingUsers.length})</span>\n            </div>\n          </button>\n          \n          <button\n            onClick={() => setSelectedTab('approved')}\n            className={`px-6 py-3 rounded-lg font-medium transition-all duration-200 ${\n              selectedTab === 'approved'\n                ? 'bg-primary-500 text-white'\n                : 'bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white'\n            }`}\n          >\n            <div className=\"flex items-center gap-2\">\n              <Check className=\"w-5 h-5\" />\n              <span>Одобренные ({approvedUsers.length})</span>\n            </div>\n          </button>\n        </div>\n\n        {/* User List */}\n        <div className=\"space-y-4\">\n          {selectedTab === 'pending' ? (\n            pendingUsers.length > 0 ? (\n              pendingUsers.map(user => (\n                <UserCard key={user.id} user={user} isPending={true} />\n              ))\n            ) : (\n              <div className=\"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-12 text-center\">\n                <UserPlus className=\"w-16 h-16 text-gray-500 mx-auto mb-4\" />\n                <h3 className=\"text-xl font-semibold text-white mb-2\">Нет пользователей на рассмотрении</h3>\n                <p className=\"text-gray-400\">Все новые пользователи будут отображаться здесь для подтверждения.</p>\n              </div>\n            )\n          ) : (\n            approvedUsers.length > 0 ? (\n              approvedUsers.map(user => (\n                <UserCard key={user.id} user={user} isPending={false} />\n              ))\n            ) : (\n              <div className=\"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-12 text-center\">\n                <Users className=\"w-16 h-16 text-gray-500 mx-auto mb-4\" />\n                <h3 className=\"text-xl font-semibold text-white mb-2\">Нет одобренных пользователей</h3>\n                <p className=\"text-gray-400\">Одобренные пользователи будут отображаться здесь.</p>\n              </div>\n            )\n          )}\n        </div>\n      </div>\n      \n      <DeleteConfirmationModal\n        isOpen={showDeleteModal}\n        onClose={() => setShowDeleteModal(false)}\n        onConfirm={handleConfirmDelete}\n        title={deleteAction === 'reject' ? 'Отклонить пользователя' : 'Удалить доступ пользователя'}\n        message={deleteAction === 'reject' \n          ? `Вы уверены, что хотите отклонить пользователя \"${userToDelete?.name}\"? Это действие нельзя отменить.`\n          : `Вы уверены, что хотите удалить доступ пользователя \"${userToDelete?.name}\"? Пользователь будет удален из всех проектов.`\n        }\n      />\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7799, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/axele/Downloads/encore-tasks/encore-tasks-main/src/components/Layout.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { useApp } from \"@/contexts/AppContext\";\nimport { Sidebar } from \"./Sidebar\";\nimport { TopBar } from \"./TopBar\";\nimport { HomePage } from \"./pages/HomePage\";\nimport { CalendarPage } from \"./pages/CalendarPage\";\nimport { TeamPage } from \"./pages/TeamPage\";\nimport { NotificationsPage } from \"./pages/NotificationsPage\";\nimport { SettingsPage } from \"./pages/SettingsPage\";\nimport { KanbanBoard } from \"./KanbanBoard\";\nimport { AuthModal } from \"./AuthModal\";\nimport { WelcomeScreen } from \"./WelcomeScreen\";\nimport { NoProjectsScreen } from \"./NoProjectsScreen\";\nimport { AdminPanel } from \"./AdminPanel\";\nimport { cn } from \"@/lib/utils\";\n\ninterface LayoutProps {\n  children?: React.ReactNode;\n}\n\nexport function Layout({ children }: LayoutProps) {\n  const { state, dispatch, loadProjects, loadUsers } = useApp();\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\n  const [currentPage, setCurrentPage] = useState(\"boards\");\n  const [isAuthModalOpen, setIsAuthModalOpen] = useState(\n    !state.isAuthenticated\n  );\n\n  const handleNavigate = (page: string) => {\n    setCurrentPage(page);\n    \n    // Mark all notifications as read when navigating to notifications page\n    if (page === \"notifications\") {\n      dispatch({ type: \"MARK_ALL_NOTIFICATIONS_READ\" });\n    }\n  };\n\n  // Apply theme settings\n  useEffect(() => {\n    const theme = state.settings?.theme || 'dark';\n    const root = document.documentElement;\n    \n    if (theme === 'light') {\n      root.classList.add('light');\n      root.classList.remove('dark');\n    } else if (theme === 'dark') {\n      root.classList.add('dark');\n      root.classList.remove('light');\n    } else if (theme === 'auto') {\n      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n      if (prefersDark) {\n        root.classList.add('dark');\n        root.classList.remove('light');\n      } else {\n        root.classList.add('light');\n        root.classList.remove('dark');\n      }\n    }\n  }, [state.settings?.theme]);\n\n  // Apply language settings\n  useEffect(() => {\n    const language = state.settings?.language || 'ru';\n    document.documentElement.lang = language;\n  }, [state.settings?.language]);\n\n  // Load initial data when authenticated\n  useEffect(() => {\n    if (state.isAuthenticated && state.currentUser) {\n      loadProjects();\n      loadUsers();\n    }\n  }, [state.isAuthenticated]);\n\n  // Listen for navigation events from calendar\n  useEffect(() => {\n    const handleNavigateToBoards = () => {\n      handleNavigate(\"boards\");\n    };\n\n    window.addEventListener(\"navigate-to-boards\", handleNavigateToBoards);\n    return () => {\n      window.removeEventListener(\"navigate-to-boards\", handleNavigateToBoards);\n    };\n  }, [handleNavigate]);\n\n  // Show auth modal if not authenticated\n  if (!state.isAuthenticated) {\n    return (\n      <AuthModal\n        isOpen={true}\n        onClose={() => setIsAuthModalOpen(false)}\n        data-oid=\"auth-modal\" />);\n  }\n\n  // Show welcome screen for unapproved users\n  if (state.currentUser && !state.currentUser.isApproved && state.currentUser.role === 'user') {\n    return <WelcomeScreen />;\n  }\n\n  // Show no projects screen for approved users without projects\n  if (state.currentUser && state.currentUser.isApproved && state.currentUser.role === 'user') {\n    const userProjects = state.projects.filter(project => \n      project.members.some(member => member.id === state.currentUser?.id)\n    );\n    if (userProjects.length === 0) {\n      return <NoProjectsScreen />;\n    }\n  }\n\n  // Show admin panel for admin users\n  if (state.currentUser && state.currentUser.role === 'admin' && currentPage === 'admin') {\n    return <AdminPanel onNavigate={handleNavigate} />;\n  }\n\n  const renderPage = () => {\n    switch (currentPage) {\n      case \"home\":\n        return <HomePage onNavigate={handleNavigate} data-oid=\"hvlzykk\" />;\n      case \"calendar\":\n        return <CalendarPage data-oid=\"37_ovjc\" />;\n      case \"team\":\n        return <TeamPage data-oid=\"bknzp_w\" />;\n      case \"notifications\":\n        return <NotificationsPage data-oid=\"69l3ox-\" />;\n      case \"settings\":\n        return <SettingsPage data-oid=\"7klkex1\" />;\n      case \"boards\":\n      default:\n        return children || <KanbanBoard data-oid=\"z.s0h3k\" />;\n    }\n  };\n\n  return (\n    <div\n      className={cn(\n        \"app-container h-screen flex flex-col lg:flex-row overflow-hidden animate-fade-in\",\n        state.settings?.compactMode && \"compact-mode\",\n        state.settings?.theme === 'light' && \"light-theme\"\n      )}\n      data-oid=\"gcj74jv\">\n\n      {/* Sidebar */}\n      <div\n        className={`${\n        sidebarCollapsed ? \"hidden lg:block lg:w-16\" : \"fixed lg:relative inset-y-0 left-0 z-50 w-80 lg:w-80\"} transition-all duration-300 flex-shrink-0 sidebar-enter`\n        }\n        data-oid=\"-t-odoy\">\n\n        <Sidebar\n          isCollapsed={sidebarCollapsed}\n          onToggle={() => setSidebarCollapsed(!sidebarCollapsed)}\n          onNavigate={handleNavigate}\n          currentPage={currentPage}\n          data-oid=\"bnxtoq_\" />\n\n      </div>\n\n      {/* Overlay for mobile sidebar */}\n      {!sidebarCollapsed && (\n        <div\n          className=\"fixed inset-0 bg-black/50 z-40 lg:hidden\"\n          onClick={() => setSidebarCollapsed(true)}\n        />\n      )}\n\n      {/* Main content */}\n      <div className=\"flex-1 flex flex-col min-h-0 animate-slide-in-right\" data-oid=\"169v9vc\">\n        <TopBar\n          onToggleSidebar={() => setSidebarCollapsed(!sidebarCollapsed)}\n          sidebarCollapsed={sidebarCollapsed}\n          onNavigate={handleNavigate}\n          currentPage={currentPage} />\n\n        <main className=\"flex-1 overflow-auto page-enter\" data-oid=\"v:znibt\">\n          {renderPage()}\n        </main>\n      </div>\n\n      {/* Background effects */}\n      <div className=\"background-effects\" data-oid=\"13h43gs\">\n        <div className=\"bg-effect-1\" data-oid=\"l.60xyu\"></div>\n        <div className=\"bg-effect-2\" data-oid=\"x0h_vrf\"></div>\n      </div>\n    </div>);\n\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 8094, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/axele/Downloads/encore-tasks/encore-tasks-main/src/components/notifications/NotificationSystem.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useState, useCallback, useEffect } from 'react';\nimport { X, CheckCircle, AlertCircle, Info, AlertTriangle } from 'lucide-react';\n\ntype NotificationType = 'success' | 'error' | 'warning' | 'info';\n\ninterface Notification {\n  id: string;\n  type: NotificationType;\n  title: string;\n  message?: string;\n  duration?: number;\n  actions?: {\n    label: string;\n    onClick: () => void;\n    variant?: 'primary' | 'secondary';\n  }[];\n}\n\ninterface NotificationContextType {\n  showNotification: (notification: Omit<Notification, 'id'>) => void;\n  hideNotification: (id: string) => void;\n  clearAll: () => void;\n}\n\nconst NotificationContext = createContext<NotificationContextType | undefined>(undefined);\n\nexport const useNotification = () => {\n  const context = useContext(NotificationContext);\n  if (!context) {\n    throw new Error('useNotification must be used within a NotificationProvider');\n  }\n  return context;\n};\n\ninterface NotificationItemProps {\n  notification: Notification;\n  onClose: (id: string) => void;\n}\n\nconst NotificationItem: React.FC<NotificationItemProps> = ({ notification, onClose }) => {\n  const [isVisible, setIsVisible] = useState(false);\n  const [isLeaving, setIsLeaving] = useState(false);\n\n  useEffect(() => {\n    // Анимация появления\n    const timer = setTimeout(() => setIsVisible(true), 50);\n    return () => clearTimeout(timer);\n  }, []);\n\n  useEffect(() => {\n    // Автоматическое скрытие\n    if (notification.duration && notification.duration > 0) {\n      const timer = setTimeout(() => {\n        handleClose();\n      }, notification.duration);\n      return () => clearTimeout(timer);\n    }\n  }, [notification.duration]);\n\n  const handleClose = () => {\n    setIsLeaving(true);\n    setTimeout(() => {\n      onClose(notification.id);\n    }, 300);\n  };\n\n  const getIcon = () => {\n    switch (notification.type) {\n      case 'success':\n        return <CheckCircle className=\"w-5 h-5 text-green-400\" />;\n      case 'error':\n        return <AlertCircle className=\"w-5 h-5 text-red-400\" />;\n      case 'warning':\n        return <AlertTriangle className=\"w-5 h-5 text-yellow-400\" />;\n      case 'info':\n        return <Info className=\"w-5 h-5 text-blue-400\" />;\n    }\n  };\n\n  const getBorderColor = () => {\n    switch (notification.type) {\n      case 'success':\n        return 'border-l-green-500';\n      case 'error':\n        return 'border-l-red-500';\n      case 'warning':\n        return 'border-l-yellow-500';\n      case 'info':\n        return 'border-l-blue-500';\n    }\n  };\n\n  return (\n    <div\n      className={`\n        transform transition-all duration-300 ease-in-out\n        ${isVisible && !isLeaving ? 'translate-x-0 opacity-100' : 'translate-x-full opacity-0'}\n        bg-gray-800 border-l-4 ${getBorderColor()} rounded-lg shadow-lg p-4 mb-3 max-w-sm w-full\n      `}\n    >\n      <div className=\"flex items-start space-x-3\">\n        <div className=\"flex-shrink-0\">\n          {getIcon()}\n        </div>\n        <div className=\"flex-1 min-w-0\">\n          <h4 className=\"text-sm font-medium text-white\">\n            {notification.title}\n          </h4>\n          {notification.message && (\n            <p className=\"mt-1 text-sm text-gray-300\">\n              {notification.message}\n            </p>\n          )}\n          {notification.actions && notification.actions.length > 0 && (\n            <div className=\"mt-3 flex space-x-2\">\n              {notification.actions.map((action, index) => (\n                <button\n                  key={index}\n                  onClick={action.onClick}\n                  className={`\n                    px-3 py-1 text-xs font-medium rounded-lg transition-all duration-200\n                    ${action.variant === 'primary'\n                      ? 'bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-blue-700/25'\n                      : 'bg-gray-700/50 hover:bg-gray-600/50 text-gray-300 backdrop-blur-sm border border-gray-600/30'\n                    }\n                  `}\n                >\n                  {action.label}\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n        <button\n          onClick={handleClose}\n          className=\"flex-shrink-0 text-gray-400 hover:text-white transition-colors\"\n        >\n          <X className=\"w-4 h-4\" />\n        </button>\n      </div>\n    </div>\n  );\n};\n\ninterface NotificationContainerProps {\n  notifications: Notification[];\n  onClose: (id: string) => void;\n}\n\nconst NotificationContainer: React.FC<NotificationContainerProps> = ({ notifications, onClose }) => {\n  if (notifications.length === 0) return null;\n\n  return (\n    <div className=\"fixed top-4 right-4 z-50 space-y-2\">\n      {notifications.map((notification) => (\n        <NotificationItem\n          key={notification.id}\n          notification={notification}\n          onClose={onClose}\n        />\n      ))}\n    </div>\n  );\n};\n\ninterface NotificationProviderProps {\n  children: React.ReactNode;\n}\n\nexport const NotificationProvider: React.FC<NotificationProviderProps> = ({ children }) => {\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n\n  const showNotification = useCallback((notificationData: Omit<Notification, 'id'>) => {\n    const id = Math.random().toString(36).substr(2, 9);\n    const notification: Notification = {\n      ...notificationData,\n      id,\n      duration: notificationData.duration ?? 5000, // По умолчанию 5 секунд\n    };\n\n    setNotifications(prev => [...prev, notification]);\n  }, []);\n\n  const hideNotification = useCallback((id: string) => {\n    setNotifications(prev => prev.filter(notification => notification.id !== id));\n  }, []);\n\n  const clearAll = useCallback(() => {\n    setNotifications([]);\n  }, []);\n\n  return (\n    <NotificationContext.Provider value={{ showNotification, hideNotification, clearAll }}>\n      {children}\n      <NotificationContainer notifications={notifications} onClose={hideNotification} />\n    </NotificationContext.Provider>\n  );\n};\n\n// Хук для замены alert()\nexport const useAlert = () => {\n  const { showNotification } = useNotification();\n\n  return useCallback((message: string, type: NotificationType = 'info') => {\n    showNotification({\n      type,\n      title: message,\n      duration: 4000\n    });\n  }, [showNotification]);\n};\n\n// Хук для confirm диалогов\nexport const useConfirm = () => {\n  const { showNotification } = useNotification();\n\n  return useCallback((message: string, onConfirm: () => void, onCancel?: () => void) => {\n    showNotification({\n      type: 'warning',\n      title: 'Подтверждение',\n      message,\n      duration: 0, // Не скрывать автоматически\n      actions: [\n        {\n          label: 'Подтвердить',\n          onClick: onConfirm,\n          variant: 'primary'\n        },\n        {\n          label: 'Отмена',\n          onClick: onCancel || (() => {}),\n          variant: 'secondary'\n        }\n      ]\n    });\n  }, [showNotification]);\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 8384, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/axele/Downloads/encore-tasks/encore-tasks-main/src/components/notifications/index.ts"],"sourcesContent":["export { NotificationProvider, useNotification, useAlert, useConfirm } from './NotificationSystem';"],"names":[],"mappings":";AAAA","debugId":null}}]
}