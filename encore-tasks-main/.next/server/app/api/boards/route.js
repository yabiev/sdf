/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/boards/route";
exports.ids = ["app/api/boards/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fboards%2Froute&page=%2Fapi%2Fboards%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fboards%2Froute.ts&appDir=E%3A%5CProjects%5Cencore-tasks%5Cencore-tasks-main%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CProjects%5Cencore-tasks%5Cencore-tasks-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fboards%2Froute&page=%2Fapi%2Fboards%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fboards%2Froute.ts&appDir=E%3A%5CProjects%5Cencore-tasks%5Cencore-tasks-main%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CProjects%5Cencore-tasks%5Cencore-tasks-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var E_Projects_encore_tasks_encore_tasks_main_src_app_api_boards_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/boards/route.ts */ \"(rsc)/./src/app/api/boards/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([E_Projects_encore_tasks_encore_tasks_main_src_app_api_boards_route_ts__WEBPACK_IMPORTED_MODULE_3__]);\nE_Projects_encore_tasks_encore_tasks_main_src_app_api_boards_route_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/boards/route\",\n        pathname: \"/api/boards\",\n        filename: \"route\",\n        bundlePath: \"app/api/boards/route\"\n    },\n    resolvedPagePath: \"E:\\\\Projects\\\\encore-tasks\\\\encore-tasks-main\\\\src\\\\app\\\\api\\\\boards\\\\route.ts\",\n    nextConfigOutput,\n    userland: E_Projects_encore_tasks_encore_tasks_main_src_app_api_boards_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZib2FyZHMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmJvYXJkcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmJvYXJkcyUyRnJvdXRlLnRzJmFwcERpcj1FJTNBJTVDUHJvamVjdHMlNUNlbmNvcmUtdGFza3MlNUNlbmNvcmUtdGFza3MtbWFpbiU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9RSUzQSU1Q1Byb2plY3RzJTVDZW5jb3JlLXRhc2tzJTVDZW5jb3JlLXRhc2tzLW1haW4maXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQzhCO0FBQzNHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRixxQyIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJFOlxcXFxQcm9qZWN0c1xcXFxlbmNvcmUtdGFza3NcXFxcZW5jb3JlLXRhc2tzLW1haW5cXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcYm9hcmRzXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9ib2FyZHMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9ib2FyZHNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2JvYXJkcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkU6XFxcXFByb2plY3RzXFxcXGVuY29yZS10YXNrc1xcXFxlbmNvcmUtdGFza3MtbWFpblxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxib2FyZHNcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fboards%2Froute&page=%2Fapi%2Fboards%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fboards%2Froute.ts&appDir=E%3A%5CProjects%5Cencore-tasks%5Cencore-tasks-main%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CProjects%5Cencore-tasks%5Cencore-tasks-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/boards/route.ts":
/*!*************************************!*\
  !*** ./src/app/api/boards/route.ts ***!
  \*************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/schemas.js\");\n/* harmony import */ var _lib_database_adapter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/database-adapter */ \"(rsc)/./src/lib/database-adapter.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_database_adapter__WEBPACK_IMPORTED_MODULE_1__, _lib_auth__WEBPACK_IMPORTED_MODULE_2__]);\n([_lib_database_adapter__WEBPACK_IMPORTED_MODULE_1__, _lib_auth__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst databaseAdapter = _lib_database_adapter__WEBPACK_IMPORTED_MODULE_1__.DatabaseAdapter.getInstance();\n\n// Ð¡Ñ…ÐµÐ¼Ð° Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ð¸ Ð´Ð»Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð´Ð¾ÑÐºÐ¸\nconst createBoardSchema = zod__WEBPACK_IMPORTED_MODULE_3__.object({\n    name: zod__WEBPACK_IMPORTED_MODULE_3__.string().min(1, 'ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð´Ð¾ÑÐºÐ¸ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾').max(100, 'ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð´Ð»Ð¸Ð½Ð½Ð¾Ðµ'),\n    description: zod__WEBPACK_IMPORTED_MODULE_3__.string().max(500, 'ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð´Ð»Ð¸Ð½Ð½Ð¾Ðµ').optional(),\n    project_id: zod__WEBPACK_IMPORTED_MODULE_3__.union([\n        zod__WEBPACK_IMPORTED_MODULE_3__.string().min(1, 'ID Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÐµÐ½'),\n        zod__WEBPACK_IMPORTED_MODULE_3__.number().int().positive('ID Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð¿Ð¾Ð»Ð¾Ð¶Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼ Ñ‡Ð¸ÑÐ»Ð¾Ð¼')\n    ]).transform((val)=>String(val)),\n    color: zod__WEBPACK_IMPORTED_MODULE_3__.string().regex(/^#[0-9A-F]{6}$/i, 'ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ Ñ†Ð²ÐµÑ‚Ð°').optional(),\n    icon: zod__WEBPACK_IMPORTED_MODULE_3__.string().min(1, 'Ð˜ÐºÐ¾Ð½ÐºÐ° Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð°').optional(),\n    visibility: zod__WEBPACK_IMPORTED_MODULE_3__[\"enum\"]([\n        'private',\n        'public'\n    ]).default('private'),\n    settings: zod__WEBPACK_IMPORTED_MODULE_3__.record(zod__WEBPACK_IMPORTED_MODULE_3__.string(), zod__WEBPACK_IMPORTED_MODULE_3__.any()).optional()\n});\nasync function checkProjectAccess(projectId, userId) {\n    try {\n        console.log('ðŸ” Checking project access:', {\n            projectId,\n            userId\n        });\n        // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÑƒÑ‰ÐµÑÑ‚Ð²Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\n        const project = await databaseAdapter.getProjectById(projectId);\n        console.log('ðŸ“‹ Project found:', project);\n        if (!project) {\n            console.log('âŒ Project not found');\n            return false;\n        }\n        // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÐµÐ¼ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\n        console.log('ðŸ‘¤ Checking if user is creator:', {\n            created_by: project.created_by,\n            userId\n        });\n        if (project.created_by === userId) {\n            console.log('âœ… User is project creator');\n            return true;\n        }\n        // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð¼ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\n        const query = `\n      SELECT EXISTS(\n        SELECT 1 FROM project_members \n        WHERE project_id = ? AND user_id = ?\n      ) as has_access\n    `;\n        console.log('ðŸ” Checking project membership with query:', query);\n        console.log('ðŸ” Query params:', [\n            projectId,\n            userId\n        ]);\n        const result = await databaseAdapter.query(query, [\n            projectId,\n            userId\n        ]);\n        console.log('ðŸ“Š Membership query result:', result);\n        const hasAccess = result[0]?.has_access === 1;\n        console.log('âœ… Final access result:', hasAccess);\n        return hasAccess;\n    } catch (error) {\n        console.error('Error checking project access:', error);\n        return false;\n    }\n}\n// GET /api/boards - ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð´Ð¾ÑÐºÐ¸\nasync function GET(request) {\n    try {\n        const authResult = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.verifyAuth)(request);\n        if (!authResult.success || !authResult.user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'Unauthorized'\n            }, {\n                status: 401\n            });\n        }\n        await databaseAdapter.initialize();\n        const { searchParams } = new URL(request.url);\n        // ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°\n        const projectId = searchParams.get('project_id');\n        const page = parseInt(searchParams.get('page') || '1');\n        const limit = Math.min(parseInt(searchParams.get('limit') || '20'), 100);\n        const search = searchParams.get('search');\n        const visibility = searchParams.get('visibility');\n        const sortBy = searchParams.get('sort_by') || 'created_at';\n        const sortOrder = searchParams.get('sort_order') || 'desc';\n        const offset = (page - 1) * limit;\n        let boards = [];\n        if (projectId) {\n            // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº Ð¿Ñ€Ð¾ÐµÐºÑ‚Ñƒ\n            const hasAccess = await checkProjectAccess(projectId, authResult.user.userId);\n            if (!hasAccess) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    error: 'Project not found or access denied'\n                }, {\n                    status: 404\n                });\n            }\n            // ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð´Ð¾ÑÐºÐ¸ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð³Ð¾ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\n            boards = await databaseAdapter.getProjectBoards(projectId);\n        } else {\n            // ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ñ‹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð¸ Ð¸Ñ… Ð´Ð¾ÑÐºÐ¸\n            const userProjects = await databaseAdapter.getUserProjects(authResult.user.userId);\n            const allBoards = await Promise.all(userProjects.map((project)=>databaseAdapter.getProjectBoards(project.id)));\n            boards = allBoards.flat();\n        }\n        // ÐŸÑ€Ð¸Ð¼ÐµÐ½ÑÐµÐ¼ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹\n        let filteredBoards = boards;\n        if (search) {\n            const searchLower = search.toLowerCase();\n            filteredBoards = filteredBoards.filter((board)=>board.name.toLowerCase().includes(searchLower) || board.description && board.description.toLowerCase().includes(searchLower));\n        }\n        // Ð¡Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²ÐºÐ°\n        const allowedSortFields = [\n            'name',\n            'created_at',\n            'updated_at'\n        ];\n        const validSortBy = allowedSortFields.includes(sortBy) ? sortBy : 'created_at';\n        const validSortOrder = [\n            'asc',\n            'desc'\n        ].includes(sortOrder.toLowerCase()) ? sortOrder.toLowerCase() : 'desc';\n        filteredBoards.sort((a, b)=>{\n            const aValue = a[validSortBy];\n            const bValue = b[validSortBy];\n            if (validSortOrder === 'asc') {\n                return aValue > bValue ? 1 : -1;\n            } else {\n                return aValue < bValue ? 1 : -1;\n            }\n        });\n        // ÐŸÐ°Ð³Ð¸Ð½Ð°Ñ†Ð¸Ñ\n        const total = filteredBoards.length;\n        const paginatedBoards = filteredBoards.slice(offset, offset + limit);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: {\n                boards: paginatedBoards,\n                pagination: {\n                    page,\n                    limit,\n                    total,\n                    totalPages: Math.ceil(total / limit)\n                }\n            }\n        });\n    } catch (error) {\n        console.error('Error fetching boards:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: 'Internal server error'\n        }, {\n            status: 500\n        });\n    }\n}\n// POST /api/boards - Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð´Ð¾ÑÐºÑƒ\nasync function POST(request) {\n    try {\n        const authResult = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.verifyAuth)(request);\n        if (!authResult.success || !authResult.user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'Unauthorized'\n            }, {\n                status: 401\n            });\n        }\n        await databaseAdapter.initialize();\n        const body = await request.json();\n        console.log('ðŸ“‹ Board creation request body:', JSON.stringify(body, null, 2));\n        const validationResult = createBoardSchema.safeParse(body);\n        console.log('ðŸ“‹ Validation result:', validationResult);\n        if (!validationResult.success) {\n            console.log('âŒ Validation failed:', validationResult.error.issues);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'Validation failed',\n                details: validationResult.error.issues\n            }, {\n                status: 400\n            });\n        }\n        const boardData = validationResult.data;\n        // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº Ð¿Ñ€Ð¾ÐµÐºÑ‚Ñƒ\n        const hasAccess = await checkProjectAccess(boardData.project_id, authResult.user.userId);\n        if (!hasAccess) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'Access denied: Project not found or insufficient permissions'\n            }, {\n                status: 403\n            });\n        }\n        // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÑƒÑ‰ÐµÑÑ‚Ð²Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\n        const project = await databaseAdapter.getProjectById(boardData.project_id);\n        if (!project) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'Project not found'\n            }, {\n                status: 404\n            });\n        }\n        try {\n            // Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ created_by Ðº Ð´Ð°Ð½Ð½Ñ‹Ð¼ Ð´Ð¾ÑÐºÐ¸\n            const boardDataWithCreator = {\n                ...boardData,\n                created_by: authResult.user.userId\n            };\n            // Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð´Ð¾ÑÐºÑƒ\n            const newBoard = await databaseAdapter.createBoard(boardDataWithCreator);\n            // Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ ÐºÐ¾Ð»Ð¾Ð½ÐºÐ¸ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ\n            const defaultColumns = [\n                {\n                    name: 'Ðš Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸ÑŽ',\n                    color: '#EF4444',\n                    position: 0\n                },\n                {\n                    name: 'Ð’ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ',\n                    color: '#F59E0B',\n                    position: 1\n                },\n                {\n                    name: 'ÐÐ° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐµ',\n                    color: '#3B82F6',\n                    position: 2\n                },\n                {\n                    name: 'Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¾',\n                    color: '#10B981',\n                    position: 3\n                }\n            ];\n            // Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ ÐºÐ¾Ð»Ð¾Ð½ÐºÐ¸\n            for (const col of defaultColumns){\n                await databaseAdapter.createColumn({\n                    name: col.name,\n                    board_id: newBoard.id,\n                    position: col.position,\n                    color: col.color,\n                    created_by: authResult.user.userId\n                });\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                data: {\n                    id: newBoard.id,\n                    name: newBoard.name,\n                    description: newBoard.description,\n                    project_id: newBoard.project_id,\n                    created_at: newBoard.created_at,\n                    updated_at: newBoard.updated_at\n                },\n                message: 'Ð”Ð¾ÑÐºÐ° ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑÐ¾Ð·Ð´Ð°Ð½Ð°'\n            }, {\n                status: 201\n            });\n        } catch (error) {\n            throw error;\n        }\n    } catch (error) {\n        console.error('Error creating board:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: 'Internal server error'\n        }, {\n            status: 500\n        });\n    }\n}\n// DELETE /api/boards - Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð´Ð¾ÑÐºÑƒ\nasync function DELETE(request) {\n    try {\n        const authResult = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.verifyAuth)(request);\n        if (!authResult.success || !authResult.user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'Unauthorized'\n            }, {\n                status: 401\n            });\n        }\n        await databaseAdapter.initialize();\n        const { searchParams } = new URL(request.url);\n        const boardId = searchParams.get('id');\n        if (!boardId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'Board ID is required'\n            }, {\n                status: 400\n            });\n        }\n        // ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð´Ð¾ÑÐºÑƒ\n        const board = await databaseAdapter.getBoardById(boardId);\n        if (!board) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'Board not found'\n            }, {\n                status: 404\n            });\n        }\n        // ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð¿Ñ€Ð¾ÐµÐºÑ‚ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð¿Ñ€Ð°Ð²\n        const project = await databaseAdapter.getProjectById(board.project_id);\n        if (!project) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'Project not found'\n            }, {\n                status: 404\n            });\n        }\n        // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð¿Ñ€Ð°Ð²Ð° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° (ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ Ð´Ð¾ÑÐºÐ¸ Ð¸Ð»Ð¸ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°)\n        if (board.created_by !== authResult.user.userId && project.created_by !== authResult.user.userId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'Access denied'\n            }, {\n                status: 403\n            });\n        }\n        // Ð£Ð´Ð°Ð»ÑÐµÐ¼ Ð´Ð¾ÑÐºÑƒ\n        await databaseAdapter.deleteBoard(boardId);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            message: 'Board deleted successfully'\n        });\n    } catch (error) {\n        console.error('Error deleting board:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: 'Internal server error'\n        }, {\n            status: 500\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c2tzLW1haW5cXHNyY1xcYXBwXFxhcGlcXGJvYXJkc1xccm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgRGF0YWJhc2VBZGFwdGVyIH0gZnJvbSAnQC9saWIvZGF0YWJhc2UtYWRhcHRlcic7XG5cbmNvbnN0IGRhdGFiYXNlQWRhcHRlciA9IERhdGFiYXNlQWRhcHRlci5nZXRJbnN0YW5jZSgpO1xuaW1wb3J0IHsgdmVyaWZ5QXV0aCB9IGZyb20gJ0AvbGliL2F1dGgnO1xuaW1wb3J0IHsgQm9hcmQsIEJvYXJkV2l0aFN0YXRzLCBDcmVhdGVCb2FyZER0byB9IGZyb20gJ0AvdHlwZXMvY29yZS50eXBlcyc7XG5cbi8vINCh0YXQtdC80LAg0LLQsNC70LjQtNCw0YbQuNC4INC00LvRjyDRgdC+0LfQtNCw0L3QuNGPINC00L7RgdC60LhcbmNvbnN0IGNyZWF0ZUJvYXJkU2NoZW1hID0gei5vYmplY3Qoe1xuICBuYW1lOiB6LnN0cmluZygpLm1pbigxLCAn0J3QsNC30LLQsNC90LjQtSDQtNC+0YHQutC4INC+0LHRj9C30LDRgtC10LvRjNC90L4nKS5tYXgoMTAwLCAn0J3QsNC30LLQsNC90LjQtSDRgdC70LjRiNC60L7QvCDQtNC70LjQvdC90L7QtScpLFxuICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKS5tYXgoNTAwLCAn0J7Qv9C40YHQsNC90LjQtSDRgdC70LjRiNC60L7QvCDQtNC70LjQvdC90L7QtScpLm9wdGlvbmFsKCksXG4gIHByb2plY3RfaWQ6IHoudW5pb24oW1xuICAgIHouc3RyaW5nKCkubWluKDEsICdJRCDQv9GA0L7QtdC60YLQsCDQvtCx0Y/Qt9Cw0YLQtdC70LXQvScpLFxuICAgIHoubnVtYmVyKCkuaW50KCkucG9zaXRpdmUoJ0lEINC/0YDQvtC10LrRgtCwINC00L7Qu9C20LXQvSDQsdGL0YLRjCDQv9C+0LvQvtC20LjRgtC10LvRjNC90YvQvCDRh9C40YHQu9C+0LwnKVxuICBdKS50cmFuc2Zvcm0odmFsID0+IFN0cmluZyh2YWwpKSwgLy8g0J/RgNC10L7QsdGA0LDQt9GD0LXQvCDQsiDRgdGC0YDQvtC60YMg0LTQu9GPINGB0L7QstC80LXRgdGC0LjQvNC+0YHRgtC4XG4gIGNvbG9yOiB6LnN0cmluZygpLnJlZ2V4KC9eI1swLTlBLUZdezZ9JC9pLCAn0J3QtdCy0LXRgNC90YvQuSDRhNC+0YDQvNCw0YIg0YbQstC10YLQsCcpLm9wdGlvbmFsKCksXG4gIGljb246IHouc3RyaW5nKCkubWluKDEsICfQmNC60L7QvdC60LAg0L7QsdGP0LfQsNGC0LXQu9GM0L3QsCcpLm9wdGlvbmFsKCksXG4gIHZpc2liaWxpdHk6IHouZW51bShbJ3ByaXZhdGUnLCAncHVibGljJ10pLmRlZmF1bHQoJ3ByaXZhdGUnKSxcbiAgc2V0dGluZ3M6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKClcbn0pO1xuXG5hc3luYyBmdW5jdGlvbiBjaGVja1Byb2plY3RBY2Nlc3MocHJvamVjdElkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ/CflI0gQ2hlY2tpbmcgcHJvamVjdCBhY2Nlc3M6JywgeyBwcm9qZWN0SWQsIHVzZXJJZCB9KTtcbiAgICBcbiAgICAvLyDQn9GA0L7QstC10YDRj9C10Lwg0YHRg9GJ0LXRgdGC0LLQvtCy0LDQvdC40LUg0L/RgNC+0LXQutGC0LBcbiAgICBjb25zdCBwcm9qZWN0ID0gYXdhaXQgZGF0YWJhc2VBZGFwdGVyLmdldFByb2plY3RCeUlkKHByb2plY3RJZCk7XG4gICAgY29uc29sZS5sb2coJ/Cfk4sgUHJvamVjdCBmb3VuZDonLCBwcm9qZWN0KTtcbiAgICBpZiAoIXByb2plY3QpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfinYwgUHJvamVjdCBub3QgZm91bmQnKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8INGP0LLQu9GP0LXRgtGB0Y8g0LvQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0YHQvtC30LTQsNGC0LXQu9C10Lwg0L/RgNC+0LXQutGC0LBcbiAgICBjb25zb2xlLmxvZygn8J+RpCBDaGVja2luZyBpZiB1c2VyIGlzIGNyZWF0b3I6JywgeyBjcmVhdGVkX2J5OiBwcm9qZWN0LmNyZWF0ZWRfYnksIHVzZXJJZCB9KTtcbiAgICBpZiAocHJvamVjdC5jcmVhdGVkX2J5ID09PSB1c2VySWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgVXNlciBpcyBwcm9qZWN0IGNyZWF0b3InKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICAvLyDQn9GA0L7QstC10YDRj9C10Lwg0Y/QstC70Y/QtdGC0YHRjyDQu9C4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjCDRg9GH0LDRgdGC0L3QuNC60L7QvCDQv9GA0L7QtdC60YLQsFxuICAgIGNvbnN0IHF1ZXJ5ID0gYFxuICAgICAgU0VMRUNUIEVYSVNUUyhcbiAgICAgICAgU0VMRUNUIDEgRlJPTSBwcm9qZWN0X21lbWJlcnMgXG4gICAgICAgIFdIRVJFIHByb2plY3RfaWQgPSA/IEFORCB1c2VyX2lkID0gP1xuICAgICAgKSBhcyBoYXNfYWNjZXNzXG4gICAgYDtcbiAgICBcbiAgICBjb25zb2xlLmxvZygn8J+UjSBDaGVja2luZyBwcm9qZWN0IG1lbWJlcnNoaXAgd2l0aCBxdWVyeTonLCBxdWVyeSk7XG4gICAgY29uc29sZS5sb2coJ/CflI0gUXVlcnkgcGFyYW1zOicsIFtwcm9qZWN0SWQsIHVzZXJJZF0pO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRhdGFiYXNlQWRhcHRlci5xdWVyeShxdWVyeSwgW3Byb2plY3RJZCwgdXNlcklkXSk7XG4gICAgY29uc29sZS5sb2coJ/Cfk4ogTWVtYmVyc2hpcCBxdWVyeSByZXN1bHQ6JywgcmVzdWx0KTtcbiAgICBjb25zdCBoYXNBY2Nlc3MgPSAocmVzdWx0WzBdIGFzIGFueSk/Lmhhc19hY2Nlc3MgPT09IDE7XG4gICAgY29uc29sZS5sb2coJ+KchSBGaW5hbCBhY2Nlc3MgcmVzdWx0OicsIGhhc0FjY2Vzcyk7XG4gICAgcmV0dXJuIGhhc0FjY2VzcztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBwcm9qZWN0IGFjY2VzczonLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8vIEdFVCAvYXBpL2JvYXJkcyAtINCf0L7Qu9GD0YfQuNGC0Ywg0LTQvtGB0LrQuFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IGF1dGhSZXN1bHQgPSBhd2FpdCB2ZXJpZnlBdXRoKHJlcXVlc3QpO1xuICAgIGlmICghYXV0aFJlc3VsdC5zdWNjZXNzIHx8ICFhdXRoUmVzdWx0LnVzZXIpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBhd2FpdCBkYXRhYmFzZUFkYXB0ZXIuaW5pdGlhbGl6ZSgpO1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICBcbiAgICAvLyDQn9Cw0YDQsNC80LXRgtGA0Ysg0LfQsNC/0YDQvtGB0LBcbiAgICBjb25zdCBwcm9qZWN0SWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdwcm9qZWN0X2lkJyk7XG4gICAgY29uc3QgcGFnZSA9IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ3BhZ2UnKSB8fCAnMScpO1xuICAgIGNvbnN0IGxpbWl0ID0gTWF0aC5taW4ocGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgnbGltaXQnKSB8fCAnMjAnKSwgMTAwKTtcbiAgICBjb25zdCBzZWFyY2ggPSBzZWFyY2hQYXJhbXMuZ2V0KCdzZWFyY2gnKTtcbiAgICBjb25zdCB2aXNpYmlsaXR5ID0gc2VhcmNoUGFyYW1zLmdldCgndmlzaWJpbGl0eScpO1xuICAgIGNvbnN0IHNvcnRCeSA9IHNlYXJjaFBhcmFtcy5nZXQoJ3NvcnRfYnknKSB8fCAnY3JlYXRlZF9hdCc7XG4gICAgY29uc3Qgc29ydE9yZGVyID0gc2VhcmNoUGFyYW1zLmdldCgnc29ydF9vcmRlcicpIHx8ICdkZXNjJztcbiAgICBcbiAgICBjb25zdCBvZmZzZXQgPSAocGFnZSAtIDEpICogbGltaXQ7XG5cbiAgICBsZXQgYm9hcmRzOiBhbnlbXSA9IFtdO1xuICAgIFxuICAgIGlmIChwcm9qZWN0SWQpIHtcbiAgICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCDQtNC+0YHRgtGD0L8g0Log0L/RgNC+0LXQutGC0YNcbiAgICAgIGNvbnN0IGhhc0FjY2VzcyA9IGF3YWl0IGNoZWNrUHJvamVjdEFjY2Vzcyhwcm9qZWN0SWQsIGF1dGhSZXN1bHQudXNlci51c2VySWQpO1xuICAgICAgaWYgKCFoYXNBY2Nlc3MpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnUHJvamVjdCBub3QgZm91bmQgb3IgYWNjZXNzIGRlbmllZCcgfSxcbiAgICAgICAgICB7IHN0YXR1czogNDA0IH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8g0J/QvtC70YPRh9Cw0LXQvCDQtNC+0YHQutC4INC60L7QvdC60YDQtdGC0L3QvtCz0L4g0L/RgNC+0LXQutGC0LBcbiAgICAgIGJvYXJkcyA9IGF3YWl0IGRhdGFiYXNlQWRhcHRlci5nZXRQcm9qZWN0Qm9hcmRzKHByb2plY3RJZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vINCf0L7Qu9GD0YfQsNC10Lwg0L/RgNC+0LXQutGC0Ysg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPINC4INC40YUg0LTQvtGB0LrQuFxuICAgICAgY29uc3QgdXNlclByb2plY3RzID0gYXdhaXQgZGF0YWJhc2VBZGFwdGVyLmdldFVzZXJQcm9qZWN0cyhhdXRoUmVzdWx0LnVzZXIudXNlcklkKTtcbiAgICAgIGNvbnN0IGFsbEJvYXJkcyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICB1c2VyUHJvamVjdHMubWFwKHByb2plY3QgPT4gZGF0YWJhc2VBZGFwdGVyLmdldFByb2plY3RCb2FyZHMocHJvamVjdC5pZCkpXG4gICAgICApO1xuICAgICAgYm9hcmRzID0gYWxsQm9hcmRzLmZsYXQoKTtcbiAgICB9XG4gICAgXG4gICAgLy8g0J/RgNC40LzQtdC90Y/QtdC8INGE0LjQu9GM0YLRgNGLXG4gICAgbGV0IGZpbHRlcmVkQm9hcmRzID0gYm9hcmRzO1xuICAgIFxuICAgIGlmIChzZWFyY2gpIHtcbiAgICAgIGNvbnN0IHNlYXJjaExvd2VyID0gc2VhcmNoLnRvTG93ZXJDYXNlKCk7XG4gICAgICBmaWx0ZXJlZEJvYXJkcyA9IGZpbHRlcmVkQm9hcmRzLmZpbHRlcihib2FyZCA9PiBcbiAgICAgICAgYm9hcmQubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaExvd2VyKSB8fFxuICAgICAgICAoYm9hcmQuZGVzY3JpcHRpb24gJiYgYm9hcmQuZGVzY3JpcHRpb24udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hMb3dlcikpXG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICAvLyDQodC+0YDRgtC40YDQvtCy0LrQsFxuICAgIGNvbnN0IGFsbG93ZWRTb3J0RmllbGRzID0gWyduYW1lJywgJ2NyZWF0ZWRfYXQnLCAndXBkYXRlZF9hdCddO1xuICAgIGNvbnN0IHZhbGlkU29ydEJ5ID0gYWxsb3dlZFNvcnRGaWVsZHMuaW5jbHVkZXMoc29ydEJ5KSA/IHNvcnRCeSA6ICdjcmVhdGVkX2F0JztcbiAgICBjb25zdCB2YWxpZFNvcnRPcmRlciA9IFsnYXNjJywgJ2Rlc2MnXS5pbmNsdWRlcyhzb3J0T3JkZXIudG9Mb3dlckNhc2UoKSkgPyBzb3J0T3JkZXIudG9Mb3dlckNhc2UoKSA6ICdkZXNjJztcbiAgICBcbiAgICBmaWx0ZXJlZEJvYXJkcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBjb25zdCBhVmFsdWUgPSAoYSBhcyBhbnkpW3ZhbGlkU29ydEJ5XTtcbiAgICAgIGNvbnN0IGJWYWx1ZSA9IChiIGFzIGFueSlbdmFsaWRTb3J0QnldO1xuICAgICAgXG4gICAgICBpZiAodmFsaWRTb3J0T3JkZXIgPT09ICdhc2MnKSB7XG4gICAgICAgIHJldHVybiBhVmFsdWUgPiBiVmFsdWUgPyAxIDogLTE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYVZhbHVlIDwgYlZhbHVlID8gMSA6IC0xO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vINCf0LDQs9C40L3QsNGG0LjRj1xuICAgIGNvbnN0IHRvdGFsID0gZmlsdGVyZWRCb2FyZHMubGVuZ3RoO1xuICAgIGNvbnN0IHBhZ2luYXRlZEJvYXJkcyA9IGZpbHRlcmVkQm9hcmRzLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgbGltaXQpO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGJvYXJkczogcGFnaW5hdGVkQm9hcmRzLFxuICAgICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgICAgcGFnZSxcbiAgICAgICAgICBsaW1pdCxcbiAgICAgICAgICB0b3RhbCxcbiAgICAgICAgICB0b3RhbFBhZ2VzOiBNYXRoLmNlaWwodG90YWwgLyBsaW1pdClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYm9hcmRzOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuLy8gUE9TVCAvYXBpL2JvYXJkcyAtINCh0L7Qt9C00LDRgtGMINC00L7RgdC60YNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYXV0aFJlc3VsdCA9IGF3YWl0IHZlcmlmeUF1dGgocmVxdWVzdCk7XG4gICAgaWYgKCFhdXRoUmVzdWx0LnN1Y2Nlc3MgfHwgIWF1dGhSZXN1bHQudXNlcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGF3YWl0IGRhdGFiYXNlQWRhcHRlci5pbml0aWFsaXplKCk7XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIGNvbnNvbGUubG9nKCfwn5OLIEJvYXJkIGNyZWF0aW9uIHJlcXVlc3QgYm9keTonLCBKU09OLnN0cmluZ2lmeShib2R5LCBudWxsLCAyKSk7XG4gICAgXG4gICAgY29uc3QgdmFsaWRhdGlvblJlc3VsdCA9IGNyZWF0ZUJvYXJkU2NoZW1hLnNhZmVQYXJzZShib2R5KTtcbiAgICBjb25zb2xlLmxvZygn8J+TiyBWYWxpZGF0aW9uIHJlc3VsdDonLCB2YWxpZGF0aW9uUmVzdWx0KTtcblxuICAgIGlmICghdmFsaWRhdGlvblJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmxvZygn4p2MIFZhbGlkYXRpb24gZmFpbGVkOicsIHZhbGlkYXRpb25SZXN1bHQuZXJyb3IuaXNzdWVzKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiAnVmFsaWRhdGlvbiBmYWlsZWQnLFxuICAgICAgICAgIGRldGFpbHM6IHZhbGlkYXRpb25SZXN1bHQuZXJyb3IuaXNzdWVzXG4gICAgICAgIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBib2FyZERhdGEgPSB2YWxpZGF0aW9uUmVzdWx0LmRhdGE7XG5cbiAgICAvLyDQn9GA0L7QstC10YDRj9C10Lwg0LTQvtGB0YLRg9C/INC6INC/0YDQvtC10LrRgtGDXG4gICAgY29uc3QgaGFzQWNjZXNzID0gYXdhaXQgY2hlY2tQcm9qZWN0QWNjZXNzKGJvYXJkRGF0YS5wcm9qZWN0X2lkLCBhdXRoUmVzdWx0LnVzZXIudXNlcklkKTtcbiAgICBpZiAoIWhhc0FjY2Vzcykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0FjY2VzcyBkZW5pZWQ6IFByb2plY3Qgbm90IGZvdW5kIG9yIGluc3VmZmljaWVudCBwZXJtaXNzaW9ucycgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMyB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCDRgdGD0YnQtdGB0YLQstC+0LLQsNC90LjQtSDQv9GA0L7QtdC60YLQsFxuICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCBkYXRhYmFzZUFkYXB0ZXIuZ2V0UHJvamVjdEJ5SWQoYm9hcmREYXRhLnByb2plY3RfaWQpO1xuICAgIGlmICghcHJvamVjdCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1Byb2plY3Qgbm90IGZvdW5kJyB9LFxuICAgICAgICB7IHN0YXR1czogNDA0IH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vINCU0L7QsdCw0LLQu9GP0LXQvCBjcmVhdGVkX2J5INC6INC00LDQvdC90YvQvCDQtNC+0YHQutC4XG4gICAgICBjb25zdCBib2FyZERhdGFXaXRoQ3JlYXRvciA9IHtcbiAgICAgICAgLi4uYm9hcmREYXRhLFxuICAgICAgICBjcmVhdGVkX2J5OiBhdXRoUmVzdWx0LnVzZXIudXNlcklkXG4gICAgICB9O1xuICAgICAgXG4gICAgICAvLyDQodC+0LfQtNCw0LXQvCDQtNC+0YHQutGDXG4gICAgICBjb25zdCBuZXdCb2FyZCA9IGF3YWl0IGRhdGFiYXNlQWRhcHRlci5jcmVhdGVCb2FyZChib2FyZERhdGFXaXRoQ3JlYXRvcik7XG5cbiAgICAgIC8vINCh0L7Qt9C00LDQtdC8INC60L7Qu9C+0L3QutC4INC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOXG4gICAgICBjb25zdCBkZWZhdWx0Q29sdW1ucyA9IFtcbiAgICAgICAgeyBuYW1lOiAn0Jog0LLRi9C/0L7Qu9C90LXQvdC40Y4nLCBjb2xvcjogJyNFRjQ0NDQnLCBwb3NpdGlvbjogMCB9LFxuICAgICAgICB7IG5hbWU6ICfQkiDRgNCw0LHQvtGC0LUnLCBjb2xvcjogJyNGNTlFMEInLCBwb3NpdGlvbjogMSB9LFxuICAgICAgICB7IG5hbWU6ICfQndCwINC/0YDQvtCy0LXRgNC60LUnLCBjb2xvcjogJyMzQjgyRjYnLCBwb3NpdGlvbjogMiB9LFxuICAgICAgICB7IG5hbWU6ICfQktGL0L/QvtC70L3QtdC90L4nLCBjb2xvcjogJyMxMEI5ODEnLCBwb3NpdGlvbjogMyB9XG4gICAgICBdO1xuXG4gICAgICAvLyDQodC+0LfQtNCw0LXQvCDQutC+0LvQvtC90LrQuFxuICAgICAgZm9yIChjb25zdCBjb2wgb2YgZGVmYXVsdENvbHVtbnMpIHtcbiAgICAgICAgYXdhaXQgZGF0YWJhc2VBZGFwdGVyLmNyZWF0ZUNvbHVtbih7XG4gICAgICAgICAgbmFtZTogY29sLm5hbWUsXG4gICAgICAgICAgYm9hcmRfaWQ6IG5ld0JvYXJkLmlkLFxuICAgICAgICAgIHBvc2l0aW9uOiBjb2wucG9zaXRpb24sXG4gICAgICAgICAgY29sb3I6IGNvbC5jb2xvcixcbiAgICAgICAgICBjcmVhdGVkX2J5OiBhdXRoUmVzdWx0LnVzZXIudXNlcklkXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgaWQ6IG5ld0JvYXJkLmlkLFxuICAgICAgICAgIG5hbWU6IG5ld0JvYXJkLm5hbWUsXG4gICAgICAgICAgZGVzY3JpcHRpb246IG5ld0JvYXJkLmRlc2NyaXB0aW9uLFxuICAgICAgICAgIHByb2plY3RfaWQ6IG5ld0JvYXJkLnByb2plY3RfaWQsXG4gICAgICAgICAgY3JlYXRlZF9hdDogbmV3Qm9hcmQuY3JlYXRlZF9hdCxcbiAgICAgICAgICB1cGRhdGVkX2F0OiBuZXdCb2FyZC51cGRhdGVkX2F0XG4gICAgICAgIH0sXG4gICAgICAgIG1lc3NhZ2U6ICfQlNC+0YHQutCwINGD0YHQv9C10YjQvdC+INGB0L7Qt9C00LDQvdCwJ1xuICAgICAgfSwgeyBzdGF0dXM6IDIwMSB9KTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBib2FyZDonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbi8vIERFTEVURSAvYXBpL2JvYXJkcyAtINCj0LTQsNC70LjRgtGMINC00L7RgdC60YNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBERUxFVEUocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBhdXRoUmVzdWx0ID0gYXdhaXQgdmVyaWZ5QXV0aChyZXF1ZXN0KTtcbiAgICBpZiAoIWF1dGhSZXN1bHQuc3VjY2VzcyB8fCAhYXV0aFJlc3VsdC51c2VyKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVW5hdXRob3JpemVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgYXdhaXQgZGF0YWJhc2VBZGFwdGVyLmluaXRpYWxpemUoKTtcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgY29uc3QgYm9hcmRJZCA9IHNlYXJjaFBhcmFtcy5nZXQoJ2lkJyk7XG5cbiAgICBpZiAoIWJvYXJkSWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdCb2FyZCBJRCBpcyByZXF1aXJlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vINCf0L7Qu9GD0YfQsNC10Lwg0LTQvtGB0LrRg1xuICAgIGNvbnN0IGJvYXJkID0gYXdhaXQgZGF0YWJhc2VBZGFwdGVyLmdldEJvYXJkQnlJZChib2FyZElkKSBhcyBCb2FyZCB8IG51bGw7XG4gICAgXG4gICAgaWYgKCFib2FyZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0JvYXJkIG5vdCBmb3VuZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwNCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vINCf0L7Qu9GD0YfQsNC10Lwg0L/RgNC+0LXQutGCINC00LvRjyDQv9GA0L7QstC10YDQutC4INC/0YDQsNCyXG4gICAgY29uc3QgcHJvamVjdCA9IGF3YWl0IGRhdGFiYXNlQWRhcHRlci5nZXRQcm9qZWN0QnlJZChib2FyZC5wcm9qZWN0X2lkKTtcbiAgICBcbiAgICBpZiAoIXByb2plY3QpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdQcm9qZWN0IG5vdCBmb3VuZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwNCB9XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICAvLyDQn9GA0L7QstC10YDRj9C10Lwg0L/RgNCw0LLQsCDQtNC+0YHRgtGD0L/QsCAo0YHQvtC30LTQsNGC0LXQu9GMINC00L7RgdC60Lgg0LjQu9C4INGB0L7Qt9C00LDRgtC10LvRjCDQv9GA0L7QtdC60YLQsClcbiAgICBpZiAoYm9hcmQuY3JlYXRlZF9ieSAhPT0gYXV0aFJlc3VsdC51c2VyLnVzZXJJZCAmJiBwcm9qZWN0LmNyZWF0ZWRfYnkgIT09IGF1dGhSZXN1bHQudXNlci51c2VySWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBY2Nlc3MgZGVuaWVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAzIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8g0KPQtNCw0LvRj9C10Lwg0LTQvtGB0LrRg1xuICAgIGF3YWl0IGRhdGFiYXNlQWRhcHRlci5kZWxldGVCb2FyZChib2FyZElkKTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogJ0JvYXJkIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5J1xuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGJvYXJkOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwieiIsIkRhdGFiYXNlQWRhcHRlciIsImRhdGFiYXNlQWRhcHRlciIsImdldEluc3RhbmNlIiwidmVyaWZ5QXV0aCIsImNyZWF0ZUJvYXJkU2NoZW1hIiwib2JqZWN0IiwibmFtZSIsInN0cmluZyIsIm1pbiIsIm1heCIsImRlc2NyaXB0aW9uIiwib3B0aW9uYWwiLCJwcm9qZWN0X2lkIiwidW5pb24iLCJudW1iZXIiLCJpbnQiLCJwb3NpdGl2ZSIsInRyYW5zZm9ybSIsInZhbCIsIlN0cmluZyIsImNvbG9yIiwicmVnZXgiLCJpY29uIiwidmlzaWJpbGl0eSIsImVudW0iLCJkZWZhdWx0Iiwic2V0dGluZ3MiLCJyZWNvcmQiLCJhbnkiLCJjaGVja1Byb2plY3RBY2Nlc3MiLCJwcm9qZWN0SWQiLCJ1c2VySWQiLCJjb25zb2xlIiwibG9nIiwicHJvamVjdCIsImdldFByb2plY3RCeUlkIiwiY3JlYXRlZF9ieSIsInF1ZXJ5IiwicmVzdWx0IiwiaGFzQWNjZXNzIiwiaGFzX2FjY2VzcyIsImVycm9yIiwiR0VUIiwicmVxdWVzdCIsImF1dGhSZXN1bHQiLCJzdWNjZXNzIiwidXNlciIsImpzb24iLCJzdGF0dXMiLCJpbml0aWFsaXplIiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwiZ2V0IiwicGFnZSIsInBhcnNlSW50IiwibGltaXQiLCJNYXRoIiwic2VhcmNoIiwic29ydEJ5Iiwic29ydE9yZGVyIiwib2Zmc2V0IiwiYm9hcmRzIiwiZ2V0UHJvamVjdEJvYXJkcyIsInVzZXJQcm9qZWN0cyIsImdldFVzZXJQcm9qZWN0cyIsImFsbEJvYXJkcyIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJpZCIsImZsYXQiLCJmaWx0ZXJlZEJvYXJkcyIsInNlYXJjaExvd2VyIiwidG9Mb3dlckNhc2UiLCJmaWx0ZXIiLCJib2FyZCIsImluY2x1ZGVzIiwiYWxsb3dlZFNvcnRGaWVsZHMiLCJ2YWxpZFNvcnRCeSIsInZhbGlkU29ydE9yZGVyIiwic29ydCIsImEiLCJiIiwiYVZhbHVlIiwiYlZhbHVlIiwidG90YWwiLCJsZW5ndGgiLCJwYWdpbmF0ZWRCb2FyZHMiLCJzbGljZSIsImRhdGEiLCJwYWdpbmF0aW9uIiwidG90YWxQYWdlcyIsImNlaWwiLCJQT1NUIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ2YWxpZGF0aW9uUmVzdWx0Iiwic2FmZVBhcnNlIiwiaXNzdWVzIiwiZGV0YWlscyIsImJvYXJkRGF0YSIsImJvYXJkRGF0YVdpdGhDcmVhdG9yIiwibmV3Qm9hcmQiLCJjcmVhdGVCb2FyZCIsImRlZmF1bHRDb2x1bW5zIiwicG9zaXRpb24iLCJjb2wiLCJjcmVhdGVDb2x1bW4iLCJib2FyZF9pZCIsImNyZWF0ZWRfYXQiLCJ1cGRhdGVkX2F0IiwibWVzc2FnZSIsIkRFTEVURSIsImJvYXJkSWQiLCJnZXRCb2FyZEJ5SWQiLCJkZWxldGVCb2FyZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/boards/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   requireAdmin: () => (/* binding */ requireAdmin),\n/* harmony export */   verifyAuth: () => (/* binding */ verifyAuth),\n/* harmony export */   verifyProjectAccess: () => (/* binding */ verifyProjectAccess)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _database_adapter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./database-adapter */ \"(rsc)/./src/lib/database-adapter.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_database_adapter__WEBPACK_IMPORTED_MODULE_1__]);\n_database_adapter__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nconst databaseAdapter = _database_adapter__WEBPACK_IMPORTED_MODULE_1__.DatabaseAdapter.getInstance();\nasync function verifyAuth(request) {\n    try {\n        // ÐžÑ‚Ð»Ð°Ð´ÐºÐ°: Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð²ÑÐµ cookies\n        console.log('=== DEBUG COOKIES ===');\n        console.log('All cookies:', request.cookies.getAll());\n        console.log('Cookie names:', request.cookies.getAll().map((c)=>c.name));\n        console.log('auth-token cookie:', request.cookies.get('auth-token'));\n        console.log('auth-token-client cookie:', request.cookies.get('auth-token-client'));\n        console.log('Authorization header:', request.headers.get('authorization'));\n        // ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ñ‚Ð¾ÐºÐµÐ½Ð° Ð¸Ð· cookie Ð¸Ð»Ð¸ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ° Authorization\n        const token = request.cookies.get('auth-token')?.value || request.headers.get('authorization')?.replace('Bearer ', '');\n        console.log('Auth token found:', !!token);\n        console.log('Token value (first 20 chars):', token ? token.substring(0, 20) + '...' : 'null');\n        if (!token) {\n            console.log('No auth token found in cookies or headers');\n            return {\n                success: false,\n                error: 'Ð¢Ð¾ÐºÐµÐ½ Ð°ÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ð¸ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½'\n            };\n        }\n        // ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° JWT Ñ‚Ð¾ÐºÐµÐ½Ð°\n        let decoded;\n        const jwtSecret = process.env.JWT_SECRET || 'your-secret-key';\n        console.log('Using JWT_SECRET:', jwtSecret);\n        try {\n            decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, jwtSecret);\n            console.log('JWT verified successfully for user:', decoded.userId);\n        } catch (jwtError) {\n            console.log('JWT verification failed:', jwtError);\n            return {\n                success: false,\n                error: 'ÐÐµÐ²Ð°Ð»Ð¸Ð´Ð½Ñ‹Ð¹ Ñ‚Ð¾ÐºÐµÐ½'\n            };\n        }\n        // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Ð°Ð´Ð°Ð¿Ñ‚ÐµÑ€ Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ ÑÐµÑÑÐ¸ÑÐ¼Ð¸\n        await databaseAdapter.initialize();\n        try {\n            // Ð˜Ñ‰ÐµÐ¼ ÑÐµÑÑÐ¸ÑŽ Ñ‡ÐµÑ€ÐµÐ· Ð°Ð´Ð°Ð¿Ñ‚ÐµÑ€\n            const session = await databaseAdapter.getSessionByToken(token);\n            console.log('Session found:', !!session);\n            console.log('Session object:', session);\n            console.log('Session userId:', session?.user_id);\n            if (!session) {\n                console.log('Session not found or expired for token');\n                return {\n                    success: false,\n                    error: 'Ð¡ÐµÑÑÐ¸Ñ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ð° Ð¸Ð»Ð¸ Ð¸ÑÑ‚ÐµÐºÐ»Ð°'\n                };\n            }\n            // ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ñ‡ÐµÑ€ÐµÐ· Ð°Ð´Ð°Ð¿Ñ‚ÐµÑ€\n            const user = await databaseAdapter.getUserById(session.user_id);\n            if (!user) {\n                return {\n                    success: false,\n                    error: 'ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½'\n                };\n            }\n            // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÑ‚Ð°Ñ‚ÑƒÑ Ð¾Ð´Ð¾Ð±Ñ€ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ\n            console.log('User data:', user);\n            console.log('User isApproved:', user.isApproved, 'type:', typeof user.isApproved);\n            console.log('User role:', user.role);\n            // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ approval_status Ð´Ð»Ñ PostgreSQL\n            const isApproved = user.isApproved !== undefined ? Boolean(user.isApproved) : true;\n            console.log('Final isApproved:', isApproved);\n            if (!isApproved && user.role !== 'admin') {\n                console.log('User not approved and not admin');\n                return {\n                    success: false,\n                    error: 'ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð½Ðµ Ð¾Ð´Ð¾Ð±Ñ€ÐµÐ½'\n                };\n            }\n            return {\n                success: true,\n                user: {\n                    userId: String(user.id),\n                    email: user.email,\n                    role: user.role,\n                    name: user.name\n                }\n            };\n        } catch (error) {\n            console.error('Auth error:', error);\n            return {\n                success: false,\n                error: 'ÐžÑˆÐ¸Ð±ÐºÐ° Ð°ÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ð¸'\n            };\n        }\n    } catch (error) {\n        console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð°ÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ð¸:', error);\n        return {\n            success: false,\n            error: 'Ð’Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½ÑÑ Ð¾ÑˆÐ¸Ð±ÐºÐ° ÑÐµÑ€Ð²ÐµÑ€Ð°'\n        };\n    }\n}\n// ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿Ñ€Ð°Ð² Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ðº Ð¿Ñ€Ð¾ÐµÐºÑ‚Ñƒ\nasync function verifyProjectAccess(userId, projectId, requiredRole) {\n    try {\n        await databaseAdapter.initialize();\n        // ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ñ‹ Ñ‡ÐµÑ€ÐµÐ· Ð°Ð´Ð°Ð¿Ñ‚ÐµÑ€\n        const projects = await databaseAdapter.getAllProjects();\n        const project = projects.find((p)=>p.id === projectId);\n        if (!project) {\n            return {\n                hasAccess: false\n            };\n        }\n        // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð²Ð»Ð°Ð´ÐµÐ»ÑŒÑ†ÐµÐ¼\n        if (project.created_by === userId) {\n            return {\n                hasAccess: true,\n                userRole: 'owner'\n            };\n        }\n        // ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð² Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ñ‡ÐµÑ€ÐµÐ· getUserProjects\n        const userProjects = await databaseAdapter.getUserProjects(userId);\n        const hasAccess = userProjects.some((p)=>p.id === projectId);\n        if (!hasAccess) {\n            return {\n                hasAccess: false\n            };\n        }\n        // Ð”Ð»Ñ ÑƒÐ¿Ñ€Ð¾Ñ‰ÐµÐ½Ð¸Ñ, ÑÑ‡Ð¸Ñ‚Ð°ÐµÐ¼ Ñ‡Ñ‚Ð¾ Ñƒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ ÐµÑÑ‚ÑŒ Ð´Ð¾ÑÑ‚ÑƒÐ¿ ÐºÐ°Ðº ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸Ðº\n        const userRole = 'member';\n        // ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ‚Ñ€ÐµÐ±ÑƒÐµÐ¼Ð¾Ð¹ Ñ€Ð¾Ð»Ð¸\n        if (requiredRole) {\n            const roleHierarchy = {\n                owner: 3,\n                admin: 2,\n                member: 1\n            };\n            const userRoleLevel = roleHierarchy[userRole] || 0;\n            const requiredRoleLevel = roleHierarchy[requiredRole];\n            if (userRoleLevel < requiredRoleLevel) {\n                return {\n                    hasAccess: false,\n                    userRole\n                };\n            }\n        }\n        return {\n            hasAccess: true,\n            userRole\n        };\n    } catch (error) {\n        console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ðº Ð¿Ñ€Ð¾ÐµÐºÑ‚Ñƒ:', error);\n        return {\n            hasAccess: false\n        };\n    }\n}\n// Middleware Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ñ€Ð¾Ð»Ð¸ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°\nasync function requireAdmin(request) {\n    const authResult = await verifyAuth(request);\n    if (!authResult.success) {\n        return {\n            success: false,\n            error: authResult.error\n        };\n    }\n    if (authResult.user.role !== 'admin') {\n        return {\n            success: false,\n            error: 'Ð¢Ñ€ÐµÐ±ÑƒÑŽÑ‚ÑÑ Ð¿Ñ€Ð°Ð²Ð° Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°'\n        };\n    }\n    return {\n        success: true,\n        user: authResult.user\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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XGxpYlxcYXV0aC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCB7IERhdGFiYXNlQWRhcHRlciB9IGZyb20gJy4vZGF0YWJhc2UtYWRhcHRlcic7XG5cbmNvbnN0IGRhdGFiYXNlQWRhcHRlciA9IERhdGFiYXNlQWRhcHRlci5nZXRJbnN0YW5jZSgpO1xuXG5pbnRlcmZhY2UgQXV0aFJlc3VsdCB7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIHVzZXI/OiB7XG4gICAgdXNlcklkOiBzdHJpbmc7XG4gICAgZW1haWw6IHN0cmluZztcbiAgICByb2xlOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICB9O1xuICBlcnJvcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZlcmlmeUF1dGgocmVxdWVzdDogTmV4dFJlcXVlc3QpOiBQcm9taXNlPEF1dGhSZXN1bHQ+IHtcbiAgdHJ5IHtcbiAgICAvLyDQntGC0LvQsNC00LrQsDog0L/QvtC60LDQt9Cw0YLRjCDQstGB0LUgY29va2llc1xuICAgIGNvbnNvbGUubG9nKCc9PT0gREVCVUcgQ09PS0lFUyA9PT0nKTtcbiAgICBjb25zb2xlLmxvZygnQWxsIGNvb2tpZXM6JywgcmVxdWVzdC5jb29raWVzLmdldEFsbCgpKTtcbiAgICBjb25zb2xlLmxvZygnQ29va2llIG5hbWVzOicsIHJlcXVlc3QuY29va2llcy5nZXRBbGwoKS5tYXAoYyA9PiBjLm5hbWUpKTtcbiAgICBjb25zb2xlLmxvZygnYXV0aC10b2tlbiBjb29raWU6JywgcmVxdWVzdC5jb29raWVzLmdldCgnYXV0aC10b2tlbicpKTtcbiAgICBjb25zb2xlLmxvZygnYXV0aC10b2tlbi1jbGllbnQgY29va2llOicsIHJlcXVlc3QuY29va2llcy5nZXQoJ2F1dGgtdG9rZW4tY2xpZW50JykpO1xuICAgIGNvbnNvbGUubG9nKCdBdXRob3JpemF0aW9uIGhlYWRlcjonLCByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdhdXRob3JpemF0aW9uJykpO1xuICAgIFxuICAgIC8vINCf0L7Qu9GD0YfQtdC90LjQtSDRgtC+0LrQtdC90LAg0LjQtyBjb29raWUg0LjQu9C4INC30LDQs9C+0LvQvtCy0LrQsCBBdXRob3JpemF0aW9uXG4gICAgY29uc3QgdG9rZW4gPSByZXF1ZXN0LmNvb2tpZXMuZ2V0KCdhdXRoLXRva2VuJyk/LnZhbHVlIHx8IFxuICAgICAgICAgICAgICAgICAgcmVxdWVzdC5oZWFkZXJzLmdldCgnYXV0aG9yaXphdGlvbicpPy5yZXBsYWNlKCdCZWFyZXIgJywgJycpO1xuXG4gICAgY29uc29sZS5sb2coJ0F1dGggdG9rZW4gZm91bmQ6JywgISF0b2tlbik7XG4gICAgY29uc29sZS5sb2coJ1Rva2VuIHZhbHVlIChmaXJzdCAyMCBjaGFycyk6JywgdG9rZW4gPyB0b2tlbi5zdWJzdHJpbmcoMCwgMjApICsgJy4uLicgOiAnbnVsbCcpO1xuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIGNvbnNvbGUubG9nKCdObyBhdXRoIHRva2VuIGZvdW5kIGluIGNvb2tpZXMgb3IgaGVhZGVycycpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiAn0KLQvtC60LXQvSDQsNGD0YLQtdC90YLQuNGE0LjQutCw0YbQuNC4INC90LUg0L3QsNC50LTQtdC9J1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyDQn9GA0L7QstC10YDQutCwIEpXVCDRgtC+0LrQtdC90LBcbiAgICBsZXQgZGVjb2RlZDogYW55O1xuICAgIGNvbnN0IGp3dFNlY3JldCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgJ3lvdXItc2VjcmV0LWtleSc7XG4gICAgY29uc29sZS5sb2coJ1VzaW5nIEpXVF9TRUNSRVQ6Jywgand0U2VjcmV0KTtcbiAgICB0cnkge1xuICAgICAgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIGp3dFNlY3JldCk7XG4gICAgICBjb25zb2xlLmxvZygnSldUIHZlcmlmaWVkIHN1Y2Nlc3NmdWxseSBmb3IgdXNlcjonLCBkZWNvZGVkLnVzZXJJZCk7XG4gICAgfSBjYXRjaCAoand0RXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdKV1QgdmVyaWZpY2F0aW9uIGZhaWxlZDonLCBqd3RFcnJvcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICfQndC10LLQsNC70LjQtNC90YvQuSDRgtC+0LrQtdC9J1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyDQmNGB0L/QvtC70YzQt9GD0LXQvCDQvtC/0YLQuNC80LjQt9C40YDQvtCy0LDQvdC90YvQuSDQsNC00LDQv9GC0LXRgCDQtNC70Y8g0YDQsNCx0L7RgtGLINGBINGB0LXRgdGB0LjRj9C80LhcbiAgICBhd2FpdCBkYXRhYmFzZUFkYXB0ZXIuaW5pdGlhbGl6ZSgpO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgLy8g0JjRidC10Lwg0YHQtdGB0YHQuNGOINGH0LXRgNC10Lcg0LDQtNCw0L/RgtC10YBcbiAgICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBkYXRhYmFzZUFkYXB0ZXIuZ2V0U2Vzc2lvbkJ5VG9rZW4odG9rZW4pO1xuICAgICAgICAgY29uc29sZS5sb2coJ1Nlc3Npb24gZm91bmQ6JywgISFzZXNzaW9uKTtcbiAgICAgICAgIGNvbnNvbGUubG9nKCdTZXNzaW9uIG9iamVjdDonLCBzZXNzaW9uKTtcbiAgICAgICAgIGNvbnNvbGUubG9nKCdTZXNzaW9uIHVzZXJJZDonLCBzZXNzaW9uPy51c2VyX2lkKTtcblxuICAgICAgICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICAgICAgIGNvbnNvbGUubG9nKCdTZXNzaW9uIG5vdCBmb3VuZCBvciBleHBpcmVkIGZvciB0b2tlbicpO1xuICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfQodC10YHRgdC40Y8g0L3QtSDQvdCw0LnQtNC10L3QsCDQuNC70Lgg0LjRgdGC0LXQutC70LAnIH07XG4gICAgICAgICB9XG5cbiAgICAgICAvLyDQn9C+0LvRg9GH0LDQtdC8INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDRh9C10YDQtdC3INCw0LTQsNC/0YLQtdGAXG4gICAgICAgY29uc3QgdXNlciA9IGF3YWl0IGRhdGFiYXNlQWRhcHRlci5nZXRVc2VyQnlJZChzZXNzaW9uLnVzZXJfaWQpO1xuXG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAn0J/QvtC70YzQt9C+0LLQsNGC0LXQu9GMINC90LUg0L3QsNC50LTQtdC9JyB9O1xuICAgICAgfVxuXG4gICAgICAvLyDQn9GA0L7QstC10YDRj9C10Lwg0YHRgtCw0YLRg9GBINC+0LTQvtCx0YDQtdC90LjRjyDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cbiAgICAgIGNvbnNvbGUubG9nKCdVc2VyIGRhdGE6JywgdXNlcik7XG4gICAgICBjb25zb2xlLmxvZygnVXNlciBpc0FwcHJvdmVkOicsIHVzZXIuaXNBcHByb3ZlZCwgJ3R5cGU6JywgdHlwZW9mIHVzZXIuaXNBcHByb3ZlZCk7XG4gICAgICBjb25zb2xlLmxvZygnVXNlciByb2xlOicsIHVzZXIucm9sZSk7XG4gICAgICBcbiAgICAgIC8vINCY0YHQv9C+0LvRjNC30YPQtdC8IGFwcHJvdmFsX3N0YXR1cyDQtNC70Y8gUG9zdGdyZVNRTFxuICAgICAgY29uc3QgaXNBcHByb3ZlZCA9IHVzZXIuaXNBcHByb3ZlZCAhPT0gdW5kZWZpbmVkID8gQm9vbGVhbih1c2VyLmlzQXBwcm92ZWQpIDogdHJ1ZTtcbiAgICAgIGNvbnNvbGUubG9nKCdGaW5hbCBpc0FwcHJvdmVkOicsIGlzQXBwcm92ZWQpO1xuICAgICAgXG4gICAgICBpZiAoIWlzQXBwcm92ZWQgJiYgdXNlci5yb2xlICE9PSAnYWRtaW4nKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdVc2VyIG5vdCBhcHByb3ZlZCBhbmQgbm90IGFkbWluJyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6ICfQn9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0L3QtSDQvtC00L7QsdGA0LXQvSdcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIHVzZXJJZDogU3RyaW5nKHVzZXIuaWQpLFxuICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgIHJvbGU6IHVzZXIucm9sZSxcbiAgICAgICAgICBuYW1lOiB1c2VyLm5hbWVcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignQXV0aCBlcnJvcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfQntGI0LjQsdC60LAg0LDRg9GC0LXQvdGC0LjRhNC40LrQsNGG0LjQuCcgfTtcbiAgICB9XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfQntGI0LjQsdC60LAg0L/RgNC+0LLQtdGA0LrQuCDQsNGD0YLQtdC90YLQuNGE0LjQutCw0YbQuNC4OicsIGVycm9yKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogJ9CS0L3Rg9GC0YDQtdC90L3Rj9GPINC+0YjQuNCx0LrQsCDRgdC10YDQstC10YDQsCdcbiAgICB9O1xuICB9XG59XG5cbi8vINCf0YDQvtCy0LXRgNC60LAg0L/RgNCw0LIg0LTQvtGB0YLRg9C/0LAg0Log0L/RgNC+0LXQutGC0YNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlQcm9qZWN0QWNjZXNzKFxuICB1c2VySWQ6IHN0cmluZywgXG4gIHByb2plY3RJZDogc3RyaW5nLCBcbiAgcmVxdWlyZWRSb2xlPzogJ293bmVyJyB8ICdhZG1pbicgfCAnbWVtYmVyJ1xuKTogUHJvbWlzZTx7IGhhc0FjY2VzczogYm9vbGVhbjsgdXNlclJvbGU/OiBzdHJpbmcgfT4ge1xuICB0cnkge1xuICAgIGF3YWl0IGRhdGFiYXNlQWRhcHRlci5pbml0aWFsaXplKCk7XG5cbiAgICAvLyDQn9C+0LvRg9GH0LDQtdC8INC/0YDQvtC10LrRgtGLINGH0LXRgNC10Lcg0LDQtNCw0L/RgtC10YBcbiAgICAgY29uc3QgcHJvamVjdHMgPSBhd2FpdCBkYXRhYmFzZUFkYXB0ZXIuZ2V0QWxsUHJvamVjdHMoKTtcbiAgICAgY29uc3QgcHJvamVjdCA9IHByb2plY3RzLmZpbmQocCA9PiBwLmlkID09PSBwcm9qZWN0SWQpO1xuXG4gICAgIGlmICghcHJvamVjdCkge1xuICAgICAgIHJldHVybiB7IGhhc0FjY2VzczogZmFsc2UgfTtcbiAgICAgfVxuXG4gICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCwg0Y/QstC70Y/QtdGC0YHRjyDQu9C4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjCDQstC70LDQtNC10LvRjNGG0LXQvFxuICAgICBpZiAocHJvamVjdC5jcmVhdGVkX2J5ID09PSB1c2VySWQpIHtcbiAgICAgICByZXR1cm4geyBoYXNBY2Nlc3M6IHRydWUsIHVzZXJSb2xlOiAnb3duZXInIH07XG4gICAgIH1cblxuICAgICAvLyDQn9C+0LvRg9GH0LDQtdC8INGD0YfQsNGB0YLQvdC40LrQvtCyINC/0YDQvtC10LrRgtCwINGH0LXRgNC10LcgZ2V0VXNlclByb2plY3RzXG4gICAgIGNvbnN0IHVzZXJQcm9qZWN0cyA9IGF3YWl0IGRhdGFiYXNlQWRhcHRlci5nZXRVc2VyUHJvamVjdHModXNlcklkKTtcbiAgICAgY29uc3QgaGFzQWNjZXNzID0gdXNlclByb2plY3RzLnNvbWUoKHA6IGFueSkgPT4gcC5pZCA9PT0gcHJvamVjdElkKTtcblxuICAgIGlmICghaGFzQWNjZXNzKSB7XG4gICAgICAgcmV0dXJuIHsgaGFzQWNjZXNzOiBmYWxzZSB9O1xuICAgICB9XG5cbiAgICAgLy8g0JTQu9GPINGD0L/RgNC+0YnQtdC90LjRjywg0YHRh9C40YLQsNC10Lwg0YfRgtC+INGDINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDQtdGB0YLRjCDQtNC+0YHRgtGD0L8g0LrQsNC6INGD0YfQsNGB0YLQvdC40LpcbiAgICAgY29uc3QgdXNlclJvbGUgPSAnbWVtYmVyJztcblxuICAgICAvLyDQn9GA0L7QstC10YDQutCwINGC0YDQtdCx0YPQtdC80L7QuSDRgNC+0LvQuFxuICAgIGlmIChyZXF1aXJlZFJvbGUpIHtcbiAgICAgIGNvbnN0IHJvbGVIaWVyYXJjaHkgPSB7IG93bmVyOiAzLCBhZG1pbjogMiwgbWVtYmVyOiAxIH07XG4gICAgICBjb25zdCB1c2VyUm9sZUxldmVsID0gcm9sZUhpZXJhcmNoeVt1c2VyUm9sZSBhcyBrZXlvZiB0eXBlb2Ygcm9sZUhpZXJhcmNoeV0gfHwgMDtcbiAgICAgIGNvbnN0IHJlcXVpcmVkUm9sZUxldmVsID0gcm9sZUhpZXJhcmNoeVtyZXF1aXJlZFJvbGVdO1xuICAgICAgXG4gICAgICBpZiAodXNlclJvbGVMZXZlbCA8IHJlcXVpcmVkUm9sZUxldmVsKSB7XG4gICAgICAgIHJldHVybiB7IGhhc0FjY2VzczogZmFsc2UsIHVzZXJSb2xlIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgaGFzQWNjZXNzOiB0cnVlLCB1c2VyUm9sZSB9O1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign0J7RiNC40LHQutCwINC/0YDQvtCy0LXRgNC60Lgg0LTQvtGB0YLRg9C/0LAg0Log0L/RgNC+0LXQutGC0YM6JywgZXJyb3IpO1xuICAgIHJldHVybiB7IGhhc0FjY2VzczogZmFsc2UgfTtcbiAgfVxufVxuXG4vLyBNaWRkbGV3YXJlINC00LvRjyDQv9GA0L7QstC10YDQutC4INGA0L7Qu9C4INCw0LTQvNC40L3QuNGB0YLRgNCw0YLQvtGA0LBcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1aXJlQWRtaW4ocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgY29uc3QgYXV0aFJlc3VsdCA9IGF3YWl0IHZlcmlmeUF1dGgocmVxdWVzdCk7XG4gIFxuICBpZiAoIWF1dGhSZXN1bHQuc3VjY2Vzcykge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogYXV0aFJlc3VsdC5lcnJvciB9O1xuICB9XG5cbiAgaWYgKGF1dGhSZXN1bHQudXNlciEucm9sZSAhPT0gJ2FkbWluJykge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ9Ci0YDQtdCx0YPRjtGC0YHRjyDQv9GA0LDQstCwINCw0LTQvNC40L3QuNGB0YLRgNCw0YLQvtGA0LAnIH07XG4gIH1cblxuICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCB1c2VyOiBhdXRoUmVzdWx0LnVzZXIgfTtcbn0iXSwibmFtZXMiOlsiand0IiwiRGF0YWJhc2VBZGFwdGVyIiwiZGF0YWJhc2VBZGFwdGVyIiwiZ2V0SW5zdGFuY2UiLCJ2ZXJpZnlBdXRoIiwicmVxdWVzdCIsImNvbnNvbGUiLCJsb2ciLCJjb29raWVzIiwiZ2V0QWxsIiwibWFwIiwiYyIsIm5hbWUiLCJnZXQiLCJoZWFkZXJzIiwidG9rZW4iLCJ2YWx1ZSIsInJlcGxhY2UiLCJzdWJzdHJpbmciLCJzdWNjZXNzIiwiZXJyb3IiLCJkZWNvZGVkIiwiand0U2VjcmV0IiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJ2ZXJpZnkiLCJ1c2VySWQiLCJqd3RFcnJvciIsImluaXRpYWxpemUiLCJzZXNzaW9uIiwiZ2V0U2Vzc2lvbkJ5VG9rZW4iLCJ1c2VyX2lkIiwidXNlciIsImdldFVzZXJCeUlkIiwiaXNBcHByb3ZlZCIsInJvbGUiLCJ1bmRlZmluZWQiLCJCb29sZWFuIiwiU3RyaW5nIiwiaWQiLCJlbWFpbCIsInZlcmlmeVByb2plY3RBY2Nlc3MiLCJwcm9qZWN0SWQiLCJyZXF1aXJlZFJvbGUiLCJwcm9qZWN0cyIsImdldEFsbFByb2plY3RzIiwicHJvamVjdCIsImZpbmQiLCJwIiwiaGFzQWNjZXNzIiwiY3JlYXRlZF9ieSIsInVzZXJSb2xlIiwidXNlclByb2plY3RzIiwiZ2V0VXNlclByb2plY3RzIiwic29tZSIsInJvbGVIaWVyYXJjaHkiLCJvd25lciIsImFkbWluIiwibWVtYmVyIiwidXNlclJvbGVMZXZlbCIsInJlcXVpcmVkUm9sZUxldmVsIiwicmVxdWlyZUFkbWluIiwiYXV0aFJlc3VsdCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/database-adapter.ts":
/*!*************************************!*\
  !*** ./src/lib/database-adapter.ts ***!
  \*************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DatabaseAdapter: () => (/* binding */ DatabaseAdapter),\n/* harmony export */   dbAdapter: () => (/* binding */ dbAdapter)\n/* harmony export */ });\n/* harmony import */ var _postgresql_adapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./postgresql-adapter */ \"(rsc)/./src/lib/postgresql-adapter.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_postgresql_adapter__WEBPACK_IMPORTED_MODULE_0__]);\n_postgresql_adapter__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// =====================================================\n// ÐÐ”ÐÐŸÐ¢Ð•Ð  Ð”Ð›Ð¯ Ð ÐÐ‘ÐžÐ¢Ð« Ð¡ Ð‘ÐÐ—ÐÐœÐ˜ Ð”ÐÐÐÐ«Ð¥ (Ð˜Ð¡ÐŸÐ ÐÐ’Ð›Ð•ÐÐÐ«Ð™)\n// =====================================================\n\n// =====================================================\n// ÐšÐ›ÐÐ¡Ð¡ ÐÐ”ÐÐŸÐ¢Ð•Ð Ð Ð‘ÐÐ—Ð« Ð”ÐÐÐÐ«Ð¥\n// =====================================================\nclass DatabaseAdapter {\n    constructor(){\n        this.currentDatabase = 'postgresql';\n        this.isInitialized = false;\n        this.sqliteAdapter = null // Ð”Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ¸ Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÑ‚ÑÑ\n        ;\n        this.initializationPromise = null;\n        this.postgresqlAdapter = _postgresql_adapter__WEBPACK_IMPORTED_MODULE_0__.PostgreSQLAdapter.getInstance();\n        // SQLite Ð°Ð´Ð°Ð¿Ñ‚ÐµÑ€ Ð±ÑƒÐ´ÐµÑ‚ ÑÐ¾Ð·Ð´Ð°Ð½ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€Ð¸ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ÑÑ‚Ð¸\n        this.currentDatabase = 'postgresql'; // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ PostgreSQL Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ\n    }\n    static getInstance() {\n        if (!DatabaseAdapter.instance) {\n            DatabaseAdapter.instance = new DatabaseAdapter();\n        }\n        return DatabaseAdapter.instance;\n    }\n    /**\n   * Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð°Ð´Ð°Ð¿Ñ‚ÐµÑ€Ð°\n   */ async initialize() {\n        if (this.isInitialized) {\n            return;\n        }\n        if (this.initializationPromise) {\n            return this.initializationPromise;\n        }\n        this.initializationPromise = this.performInitialization();\n        return this.initializationPromise;\n    }\n    async performInitialization() {\n        const databasePriority = process.env.DATABASE_PRIORITY || 'postgresql';\n        console.log(`ðŸ”§ DATABASE_PRIORITY ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½ Ð²: ${databasePriority}`);\n        if (databasePriority === 'sqlite') {\n            try {\n                // Ð”Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¸Ñ€ÑƒÐµÐ¼ SQLite Ð°Ð´Ð°Ð¿Ñ‚ÐµÑ€\n                if (!this.sqliteAdapter) {\n                    const { SQLiteAdapter } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/uuid\"), __webpack_require__.e(\"_rsc_src_lib_sqlite-adapter_ts\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./sqlite-adapter */ \"(rsc)/./src/lib/sqlite-adapter.ts\"));\n                    this.sqliteAdapter = SQLiteAdapter.getInstance();\n                }\n                await this.sqliteAdapter.initialize();\n                this.currentDatabase = 'sqlite';\n                this.isInitialized = true;\n                console.log('âœ… Database Adapter Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½ Ñ SQLite');\n                return;\n            } catch (sqliteError) {\n                console.warn('âš ï¸ SQLite Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½, Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð°ÐµÐ¼ÑÑ Ð½Ð° PostgreSQL:', sqliteError);\n                // Fallback Ð½Ð° PostgreSQL\n                try {\n                    await this.postgresqlAdapter.initialize();\n                    this.currentDatabase = 'postgresql';\n                    this.isInitialized = true;\n                    console.log('âœ… Database Adapter Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½ Ñ PostgreSQL (fallback)');\n                    return;\n                } catch (postgresError) {\n                    console.error('âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð¾Ð±ÐµÐ¸Ñ… Ð±Ð°Ð· Ð´Ð°Ð½Ð½Ñ‹Ñ…:', {\n                        sqliteError,\n                        postgresError\n                    });\n                    this.initializationPromise = null;\n                    throw postgresError;\n                }\n            }\n        } else {\n            try {\n                // Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð¿Ñ‹Ñ‚Ð°ÐµÐ¼ÑÑ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ PostgreSQL\n                await this.postgresqlAdapter.initialize();\n                this.currentDatabase = 'postgresql';\n                this.isInitialized = true;\n                console.log('âœ… Database Adapter Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½ Ñ PostgreSQL');\n            } catch (postgresError) {\n                console.warn('âš ï¸ PostgreSQL Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½, Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð°ÐµÐ¼ÑÑ Ð½Ð° SQLite:', postgresError);\n                try {\n                    // Ð”Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¸Ñ€ÑƒÐµÐ¼ SQLite Ð°Ð´Ð°Ð¿Ñ‚ÐµÑ€ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€Ð¸ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ÑÑ‚Ð¸\n                    if (!this.sqliteAdapter) {\n                        const { SQLiteAdapter } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/uuid\"), __webpack_require__.e(\"_rsc_src_lib_sqlite-adapter_ts\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./sqlite-adapter */ \"(rsc)/./src/lib/sqlite-adapter.ts\"));\n                        this.sqliteAdapter = SQLiteAdapter.getInstance();\n                    }\n                    // Fallback Ð½Ð° SQLite\n                    await this.sqliteAdapter.initialize();\n                    this.currentDatabase = 'sqlite';\n                    this.isInitialized = true;\n                    console.log('âœ… Database Adapter Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½ Ñ SQLite (fallback)');\n                } catch (sqliteError) {\n                    console.error('âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð¾Ð±ÐµÐ¸Ñ… Ð±Ð°Ð· Ð´Ð°Ð½Ð½Ñ‹Ñ…:', {\n                        postgresError,\n                        sqliteError\n                    });\n                    this.initializationPromise = null;\n                    throw sqliteError;\n                }\n            }\n        }\n    }\n    /**\n   * ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð¿ÐµÑ€ÐµÐ´ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸ÐµÐ¼ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹\n   */ async ensureInitialized() {\n        if (!this.isInitialized) {\n            await this.initialize();\n        }\n        console.log(`ðŸ” DatabaseAdapter: Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ ${this.currentDatabase}`);\n    }\n    /**\n   * ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ Ð°Ð´Ð°Ð¿Ñ‚ÐµÑ€Ð° Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…\n   */ getCurrentAdapter() {\n        if (this.currentDatabase === 'sqlite') {\n            if (!this.sqliteAdapter) {\n                throw new Error('SQLite adapter not loaded');\n            }\n            return this.sqliteAdapter;\n        }\n        return this.postgresqlAdapter;\n    }\n    /**\n   * ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ ÑÑ‚Ð°Ñ‚ÑƒÑÐ° Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…\n   */ async getDatabaseStatus() {\n        const postgresql = await Promise.resolve(this.postgresqlAdapter.initialize()).then(()=>true).catch(()=>false);\n        let sqlite = false;\n        // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ SQLite Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ð°Ð´Ð°Ð¿Ñ‚ÐµÑ€ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½\n        if (this.sqliteAdapter) {\n            sqlite = await Promise.resolve(this.sqliteAdapter.initialize()).then(()=>true).catch(()=>false);\n        }\n        return {\n            postgresql,\n            sqlite,\n            current: this.currentDatabase\n        };\n    }\n    /**\n   * ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¹ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…\n   */ getCurrentDatabase() {\n        return this.currentDatabase;\n    }\n    // =====================================================\n    // ÐžÐŸÐ•Ð ÐÐ¦Ð˜Ð˜ Ð¡ ÐŸÐžÐ›Ð¬Ð—ÐžÐ’ÐÐ¢Ð•Ð›Ð¯ÐœÐ˜\n    // =====================================================\n    /**\n   * Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ\n   */ async createUser(userData) {\n        await this.ensureInitialized();\n        const adapter = this.getCurrentAdapter();\n        return await adapter.createUser(userData);\n    }\n    /**\n   * ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð¿Ð¾ ID\n   */ async getUserById(id) {\n        await this.ensureInitialized();\n        const adapter = this.getCurrentAdapter();\n        return await adapter.getUserById(id);\n    }\n    /**\n   * ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð¿Ð¾ email\n   */ async getUserByEmail(email) {\n        await this.ensureInitialized();\n        const adapter = this.getCurrentAdapter();\n        return await adapter.getUserByEmail(email);\n    }\n    /**\n   * ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð²ÑÐµÑ… Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹\n   */ async getAllUsers() {\n        await this.ensureInitialized();\n        const adapter = this.getCurrentAdapter();\n        return await adapter.getAllUsers();\n    }\n    /**\n   * ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ (Ð°Ð»Ð¸Ð°Ñ Ð´Ð»Ñ getAllUsers)\n   */ async getUsers() {\n        return await this.getAllUsers();\n    }\n    /**\n   * ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ\n   */ async updateUser(id, updates) {\n        await this.ensureInitialized();\n        const adapter = this.getCurrentAdapter();\n        return await adapter.updateUser(id, updates);\n    }\n    /**\n   * Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ\n   */ async deleteUser(id) {\n        await this.ensureInitialized();\n        const adapter = this.getCurrentAdapter();\n        return await adapter.deleteUser(id);\n    }\n    // =====================================================\n    // ÐœÐ•Ð¢ÐžÐ”Ð« Ð”Ð›Ð¯ Ð ÐÐ‘ÐžÐ¢Ð« Ð¡ Ð¡Ð•Ð¡Ð¡Ð˜Ð¯ÐœÐ˜\n    // =====================================================\n    async createSession(sessionData) {\n        await this.ensureInitialized();\n        const adapter = this.getCurrentAdapter();\n        return await adapter.createSession(sessionData);\n    }\n    async getSessionByToken(token) {\n        await this.ensureInitialized();\n        const adapter = this.getCurrentAdapter();\n        return await adapter.getSessionByToken(token);\n    }\n    async deleteSession(token) {\n        await this.ensureInitialized();\n        const adapter = this.getCurrentAdapter();\n        return await adapter.deleteSession(token);\n    }\n    async deleteExpiredSessions() {\n        await this.ensureInitialized();\n        const adapter = this.getCurrentAdapter();\n        return await adapter.deleteExpiredSessions();\n    }\n    // =====================================================\n    // ÐžÐŸÐ•Ð ÐÐ¦Ð˜Ð˜ Ð¡ ÐŸÐ ÐžÐ•ÐšÐ¢ÐÐœÐ˜\n    // =====================================================\n    /**\n   * Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\n   */ async createProject(projectData) {\n        await this.ensureInitialized();\n        return this.currentDatabase === 'sqlite' ? await this.sqliteAdapter.createProject(projectData) : await this.postgresqlAdapter.createProject({\n            name: projectData.name,\n            description: projectData.description || '',\n            created_by: projectData.created_by,\n            color: projectData.color,\n            icon_url: projectData.icon_url,\n            telegram_chat_id: projectData.telegram_chat_id,\n            telegram_topic_id: projectData.telegram_topic_id\n        });\n    }\n    /**\n   * ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ð¿Ð¾ ID\n   */ async getProjectById(id) {\n        await this.ensureInitialized();\n        return this.currentDatabase === 'sqlite' ? this.sqliteAdapter.getProjectById(id) : this.postgresqlAdapter.getProjectById(id);\n    }\n    /**\n   * ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð²ÑÐµÑ… Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¾Ð²\n   */ async getAllProjects() {\n        await this.ensureInitialized();\n        return this.currentDatabase === 'sqlite' ? this.sqliteAdapter.getAllProjects() : this.postgresqlAdapter.getAllProjects();\n    }\n    /**\n   * ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¾Ð² Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ\n   */ async getUserProjects(userId) {\n        await this.ensureInitialized();\n        return this.currentDatabase === 'sqlite' ? this.sqliteAdapter.getUserProjects(userId) : this.postgresqlAdapter.getUserProjects(userId);\n    }\n    /**\n   * ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¾Ð² Ð¿Ð¾ ID ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»Ñ\n   */ async getProjectsByCreatorId(creatorId) {\n        await this.ensureInitialized();\n        return this.currentDatabase === 'sqlite' ? this.sqliteAdapter.getUserProjects(creatorId) : this.postgresqlAdapter.getUserProjects(creatorId);\n    }\n    /**\n   * ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ðº Ð¿Ñ€Ð¾ÐµÐºÑ‚Ñƒ\n   */ async hasProjectAccess(userId, projectId) {\n        await this.ensureInitialized();\n        return this.currentDatabase === 'sqlite' ? this.sqliteAdapter.hasProjectAccess(userId.toString(), projectId) : this.postgresqlAdapter.hasProjectAccess(userId.toString(), projectId);\n    }\n    /**\n   * ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\n   */ async updateProject(id, updates) {\n        await this.ensureInitialized();\n        return this.currentDatabase === 'sqlite' ? this.sqliteAdapter.updateProject(id, updates) : this.postgresqlAdapter.updateProject(id, updates);\n    }\n    /**\n   * Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\n   */ async deleteProject(id) {\n        await this.ensureInitialized();\n        return this.currentDatabase === 'sqlite' ? this.sqliteAdapter.deleteProject(id) : this.postgresqlAdapter.deleteProject(id);\n    }\n    // =====================================================\n    // ÐžÐŸÐ•Ð ÐÐ¦Ð˜Ð˜ Ð¡ Ð”ÐžÐ¡ÐšÐÐœÐ˜\n    // =====================================================\n    /**\n   * Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð´Ð¾ÑÐºÐ¸\n   */ async createBoard(boardData) {\n        await this.ensureInitialized();\n        return this.currentDatabase === 'sqlite' ? await this.sqliteAdapter.createBoard(boardData) : await this.postgresqlAdapter.createBoard(boardData);\n    }\n    /**\n   * ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð´Ð¾ÑÐºÐ¸ Ð¿Ð¾ ID\n   */ async getBoardById(id) {\n        await this.ensureInitialized();\n        return this.currentDatabase === 'sqlite' ? await this.sqliteAdapter.getBoardById(id) : await this.postgresqlAdapter.getBoardById(id);\n    }\n    /**\n   * ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð´Ð¾ÑÐ¾Ðº Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\n   */ async getProjectBoards(projectId) {\n        await this.ensureInitialized();\n        return this.currentDatabase === 'sqlite' ? await this.sqliteAdapter.getProjectBoards(projectId) : await this.postgresqlAdapter.getBoardsByProjectId(projectId);\n    }\n    /**\n   * Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð´Ð¾ÑÐºÐ¸\n   */ async deleteBoard(id) {\n        await this.ensureInitialized();\n        return this.currentDatabase === 'sqlite' ? await this.sqliteAdapter.deleteBoard(id) : await this.postgresqlAdapter.deleteBoard(id);\n    }\n    // =====================================================\n    // ÐžÐŸÐ•Ð ÐÐ¦Ð˜Ð˜ Ð¡ ÐšÐžÐ›ÐžÐÐšÐÐœÐ˜\n    // =====================================================\n    /**\n   * ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð»Ð¾Ð½Ð¾Ðº Ð´Ð¾ÑÐºÐ¸\n   */ async getBoardColumns(boardId) {\n        await this.ensureInitialized();\n        return this.currentDatabase === 'sqlite' ? await this.sqliteAdapter.getBoardColumns(boardId) : await this.postgresqlAdapter.getBoardColumns(boardId);\n    }\n    /**\n   * Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÐºÐ¾Ð»Ð¾Ð½ÐºÐ¸\n   */ async createColumn(columnData) {\n        await this.ensureInitialized();\n        return this.currentDatabase === 'sqlite' ? await this.sqliteAdapter.createColumn(columnData) : await this.postgresqlAdapter.createColumn(columnData.name || columnData.title, columnData.board_id.toString(), columnData.position || 0, columnData.color, columnData.created_by);\n    }\n    /**\n   * Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð»Ð¾Ð½ÐºÐ¸\n   */ async deleteColumn(id) {\n        await this.ensureInitialized();\n        return this.currentDatabase === 'sqlite' ? await this.sqliteAdapter.deleteColumn(id) : await this.postgresqlAdapter.deleteColumn(id);\n    }\n    // =====================================================\n    // ÐžÐŸÐ•Ð ÐÐ¦Ð˜Ð˜ Ð¡ Ð—ÐÐ”ÐÐ§ÐÐœÐ˜\n    // =====================================================\n    /**\n   * Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸\n   */ async createTask(taskData) {\n        await this.ensureInitialized();\n        return this.currentDatabase === 'sqlite' ? await this.sqliteAdapter.createTask(taskData) : await this.postgresqlAdapter.createTask({\n            title: taskData.title,\n            description: taskData.description || '',\n            column_id: taskData.column_id,\n            assignee_id: taskData.assignee_id,\n            priority: taskData.priority || 'medium',\n            position: taskData.position || 0,\n            status: taskData.status || 'todo',\n            project_id: taskData.project_id,\n            board_id: taskData.board_id,\n            reporter_id: taskData.creator_id\n        });\n    }\n    /**\n   * ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð·Ð°Ð´Ð°Ñ‡ ÐºÐ¾Ð»Ð¾Ð½ÐºÐ¸\n   */ async getColumnTasks(columnId) {\n        await this.ensureInitialized();\n        return this.currentDatabase === 'sqlite' ? await this.sqliteAdapter.getColumnTasks(columnId) : await this.postgresqlAdapter.getColumnTasks(columnId);\n    }\n    /**\n   * Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸\n   */ async deleteTask(id) {\n        await this.ensureInitialized();\n        return this.currentDatabase === 'sqlite' ? await this.sqliteAdapter.deleteTask(id) : await this.postgresqlAdapter.deleteTask(id);\n    }\n    /**\n   * Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ ÑÑ‹Ñ€Ð¾Ð³Ð¾ SQL Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° (Ð´Ð»Ñ ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ñ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸ÑÐ¼Ð¸)\n   */ async query(sql, params) {\n        await this.ensureInitialized();\n        if (this.currentDatabase === 'sqlite') {\n            const result = await this.sqliteAdapter.query(sql, params);\n            return result.rows;\n        } else {\n            const result = await this.postgresqlAdapter.query(sql, params);\n            return result.rows;\n        }\n    }\n}\n// Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ ÐµÐ´Ð¸Ð½ÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ð³Ð¾ ÑÐºÐ·ÐµÐ¼Ð¿Ð»ÑÑ€Ð°\nconst dbAdapter = DatabaseAdapter.getInstance();\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxTQUFTLE1BQU0sSUFBSSxDQUFDL0YsaUJBQWlCLENBQUM0RixLQUFLLENBQUNDLEtBQUtDO1lBQ3ZELE9BQU9DLE9BQU9DLElBQUk7UUFDcEI7SUFDRjtBQUNGO0FBRUEsbUNBQW1DO0FBQzVCLE1BQU1DLFlBQVl0RyxnQkFBZ0JNLFdBQVcsR0FBRyIsInNvdXJjZXMiOlsiRTpcXFByb2plY3RzXFxlbmNvcmUtdGFza3NcXGVuY29yZS10YXNrcy1tYWluXFxzcmNcXGxpYlxcZGF0YWJhc2UtYWRhcHRlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8g0JDQlNCQ0J/QotCV0KAg0JTQm9CvINCg0JDQkdCe0KLQqyDQoSDQkdCQ0JfQkNCc0Jgg0JTQkNCd0J3Qq9ClICjQmNCh0J/QoNCQ0JLQm9CV0J3QndCr0JkpXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbXBvcnQgeyBVc2VyLCBQcm9qZWN0LCBCb2FyZCwgQ29sdW1uLCBUYXNrLCBTZXNzaW9uIH0gZnJvbSAnQC90eXBlcyc7XG5pbXBvcnQgeyBQb3N0Z3JlU1FMQWRhcHRlciB9IGZyb20gJy4vcG9zdGdyZXNxbC1hZGFwdGVyJztcbi8vIFNRTGl0ZSDQsNC00LDQv9GC0LXRgCDQuNC80L/QvtGA0YLQuNGA0YPQtdGC0YHRjyDQtNC40L3QsNC80LjRh9C10YHQutC4INGC0L7Qu9GM0LrQviDQv9GA0Lgg0L3QtdC+0LHRhdC+0LTQuNC80L7RgdGC0Lhcbi8vIGltcG9ydCB7IFNRTGl0ZUFkYXB0ZXIgfSBmcm9tICcuL3NxbGl0ZS1hZGFwdGVyJztcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vINCi0JjQn9CrINCU0JDQndCd0KvQpVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IHR5cGUgRGF0YWJhc2VUeXBlID0gJ3Bvc3RncmVzcWwnIHwgJ3NxbGl0ZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGF0YWJhc2VTdGF0dXMge1xuICBwb3N0Z3Jlc3FsOiBib29sZWFuO1xuICBzcWxpdGU6IGJvb2xlYW47XG4gIGN1cnJlbnQ6IERhdGFiYXNlVHlwZTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vINCa0JvQkNCh0KEg0JDQlNCQ0J/QotCV0KDQkCDQkdCQ0JfQqyDQlNCQ0J3QndCr0KVcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBjbGFzcyBEYXRhYmFzZUFkYXB0ZXIge1xuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogRGF0YWJhc2VBZGFwdGVyO1xuICBwcml2YXRlIGN1cnJlbnREYXRhYmFzZTogRGF0YWJhc2VUeXBlID0gJ3Bvc3RncmVzcWwnO1xuICBwcml2YXRlIGlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBwb3N0Z3Jlc3FsQWRhcHRlcjogUG9zdGdyZVNRTEFkYXB0ZXI7XG4gIHByaXZhdGUgc3FsaXRlQWRhcHRlcjogYW55ID0gbnVsbDsgLy8g0JTQuNC90LDQvNC40YfQtdGB0LrQuCDQt9Cw0LPRgNGD0LbQsNC10YLRgdGPXG4gIHByaXZhdGUgaW5pdGlhbGl6YXRpb25Qcm9taXNlOiBQcm9taXNlPHZvaWQ+IHwgbnVsbCA9IG51bGw7XG5cbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnBvc3RncmVzcWxBZGFwdGVyID0gUG9zdGdyZVNRTEFkYXB0ZXIuZ2V0SW5zdGFuY2UoKTtcbiAgICAvLyBTUUxpdGUg0LDQtNCw0L/RgtC10YAg0LHRg9C00LXRgiDRgdC+0LfQtNCw0L0g0YLQvtC70YzQutC+INC/0YDQuCDQvdC10L7QsdGF0L7QtNC40LzQvtGB0YLQuFxuICAgIHRoaXMuY3VycmVudERhdGFiYXNlID0gJ3Bvc3RncmVzcWwnOyAvLyDQmNGB0L/QvtC70YzQt9GD0LXQvCBQb3N0Z3JlU1FMINC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOXG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldEluc3RhbmNlKCk6IERhdGFiYXNlQWRhcHRlciB7XG4gICAgaWYgKCFEYXRhYmFzZUFkYXB0ZXIuaW5zdGFuY2UpIHtcbiAgICAgIERhdGFiYXNlQWRhcHRlci5pbnN0YW5jZSA9IG5ldyBEYXRhYmFzZUFkYXB0ZXIoKTtcbiAgICB9XG4gICAgcmV0dXJuIERhdGFiYXNlQWRhcHRlci5pbnN0YW5jZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQsNC00LDQv9GC0LXRgNCwXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaW5pdGlhbGl6YXRpb25Qcm9taXNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5pbml0aWFsaXphdGlvblByb21pc2U7XG4gICAgfVxuXG4gICAgdGhpcy5pbml0aWFsaXphdGlvblByb21pc2UgPSB0aGlzLnBlcmZvcm1Jbml0aWFsaXphdGlvbigpO1xuICAgIHJldHVybiB0aGlzLmluaXRpYWxpemF0aW9uUHJvbWlzZTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcGVyZm9ybUluaXRpYWxpemF0aW9uKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGRhdGFiYXNlUHJpb3JpdHkgPSBwcm9jZXNzLmVudi5EQVRBQkFTRV9QUklPUklUWSB8fCAncG9zdGdyZXNxbCc7XG4gICAgY29uc29sZS5sb2coYPCflKcgREFUQUJBU0VfUFJJT1JJVFkg0YPRgdGC0LDQvdC+0LLQu9C10L0g0LI6ICR7ZGF0YWJhc2VQcmlvcml0eX1gKTtcbiAgICBcbiAgICBpZiAoZGF0YWJhc2VQcmlvcml0eSA9PT0gJ3NxbGl0ZScpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vINCU0LjQvdCw0LzQuNGH0LXRgdC60Lgg0LjQvNC/0L7RgNGC0LjRgNGD0LXQvCBTUUxpdGUg0LDQtNCw0L/RgtC10YBcbiAgICAgICAgaWYgKCF0aGlzLnNxbGl0ZUFkYXB0ZXIpIHtcbiAgICAgICAgICBjb25zdCB7IFNRTGl0ZUFkYXB0ZXIgfSA9IGF3YWl0IGltcG9ydCgnLi9zcWxpdGUtYWRhcHRlcicpO1xuICAgICAgICAgIHRoaXMuc3FsaXRlQWRhcHRlciA9IFNRTGl0ZUFkYXB0ZXIuZ2V0SW5zdGFuY2UoKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLnNxbGl0ZUFkYXB0ZXIuaW5pdGlhbGl6ZSgpO1xuICAgICAgICB0aGlzLmN1cnJlbnREYXRhYmFzZSA9ICdzcWxpdGUnO1xuICAgICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICBjb25zb2xlLmxvZygn4pyFIERhdGFiYXNlIEFkYXB0ZXIg0LjQvdC40YbQuNCw0LvQuNC30LjRgNC+0LLQsNC9INGBIFNRTGl0ZScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGNhdGNoIChzcWxpdGVFcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBTUUxpdGUg0L3QtdC00L7RgdGC0YPQv9C10L0sINC/0LXRgNC10LrQu9GO0YfQsNC10LzRgdGPINC90LAgUG9zdGdyZVNRTDonLCBzcWxpdGVFcnJvcik7XG4gICAgICAgIC8vIEZhbGxiYWNrINC90LAgUG9zdGdyZVNRTFxuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHRoaXMucG9zdGdyZXNxbEFkYXB0ZXIuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgIHRoaXMuY3VycmVudERhdGFiYXNlID0gJ3Bvc3RncmVzcWwnO1xuICAgICAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSBEYXRhYmFzZSBBZGFwdGVyINC40L3QuNGG0LjQsNC70LjQt9C40YDQvtCy0LDQvSDRgSBQb3N0Z3JlU1FMIChmYWxsYmFjayknKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gY2F0Y2ggKHBvc3RncmVzRXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwg0J7RiNC40LHQutCwINC40L3QuNGG0LjQsNC70LjQt9Cw0YbQuNC4INC+0LHQtdC40YUg0LHQsNC3INC00LDQvdC90YvRhTonLCB7IHNxbGl0ZUVycm9yLCBwb3N0Z3Jlc0Vycm9yIH0pO1xuICAgICAgICAgIHRoaXMuaW5pdGlhbGl6YXRpb25Qcm9taXNlID0gbnVsbDtcbiAgICAgICAgICB0aHJvdyBwb3N0Z3Jlc0Vycm9yO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vINCh0L3QsNGH0LDQu9CwINC/0YvRgtCw0LXQvNGB0Y8g0LjRgdC/0L7Qu9GM0LfQvtCy0LDRgtGMIFBvc3RncmVTUUxcbiAgICAgICAgYXdhaXQgdGhpcy5wb3N0Z3Jlc3FsQWRhcHRlci5pbml0aWFsaXplKCk7XG4gICAgICAgIHRoaXMuY3VycmVudERhdGFiYXNlID0gJ3Bvc3RncmVzcWwnO1xuICAgICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICBjb25zb2xlLmxvZygn4pyFIERhdGFiYXNlIEFkYXB0ZXIg0LjQvdC40YbQuNCw0LvQuNC30LjRgNC+0LLQsNC9INGBIFBvc3RncmVTUUwnKTtcbiAgICAgIH0gY2F0Y2ggKHBvc3RncmVzRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gUG9zdGdyZVNRTCDQvdC10LTQvtGB0YLRg9C/0LXQvSwg0L/QtdGA0LXQutC70Y7Rh9Cw0LXQvNGB0Y8g0L3QsCBTUUxpdGU6JywgcG9zdGdyZXNFcnJvcik7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8g0JTQuNC90LDQvNC40YfQtdGB0LrQuCDQuNC80L/QvtGA0YLQuNGA0YPQtdC8IFNRTGl0ZSDQsNC00LDQv9GC0LXRgCDRgtC+0LvRjNC60L4g0L/RgNC4INC90LXQvtCx0YXQvtC00LjQvNC+0YHRgtC4XG4gICAgICAgICAgaWYgKCF0aGlzLnNxbGl0ZUFkYXB0ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgU1FMaXRlQWRhcHRlciB9ID0gYXdhaXQgaW1wb3J0KCcuL3NxbGl0ZS1hZGFwdGVyJyk7XG4gICAgICAgICAgICB0aGlzLnNxbGl0ZUFkYXB0ZXIgPSBTUUxpdGVBZGFwdGVyLmdldEluc3RhbmNlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIEZhbGxiYWNrINC90LAgU1FMaXRlXG4gICAgICAgICAgYXdhaXQgdGhpcy5zcWxpdGVBZGFwdGVyLmluaXRpYWxpemUoKTtcbiAgICAgICAgICB0aGlzLmN1cnJlbnREYXRhYmFzZSA9ICdzcWxpdGUnO1xuICAgICAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSBEYXRhYmFzZSBBZGFwdGVyINC40L3QuNGG0LjQsNC70LjQt9C40YDQvtCy0LDQvSDRgSBTUUxpdGUgKGZhbGxiYWNrKScpO1xuICAgICAgICB9IGNhdGNoIChzcWxpdGVFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCDQntGI0LjQsdC60LAg0LjQvdC40YbQuNCw0LvQuNC30LDRhtC40Lgg0L7QsdC10LjRhSDQsdCw0Lcg0LTQsNC90L3Ri9GFOicsIHsgcG9zdGdyZXNFcnJvciwgc3FsaXRlRXJyb3IgfSk7XG4gICAgICAgICAgdGhpcy5pbml0aWFsaXphdGlvblByb21pc2UgPSBudWxsO1xuICAgICAgICAgIHRocm93IHNxbGl0ZUVycm9yO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqINCf0YDQvtCy0LXRgNC60LAg0LjQvdC40YbQuNCw0LvQuNC30LDRhtC40Lgg0L/QtdGA0LXQtCDQstGL0L/QvtC70L3QtdC90LjQtdC8INC+0L/QtdGA0LDRhtC40LlcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZW5zdXJlSW5pdGlhbGl6ZWQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLmlzSW5pdGlhbGl6ZWQpIHtcbiAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyhg8J+UjSBEYXRhYmFzZUFkYXB0ZXI6INC40YHQv9C+0LvRjNC30YPQtdGC0YHRjyAke3RoaXMuY3VycmVudERhdGFiYXNlfWApO1xuICB9XG5cbiAgLyoqXG4gICAqINCf0L7Qu9GD0YfQtdC90LjQtSDRgtC10LrRg9GJ0LXQs9C+INCw0LTQsNC/0YLQtdGA0LAg0LHQsNC30Ysg0LTQsNC90L3Ri9GFXG4gICAqL1xuICBwcml2YXRlIGdldEN1cnJlbnRBZGFwdGVyKCkge1xuICAgIGlmICh0aGlzLmN1cnJlbnREYXRhYmFzZSA9PT0gJ3NxbGl0ZScpIHtcbiAgICAgIGlmICghdGhpcy5zcWxpdGVBZGFwdGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignU1FMaXRlIGFkYXB0ZXIgbm90IGxvYWRlZCcpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuc3FsaXRlQWRhcHRlcjtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucG9zdGdyZXNxbEFkYXB0ZXI7XG4gIH1cblxuICAvKipcbiAgICog0J/QvtC70YPRh9C10L3QuNC1INGB0YLQsNGC0YPRgdCwINCx0LDQt9GLINC00LDQvdC90YvRhVxuICAgKi9cbiAgcHVibGljIGFzeW5jIGdldERhdGFiYXNlU3RhdHVzKCk6IFByb21pc2U8RGF0YWJhc2VTdGF0dXM+IHtcbiAgICBjb25zdCBwb3N0Z3Jlc3FsID0gYXdhaXQgUHJvbWlzZS5yZXNvbHZlKHRoaXMucG9zdGdyZXNxbEFkYXB0ZXIuaW5pdGlhbGl6ZSgpKS50aGVuKCgpID0+IHRydWUpLmNhdGNoKCgpID0+IGZhbHNlKTtcbiAgICBsZXQgc3FsaXRlID0gZmFsc2U7XG4gICAgXG4gICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8IFNRTGl0ZSDRgtC+0LvRjNC60L4g0LXRgdC70Lgg0LDQtNCw0L/RgtC10YAg0LfQsNCz0YDRg9C20LXQvVxuICAgIGlmICh0aGlzLnNxbGl0ZUFkYXB0ZXIpIHtcbiAgICAgIHNxbGl0ZSA9IGF3YWl0IFByb21pc2UucmVzb2x2ZSh0aGlzLnNxbGl0ZUFkYXB0ZXIuaW5pdGlhbGl6ZSgpKS50aGVuKCgpID0+IHRydWUpLmNhdGNoKCgpID0+IGZhbHNlKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHBvc3RncmVzcWwsXG4gICAgICBzcWxpdGUsXG4gICAgICBjdXJyZW50OiB0aGlzLmN1cnJlbnREYXRhYmFzZVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICog0J/QvtC70YPRh9C10L3QuNC1INGC0LXQutGD0YnQtdC5INCx0LDQt9GLINC00LDQvdC90YvRhVxuICAgKi9cbiAgcHVibGljIGdldEN1cnJlbnREYXRhYmFzZSgpOiBEYXRhYmFzZVR5cGUge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnREYXRhYmFzZTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vINCe0J/QldCg0JDQptCY0Jgg0KEg0J/QntCb0KzQl9Ce0JLQkNCi0JXQm9Cv0JzQmFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiDQodC+0LfQtNCw0L3QuNC1INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xuICAgKi9cbiAgcHVibGljIGFzeW5jIGNyZWF0ZVVzZXIodXNlckRhdGE6IE9taXQ8VXNlciwgJ2lkJyB8ICdjcmVhdGVkX2F0JyB8ICd1cGRhdGVkX2F0Jz4pOiBQcm9taXNlPFVzZXI+IHtcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUluaXRpYWxpemVkKCk7XG4gICAgY29uc3QgYWRhcHRlciA9IHRoaXMuZ2V0Q3VycmVudEFkYXB0ZXIoKTtcbiAgICByZXR1cm4gYXdhaXQgYWRhcHRlci5jcmVhdGVVc2VyKHVzZXJEYXRhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDQn9C+0LvRg9GH0LXQvdC40LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPINC/0L4gSURcbiAgICovXG4gIHB1YmxpYyBhc3luYyBnZXRVc2VyQnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlSW5pdGlhbGl6ZWQoKTtcbiAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5nZXRDdXJyZW50QWRhcHRlcigpO1xuICAgIHJldHVybiBhd2FpdCBhZGFwdGVyLmdldFVzZXJCeUlkKGlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDQn9C+0LvRg9GH0LXQvdC40LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPINC/0L4gZW1haWxcbiAgICovXG4gIHB1YmxpYyBhc3luYyBnZXRVc2VyQnlFbWFpbChlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlSW5pdGlhbGl6ZWQoKTtcbiAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5nZXRDdXJyZW50QWRhcHRlcigpO1xuICAgIHJldHVybiBhd2FpdCBhZGFwdGVyLmdldFVzZXJCeUVtYWlsKGVtYWlsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDQn9C+0LvRg9GH0LXQvdC40LUg0LLRgdC10YUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C10LlcbiAgICovXG4gIHB1YmxpYyBhc3luYyBnZXRBbGxVc2VycygpOiBQcm9taXNlPFVzZXJbXT4ge1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlSW5pdGlhbGl6ZWQoKTtcbiAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5nZXRDdXJyZW50QWRhcHRlcigpO1xuICAgIHJldHVybiBhd2FpdCBhZGFwdGVyLmdldEFsbFVzZXJzKCk7XG4gIH1cblxuICAvKipcbiAgICog0J/QvtC70YPRh9C10L3QuNC1INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC5ICjQsNC70LjQsNGBINC00LvRjyBnZXRBbGxVc2VycylcbiAgICovXG4gIHB1YmxpYyBhc3luYyBnZXRVc2VycygpOiBQcm9taXNlPFVzZXJbXT4ge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmdldEFsbFVzZXJzKCk7XG4gIH1cblxuICAvKipcbiAgICog0J7QsdC90L7QstC70LXQvdC40LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgdXBkYXRlVXNlcihpZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPFVzZXI+KTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlSW5pdGlhbGl6ZWQoKTtcbiAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5nZXRDdXJyZW50QWRhcHRlcigpO1xuICAgIHJldHVybiBhd2FpdCBhZGFwdGVyLnVwZGF0ZVVzZXIoaWQsIHVwZGF0ZXMpO1xuICB9XG5cbiAgLyoqXG4gICAqINCj0LTQsNC70LXQvdC40LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZGVsZXRlVXNlcihpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgYXdhaXQgdGhpcy5lbnN1cmVJbml0aWFsaXplZCgpO1xuICAgIGNvbnN0IGFkYXB0ZXIgPSB0aGlzLmdldEN1cnJlbnRBZGFwdGVyKCk7XG4gICAgcmV0dXJuIGF3YWl0IGFkYXB0ZXIuZGVsZXRlVXNlcihpZCk7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyDQnNCV0KLQntCU0Ksg0JTQm9CvINCg0JDQkdCe0KLQqyDQoSDQodCV0KHQodCY0K/QnNCYXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgcHVibGljIGFzeW5jIGNyZWF0ZVNlc3Npb24oc2Vzc2lvbkRhdGE6IE9taXQ8U2Vzc2lvbiwgJ2lkJyB8ICdjcmVhdGVkX2F0JyB8ICd1cGRhdGVkX2F0Jz4pOiBQcm9taXNlPFNlc3Npb24+IHtcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUluaXRpYWxpemVkKCk7XG4gICAgY29uc3QgYWRhcHRlciA9IHRoaXMuZ2V0Q3VycmVudEFkYXB0ZXIoKTtcbiAgICByZXR1cm4gYXdhaXQgYWRhcHRlci5jcmVhdGVTZXNzaW9uKHNlc3Npb25EYXRhKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRTZXNzaW9uQnlUb2tlbih0b2tlbjogc3RyaW5nKTogUHJvbWlzZTxTZXNzaW9uIHwgbnVsbD4ge1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlSW5pdGlhbGl6ZWQoKTtcbiAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5nZXRDdXJyZW50QWRhcHRlcigpO1xuICAgIHJldHVybiBhd2FpdCBhZGFwdGVyLmdldFNlc3Npb25CeVRva2VuKHRva2VuKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBkZWxldGVTZXNzaW9uKHRva2VuOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUluaXRpYWxpemVkKCk7XG4gICAgY29uc3QgYWRhcHRlciA9IHRoaXMuZ2V0Q3VycmVudEFkYXB0ZXIoKTtcbiAgICByZXR1cm4gYXdhaXQgYWRhcHRlci5kZWxldGVTZXNzaW9uKHRva2VuKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBkZWxldGVFeHBpcmVkU2Vzc2lvbnMoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUluaXRpYWxpemVkKCk7XG4gICAgY29uc3QgYWRhcHRlciA9IHRoaXMuZ2V0Q3VycmVudEFkYXB0ZXIoKTtcbiAgICByZXR1cm4gYXdhaXQgYWRhcHRlci5kZWxldGVFeHBpcmVkU2Vzc2lvbnMoKTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vINCe0J/QldCg0JDQptCY0Jgg0KEg0J/QoNCe0JXQmtCi0JDQnNCYXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqINCh0L7Qt9C00LDQvdC40LUg0L/RgNC+0LXQutGC0LBcbiAgICovXG4gIHB1YmxpYyBhc3luYyBjcmVhdGVQcm9qZWN0KHByb2plY3REYXRhOiBPbWl0PFByb2plY3QsICdpZCcgfCAnY3JlYXRlZF9hdCcgfCAndXBkYXRlZF9hdCc+KTogUHJvbWlzZTxQcm9qZWN0PiB7XG4gICAgYXdhaXQgdGhpcy5lbnN1cmVJbml0aWFsaXplZCgpO1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnREYXRhYmFzZSA9PT0gJ3NxbGl0ZScgPyBcbiAgICAgIGF3YWl0IHRoaXMuc3FsaXRlQWRhcHRlci5jcmVhdGVQcm9qZWN0KHByb2plY3REYXRhKSA6IFxuICAgICAgYXdhaXQgdGhpcy5wb3N0Z3Jlc3FsQWRhcHRlci5jcmVhdGVQcm9qZWN0KHtcbiAgICAgICAgbmFtZTogcHJvamVjdERhdGEubmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb246IHByb2plY3REYXRhLmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICBjcmVhdGVkX2J5OiBwcm9qZWN0RGF0YS5jcmVhdGVkX2J5LFxuICAgICAgICBjb2xvcjogcHJvamVjdERhdGEuY29sb3IsXG4gICAgICAgIGljb25fdXJsOiBwcm9qZWN0RGF0YS5pY29uX3VybCxcbiAgICAgICAgdGVsZWdyYW1fY2hhdF9pZDogcHJvamVjdERhdGEudGVsZWdyYW1fY2hhdF9pZCxcbiAgICAgICAgdGVsZWdyYW1fdG9waWNfaWQ6IHByb2plY3REYXRhLnRlbGVncmFtX3RvcGljX2lkXG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDQn9C+0LvRg9GH0LXQvdC40LUg0L/RgNC+0LXQutGC0LAg0L/QviBJRFxuICAgKi9cbiAgcHVibGljIGFzeW5jIGdldFByb2plY3RCeUlkKGlkOiBzdHJpbmcpOiBQcm9taXNlPFByb2plY3QgfCBudWxsPiB7XG4gICAgYXdhaXQgdGhpcy5lbnN1cmVJbml0aWFsaXplZCgpO1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnREYXRhYmFzZSA9PT0gJ3NxbGl0ZScgPyB0aGlzLnNxbGl0ZUFkYXB0ZXIuZ2V0UHJvamVjdEJ5SWQoaWQpIDogdGhpcy5wb3N0Z3Jlc3FsQWRhcHRlci5nZXRQcm9qZWN0QnlJZChpZCk7XG4gIH1cblxuICAvKipcbiAgICog0J/QvtC70YPRh9C10L3QuNC1INCy0YHQtdGFINC/0YDQvtC10LrRgtC+0LJcbiAgICovXG4gIHB1YmxpYyBhc3luYyBnZXRBbGxQcm9qZWN0cygpOiBQcm9taXNlPFByb2plY3RbXT4ge1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlSW5pdGlhbGl6ZWQoKTtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50RGF0YWJhc2UgPT09ICdzcWxpdGUnID8gdGhpcy5zcWxpdGVBZGFwdGVyLmdldEFsbFByb2plY3RzKCkgOiB0aGlzLnBvc3RncmVzcWxBZGFwdGVyLmdldEFsbFByb2plY3RzKCk7XG4gIH1cblxuICAvKipcbiAgICog0J/QvtC70YPRh9C10L3QuNC1INC/0YDQvtC10LrRgtC+0LIg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZ2V0VXNlclByb2plY3RzKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxQcm9qZWN0W10+IHtcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUluaXRpYWxpemVkKCk7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudERhdGFiYXNlID09PSAnc3FsaXRlJyA/IHRoaXMuc3FsaXRlQWRhcHRlci5nZXRVc2VyUHJvamVjdHModXNlcklkKSA6IHRoaXMucG9zdGdyZXNxbEFkYXB0ZXIuZ2V0VXNlclByb2plY3RzKHVzZXJJZCk7XG4gIH1cblxuICAvKipcbiAgICog0J/QvtC70YPRh9C10L3QuNC1INC/0YDQvtC10LrRgtC+0LIg0L/QviBJRCDRgdC+0LfQtNCw0YLQtdC70Y9cbiAgICovXG4gIHB1YmxpYyBhc3luYyBnZXRQcm9qZWN0c0J5Q3JlYXRvcklkKGNyZWF0b3JJZDogc3RyaW5nKTogUHJvbWlzZTxQcm9qZWN0W10+IHtcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUluaXRpYWxpemVkKCk7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudERhdGFiYXNlID09PSAnc3FsaXRlJyA/IHRoaXMuc3FsaXRlQWRhcHRlci5nZXRVc2VyUHJvamVjdHMoY3JlYXRvcklkKSA6IHRoaXMucG9zdGdyZXNxbEFkYXB0ZXIuZ2V0VXNlclByb2plY3RzKGNyZWF0b3JJZCk7XG4gIH1cblxuICAvKipcbiAgICog0J/RgNC+0LLQtdGA0LrQsCDQtNC+0YHRgtGD0L/QsCDQuiDQv9GA0L7QtdC60YLRg1xuICAgKi9cbiAgcHVibGljIGFzeW5jIGhhc1Byb2plY3RBY2Nlc3ModXNlcklkOiBzdHJpbmcgfCBudW1iZXIsIHByb2plY3RJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgYXdhaXQgdGhpcy5lbnN1cmVJbml0aWFsaXplZCgpO1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnREYXRhYmFzZSA9PT0gJ3NxbGl0ZScgPyB0aGlzLnNxbGl0ZUFkYXB0ZXIuaGFzUHJvamVjdEFjY2Vzcyh1c2VySWQudG9TdHJpbmcoKSwgcHJvamVjdElkKSA6IHRoaXMucG9zdGdyZXNxbEFkYXB0ZXIuaGFzUHJvamVjdEFjY2Vzcyh1c2VySWQudG9TdHJpbmcoKSwgcHJvamVjdElkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDQntCx0L3QvtCy0LvQtdC90LjQtSDQv9GA0L7QtdC60YLQsFxuICAgKi9cbiAgcHVibGljIGFzeW5jIHVwZGF0ZVByb2plY3QoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxQcm9qZWN0Pik6IFByb21pc2U8UHJvamVjdCB8IG51bGw+IHtcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUluaXRpYWxpemVkKCk7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudERhdGFiYXNlID09PSAnc3FsaXRlJyA/IHRoaXMuc3FsaXRlQWRhcHRlci51cGRhdGVQcm9qZWN0KGlkLCB1cGRhdGVzKSA6IHRoaXMucG9zdGdyZXNxbEFkYXB0ZXIudXBkYXRlUHJvamVjdChpZCwgdXBkYXRlcyk7XG4gIH1cblxuICAvKipcbiAgICog0KPQtNCw0LvQtdC90LjQtSDQv9GA0L7QtdC60YLQsFxuICAgKi9cbiAgcHVibGljIGFzeW5jIGRlbGV0ZVByb2plY3QoaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlSW5pdGlhbGl6ZWQoKTtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50RGF0YWJhc2UgPT09ICdzcWxpdGUnID8gdGhpcy5zcWxpdGVBZGFwdGVyLmRlbGV0ZVByb2plY3QoaWQpIDogdGhpcy5wb3N0Z3Jlc3FsQWRhcHRlci5kZWxldGVQcm9qZWN0KGlkKTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vINCe0J/QldCg0JDQptCY0Jgg0KEg0JTQntCh0JrQkNCc0JhcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICog0KHQvtC30LTQsNC90LjQtSDQtNC+0YHQutC4XG4gICAqL1xuICBwdWJsaWMgYXN5bmMgY3JlYXRlQm9hcmQoYm9hcmREYXRhOiBPbWl0PEJvYXJkLCAnaWQnIHwgJ2NyZWF0ZWRfYXQnIHwgJ3VwZGF0ZWRfYXQnPik6IFByb21pc2U8Qm9hcmQ+IHtcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUluaXRpYWxpemVkKCk7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudERhdGFiYXNlID09PSAnc3FsaXRlJyA/IFxuICAgICAgYXdhaXQgdGhpcy5zcWxpdGVBZGFwdGVyLmNyZWF0ZUJvYXJkKGJvYXJkRGF0YSkgOiBcbiAgICAgIGF3YWl0IHRoaXMucG9zdGdyZXNxbEFkYXB0ZXIuY3JlYXRlQm9hcmQoYm9hcmREYXRhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDQn9C+0LvRg9GH0LXQvdC40LUg0LTQvtGB0LrQuCDQv9C+IElEXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZ2V0Qm9hcmRCeUlkKGlkOiBzdHJpbmcpOiBQcm9taXNlPEJvYXJkIHwgbnVsbD4ge1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlSW5pdGlhbGl6ZWQoKTtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50RGF0YWJhc2UgPT09ICdzcWxpdGUnID8gXG4gICAgICBhd2FpdCB0aGlzLnNxbGl0ZUFkYXB0ZXIuZ2V0Qm9hcmRCeUlkKGlkKSA6IFxuICAgICAgYXdhaXQgdGhpcy5wb3N0Z3Jlc3FsQWRhcHRlci5nZXRCb2FyZEJ5SWQoaWQpO1xuICB9XG5cbiAgLyoqXG4gICAqINCf0L7Qu9GD0YfQtdC90LjQtSDQtNC+0YHQvtC6INC/0YDQvtC10LrRgtCwXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZ2V0UHJvamVjdEJvYXJkcyhwcm9qZWN0SWQ6IHN0cmluZyk6IFByb21pc2U8Qm9hcmRbXT4ge1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlSW5pdGlhbGl6ZWQoKTtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50RGF0YWJhc2UgPT09ICdzcWxpdGUnID8gXG4gICAgICBhd2FpdCB0aGlzLnNxbGl0ZUFkYXB0ZXIuZ2V0UHJvamVjdEJvYXJkcyhwcm9qZWN0SWQpIDogXG4gICAgICBhd2FpdCB0aGlzLnBvc3RncmVzcWxBZGFwdGVyLmdldEJvYXJkc0J5UHJvamVjdElkKHByb2plY3RJZCk7XG4gIH1cblxuICAvKipcbiAgICog0KPQtNCw0LvQtdC90LjQtSDQtNC+0YHQutC4XG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZGVsZXRlQm9hcmQoaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlSW5pdGlhbGl6ZWQoKTtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50RGF0YWJhc2UgPT09ICdzcWxpdGUnID8gXG4gICAgICBhd2FpdCB0aGlzLnNxbGl0ZUFkYXB0ZXIuZGVsZXRlQm9hcmQoaWQpIDogXG4gICAgICBhd2FpdCB0aGlzLnBvc3RncmVzcWxBZGFwdGVyLmRlbGV0ZUJvYXJkKGlkKTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vINCe0J/QldCg0JDQptCY0Jgg0KEg0JrQntCb0J7QndCa0JDQnNCYXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqINCf0L7Qu9GD0YfQtdC90LjQtSDQutC+0LvQvtC90L7QuiDQtNC+0YHQutC4XG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZ2V0Qm9hcmRDb2x1bW5zKGJvYXJkSWQ6IHN0cmluZyk6IFByb21pc2U8Q29sdW1uW10+IHtcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUluaXRpYWxpemVkKCk7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudERhdGFiYXNlID09PSAnc3FsaXRlJyA/IFxuICAgICAgYXdhaXQgdGhpcy5zcWxpdGVBZGFwdGVyLmdldEJvYXJkQ29sdW1ucyhib2FyZElkKSA6IFxuICAgICAgYXdhaXQgdGhpcy5wb3N0Z3Jlc3FsQWRhcHRlci5nZXRCb2FyZENvbHVtbnMoYm9hcmRJZCk7XG4gIH1cblxuICAvKipcbiAgICog0KHQvtC30LTQsNC90LjQtSDQutC+0LvQvtC90LrQuFxuICAgKi9cbiAgcHVibGljIGFzeW5jIGNyZWF0ZUNvbHVtbihjb2x1bW5EYXRhOiBPbWl0PENvbHVtbiwgJ2lkJyB8ICdjcmVhdGVkX2F0JyB8ICd1cGRhdGVkX2F0Jz4pOiBQcm9taXNlPENvbHVtbj4ge1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlSW5pdGlhbGl6ZWQoKTtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50RGF0YWJhc2UgPT09ICdzcWxpdGUnID8gXG4gICAgICBhd2FpdCB0aGlzLnNxbGl0ZUFkYXB0ZXIuY3JlYXRlQ29sdW1uKGNvbHVtbkRhdGEpIDogXG4gICAgICBhd2FpdCB0aGlzLnBvc3RncmVzcWxBZGFwdGVyLmNyZWF0ZUNvbHVtbihcbiAgICAgICAgY29sdW1uRGF0YS5uYW1lIHx8IGNvbHVtbkRhdGEudGl0bGUsIFxuICAgICAgICBjb2x1bW5EYXRhLmJvYXJkX2lkLnRvU3RyaW5nKCksIFxuICAgICAgICBjb2x1bW5EYXRhLnBvc2l0aW9uIHx8IDAsIFxuICAgICAgICBjb2x1bW5EYXRhLmNvbG9yLCBcbiAgICAgICAgY29sdW1uRGF0YS5jcmVhdGVkX2J5XG4gICAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqINCj0LTQsNC70LXQvdC40LUg0LrQvtC70L7QvdC60LhcbiAgICovXG4gIHB1YmxpYyBhc3luYyBkZWxldGVDb2x1bW4oaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlSW5pdGlhbGl6ZWQoKTtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50RGF0YWJhc2UgPT09ICdzcWxpdGUnID8gXG4gICAgICBhd2FpdCB0aGlzLnNxbGl0ZUFkYXB0ZXIuZGVsZXRlQ29sdW1uKGlkKSA6IFxuICAgICAgYXdhaXQgdGhpcy5wb3N0Z3Jlc3FsQWRhcHRlci5kZWxldGVDb2x1bW4oaWQpO1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8g0J7Qn9CV0KDQkNCm0JjQmCDQoSDQl9CQ0JTQkNCn0JDQnNCYXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqINCh0L7Qt9C00LDQvdC40LUg0LfQsNC00LDRh9C4XG4gICAqL1xuICBwdWJsaWMgYXN5bmMgY3JlYXRlVGFzayh0YXNrRGF0YTogT21pdDxUYXNrLCAnaWQnIHwgJ2NyZWF0ZWRfYXQnIHwgJ3VwZGF0ZWRfYXQnPik6IFByb21pc2U8VGFzaz4ge1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlSW5pdGlhbGl6ZWQoKTtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50RGF0YWJhc2UgPT09ICdzcWxpdGUnID8gXG4gICAgICBhd2FpdCB0aGlzLnNxbGl0ZUFkYXB0ZXIuY3JlYXRlVGFzayh0YXNrRGF0YSkgOiBcbiAgICAgIGF3YWl0IHRoaXMucG9zdGdyZXNxbEFkYXB0ZXIuY3JlYXRlVGFzayh7XG4gICAgICAgIHRpdGxlOiB0YXNrRGF0YS50aXRsZSxcbiAgICAgICAgZGVzY3JpcHRpb246IHRhc2tEYXRhLmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICBjb2x1bW5faWQ6IHRhc2tEYXRhLmNvbHVtbl9pZCxcbiAgICAgICAgYXNzaWduZWVfaWQ6IHRhc2tEYXRhLmFzc2lnbmVlX2lkLFxuICAgICAgICBwcmlvcml0eTogdGFza0RhdGEucHJpb3JpdHkgfHwgJ21lZGl1bScsXG4gICAgICAgIHBvc2l0aW9uOiB0YXNrRGF0YS5wb3NpdGlvbiB8fCAwLFxuICAgICAgICBzdGF0dXM6IHRhc2tEYXRhLnN0YXR1cyB8fCAndG9kbycsXG4gICAgICAgIHByb2plY3RfaWQ6IHRhc2tEYXRhLnByb2plY3RfaWQsXG4gICAgICAgIGJvYXJkX2lkOiB0YXNrRGF0YS5ib2FyZF9pZCxcbiAgICAgICAgcmVwb3J0ZXJfaWQ6IHRhc2tEYXRhLmNyZWF0b3JfaWRcbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqINCf0L7Qu9GD0YfQtdC90LjQtSDQt9Cw0LTQsNGHINC60L7Qu9C+0L3QutC4XG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZ2V0Q29sdW1uVGFza3MoY29sdW1uSWQ6IHN0cmluZyk6IFByb21pc2U8VGFza1tdPiB7XG4gICAgYXdhaXQgdGhpcy5lbnN1cmVJbml0aWFsaXplZCgpO1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnREYXRhYmFzZSA9PT0gJ3NxbGl0ZScgPyBcbiAgICAgIGF3YWl0IHRoaXMuc3FsaXRlQWRhcHRlci5nZXRDb2x1bW5UYXNrcyhjb2x1bW5JZCkgOiBcbiAgICAgIGF3YWl0IHRoaXMucG9zdGdyZXNxbEFkYXB0ZXIuZ2V0Q29sdW1uVGFza3MoY29sdW1uSWQpO1xuICB9XG5cbiAgLyoqXG4gICAqINCj0LTQsNC70LXQvdC40LUg0LfQsNC00LDRh9C4XG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZGVsZXRlVGFzayhpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgYXdhaXQgdGhpcy5lbnN1cmVJbml0aWFsaXplZCgpO1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnREYXRhYmFzZSA9PT0gJ3NxbGl0ZScgPyBcbiAgICAgIGF3YWl0IHRoaXMuc3FsaXRlQWRhcHRlci5kZWxldGVUYXNrKGlkKSA6IFxuICAgICAgYXdhaXQgdGhpcy5wb3N0Z3Jlc3FsQWRhcHRlci5kZWxldGVUYXNrKGlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDQktGL0L/QvtC70L3QtdC90LjQtSDRgdGL0YDQvtCz0L4gU1FMINC30LDQv9GA0L7RgdCwICjQtNC70Y8g0YHQvtCy0LzQtdGB0YLQuNC80L7RgdGC0Lgg0YEg0YDQtdC/0L7Qt9C40YLQvtGA0LjRj9C80LgpXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgcXVlcnkoc3FsOiBzdHJpbmcsIHBhcmFtcz86IHVua25vd25bXSk6IFByb21pc2U8dW5rbm93bltdPiB7XG4gICAgYXdhaXQgdGhpcy5lbnN1cmVJbml0aWFsaXplZCgpO1xuICAgIGlmICh0aGlzLmN1cnJlbnREYXRhYmFzZSA9PT0gJ3NxbGl0ZScpIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc3FsaXRlQWRhcHRlci5xdWVyeShzcWwsIHBhcmFtcyk7XG4gICAgICByZXR1cm4gcmVzdWx0LnJvd3M7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucG9zdGdyZXNxbEFkYXB0ZXIucXVlcnkoc3FsLCBwYXJhbXMpO1xuICAgICAgcmV0dXJuIHJlc3VsdC5yb3dzO1xuICAgIH1cbiAgfVxufVxuXG4vLyDQrdC60YHQv9C+0YDRgiDQtdC00LjQvdGB0YLQstC10L3QvdC+0LPQviDRjdC60LfQtdC80L/Qu9GP0YDQsFxuZXhwb3J0IGNvbnN0IGRiQWRhcHRlciA9IERhdGFiYXNlQWRhcHRlci5nZXRJbnN0YW5jZSgpO1xuIl0sIm5hbWVzIjpbIlBvc3RncmVTUUxBZGFwdGVyIiwiRGF0YWJhc2VBZGFwdGVyIiwiY3VycmVudERhdGFiYXNlIiwiaXNJbml0aWFsaXplZCIsInNxbGl0ZUFkYXB0ZXIiLCJpbml0aWFsaXphdGlvblByb21pc2UiLCJwb3N0Z3Jlc3FsQWRhcHRlciIsImdldEluc3RhbmNlIiwiaW5zdGFuY2UiLCJpbml0aWFsaXplIiwicGVyZm9ybUluaXRpYWxpemF0aW9uIiwiZGF0YWJhc2VQcmlvcml0eSIsInByb2Nlc3MiLCJlbnYiLCJEQVRBQkFTRV9QUklPUklUWSIsImNvbnNvbGUiLCJsb2ciLCJTUUxpdGVBZGFwdGVyIiwic3FsaXRlRXJyb3IiLCJ3YXJuIiwicG9zdGdyZXNFcnJvciIsImVycm9yIiwiZW5zdXJlSW5pdGlhbGl6ZWQiLCJnZXRDdXJyZW50QWRhcHRlciIsIkVycm9yIiwiZ2V0RGF0YWJhc2VTdGF0dXMiLCJwb3N0Z3Jlc3FsIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ0aGVuIiwiY2F0Y2giLCJzcWxpdGUiLCJjdXJyZW50IiwiZ2V0Q3VycmVudERhdGFiYXNlIiwiY3JlYXRlVXNlciIsInVzZXJEYXRhIiwiYWRhcHRlciIsImdldFVzZXJCeUlkIiwiaWQiLCJnZXRVc2VyQnlFbWFpbCIsImVtYWlsIiwiZ2V0QWxsVXNlcnMiLCJnZXRVc2VycyIsInVwZGF0ZVVzZXIiLCJ1cGRhdGVzIiwiZGVsZXRlVXNlciIsImNyZWF0ZVNlc3Npb24iLCJzZXNzaW9uRGF0YSIsImdldFNlc3Npb25CeVRva2VuIiwidG9rZW4iLCJkZWxldGVTZXNzaW9uIiwiZGVsZXRlRXhwaXJlZFNlc3Npb25zIiwiY3JlYXRlUHJvamVjdCIsInByb2plY3REYXRhIiwibmFtZSIsImRlc2NyaXB0aW9uIiwiY3JlYXRlZF9ieSIsImNvbG9yIiwiaWNvbl91cmwiLCJ0ZWxlZ3JhbV9jaGF0X2lkIiwidGVsZWdyYW1fdG9waWNfaWQiLCJnZXRQcm9qZWN0QnlJZCIsImdldEFsbFByb2plY3RzIiwiZ2V0VXNlclByb2plY3RzIiwidXNlcklkIiwiZ2V0UHJvamVjdHNCeUNyZWF0b3JJZCIsImNyZWF0b3JJZCIsImhhc1Byb2plY3RBY2Nlc3MiLCJwcm9qZWN0SWQiLCJ0b1N0cmluZyIsInVwZGF0ZVByb2plY3QiLCJkZWxldGVQcm9qZWN0IiwiY3JlYXRlQm9hcmQiLCJib2FyZERhdGEiLCJnZXRCb2FyZEJ5SWQiLCJnZXRQcm9qZWN0Qm9hcmRzIiwiZ2V0Qm9hcmRzQnlQcm9qZWN0SWQiLCJkZWxldGVCb2FyZCIsImdldEJvYXJkQ29sdW1ucyIsImJvYXJkSWQiLCJjcmVhdGVDb2x1bW4iLCJjb2x1bW5EYXRhIiwidGl0bGUiLCJib2FyZF9pZCIsInBvc2l0aW9uIiwiZGVsZXRlQ29sdW1uIiwiY3JlYXRlVGFzayIsInRhc2tEYXRhIiwiY29sdW1uX2lkIiwiYXNzaWduZWVfaWQiLCJwcmlvcml0eSIsInN0YXR1cyIsInByb2plY3RfaWQiLCJyZXBvcnRlcl9pZCIsImNyZWF0b3JfaWQiLCJnZXRDb2x1bW5UYXNrcyIsImNvbHVtbklkIiwiZGVsZXRlVGFzayIsInF1ZXJ5Iiwic3FsIiwicGFyYW1zIiwicmVzdWx0Iiwicm93cyIsImRiQWRhcHRlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/database-adapter.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/postgresql-adapter.ts":
/*!***************************************!*\
  !*** ./src/lib/postgresql-adapter.ts ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PostgreSQLAdapter: () => (/* binding */ PostgreSQLAdapter),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getPostgreSQLAdapter: () => (/* binding */ getPostgreSQLAdapter)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_1__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pg__WEBPACK_IMPORTED_MODULE_0__]);\npg__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n// ÐšÐ»Ð°ÑÑ Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ PostgreSQL\nclass PostgreSQLAdapter {\n    static{\n        this.instance = null;\n    }\n    constructor(config){\n        this.isInitialized = false;\n        this.config = config;\n        // Ð¡Ð¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ð°Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° SSL Ð´Ð»Ñ Supabase\n        let sslConfig = false;\n        if (config.ssl) {\n            // Ð•ÑÐ»Ð¸ Ñ…Ð¾ÑÑ‚ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ supabase.co, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ SSL\n            if (config.host.includes('supabase.co')) {\n                sslConfig = {\n                    rejectUnauthorized: false,\n                    ca: undefined\n                };\n            } else {\n                sslConfig = {\n                    rejectUnauthorized: false\n                };\n            }\n        }\n        this.pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool({\n            host: config.host,\n            port: config.port,\n            database: config.database,\n            user: config.user,\n            password: config.password,\n            ssl: sslConfig,\n            max: 20,\n            idleTimeoutMillis: 30000,\n            connectionTimeoutMillis: 2000\n        });\n    }\n    // Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…\n    async initialize() {\n        if (this.isInitialized) return;\n        try {\n            console.log('Initializing PostgreSQL adapter with config:', {\n                host: this.config.host,\n                port: this.config.port,\n                database: this.config.database,\n                user: this.config.user,\n                ssl: this.config.ssl\n            });\n            const client = await this.pool.connect();\n            // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ\n            await client.query('SELECT NOW()');\n            console.log('âœ… PostgreSQL Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾');\n            client.release();\n            this.isInitialized = true;\n        } catch (error) {\n            console.error('âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ðº PostgreSQL:', error);\n            throw error;\n        }\n    }\n    // Ð—Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ð¿ÑƒÐ»Ð° ÑÐ¾ÐµÐ´Ð¸Ð½ÐµÐ½Ð¸Ð¹\n    async close() {\n        await this.pool.end();\n        this.isInitialized = false;\n    }\n    // ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð° Ð´Ð»Ñ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¹\n    async getClient() {\n        return await this.pool.connect();\n    }\n    // ÐšÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð°Ñ†Ð¸Ñ SQL Ð¸Ð· SQLite Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð° (?) Ð² PostgreSQL Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ ($1, $2, ...)\n    convertSqlToPostgreSQL(sql) {\n        let paramIndex = 1;\n        return sql.replace(/\\?/g, ()=>`$${paramIndex++}`);\n    }\n    // Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°\n    async query(text, params) {\n        const client = await this.pool.connect();\n        try {\n            // ÐšÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð¸Ñ€ÑƒÐµÐ¼ SQL Ð¸Ð· SQLite Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð° Ð² PostgreSQL Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚\n            const convertedSql = this.convertSqlToPostgreSQL(text);\n            console.log('Original SQL Query:', text);\n            console.log('Converted SQL Query:', convertedSql);\n            console.log('SQL Params:', params);\n            const result = await client.query(convertedSql, params);\n            return result;\n        } finally{\n            client.release();\n        }\n    }\n    // === ÐœÐ•Ð¢ÐžÐ”Ð« Ð”Ð›Ð¯ ÐŸÐžÐ›Ð¬Ð—ÐžÐ’ÐÐ¢Ð•Ð›Ð•Ð™ ===\n    async createUser(userData) {\n        const { email, name, role = 'user', password_hash, isApproved = false, avatar } = userData;\n        // Ð•ÑÐ»Ð¸ password_hash Ð½Ðµ Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½, Ð½Ð¾ ÐµÑÑ‚ÑŒ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ Ð² Ð²Ð¸Ð´Ðµ ÑÑ‚Ñ€Ð¾ÐºÐ¸, Ñ…ÐµÑˆÐ¸Ñ€ÑƒÐµÐ¼ ÐµÐ³Ð¾\n        const userDataWithPassword = userData;\n        const hashedPassword = password_hash || (userDataWithPassword.password ? await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().hash(userDataWithPassword.password, 12) : await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().hash('defaultpassword', 12));\n        // ÐŸÑ€ÐµÐ¾Ð±Ñ€Ð°Ð·ÑƒÐµÐ¼ isApproved Ð² approval_status\n        const approvalStatus = isApproved ? 'approved' : 'pending';\n        const result = await this.query(`INSERT INTO users (email, password_hash, name, role, approval_status, avatar_url) \n       VALUES ($1, $2, $3, $4, $5, $6) \n       RETURNING *`, [\n            email,\n            hashedPassword,\n            name,\n            role,\n            approvalStatus,\n            avatar\n        ]);\n        const row = result.rows[0];\n        return {\n            id: row.id,\n            name: row.name,\n            email: row.email,\n            avatar: row.avatar_url,\n            role: row.role,\n            isApproved: row.approval_status === 'approved',\n            created_at: row.created_at,\n            updated_at: row.updated_at,\n            password_hash: row.password_hash\n        };\n    }\n    async getUserByEmail(email) {\n        const result = await this.query('SELECT * FROM users WHERE email = $1', [\n            email\n        ]);\n        const row = result.rows[0];\n        if (!row) return null;\n        // ÐœÐ°Ð¿Ð¿Ð¸Ð½Ð³ Ð¿Ð¾Ð»ÐµÐ¹ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð² User Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ\n        return {\n            id: row.id,\n            name: row.name,\n            email: row.email,\n            avatar: row.avatar_url,\n            role: row.role || 'user',\n            isApproved: row.approval_status === 'approved',\n            created_at: row.created_at,\n            updated_at: row.updated_at,\n            password_hash: row.password_hash\n        };\n    }\n    async getUserById(id) {\n        const result = await this.query('SELECT * FROM users WHERE id = $1', [\n            id\n        ]);\n        const row = result.rows[0];\n        if (!row) return null;\n        console.log('User data:', row);\n        console.log('User isApproved:', row.approval_status === 'approved', 'type:', typeof (row.approval_status === 'approved'));\n        console.log('User role:', row.role);\n        console.log('Final isApproved:', row.approval_status === 'approved');\n        // ÐœÐ°Ð¿Ð¿Ð¸Ð½Ð³ Ð¿Ð¾Ð»ÐµÐ¹ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð² User Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ\n        return {\n            id: row.id,\n            name: row.name,\n            email: row.email,\n            avatar: row.avatar_url,\n            role: row.role || 'user',\n            isApproved: row.approval_status === 'approved',\n            created_at: row.created_at,\n            updated_at: row.updated_at,\n            password_hash: row.password_hash\n        };\n    }\n    async updateUser(id, updates) {\n        const fields = Object.keys(updates).filter((key)=>key !== 'id' && key !== 'created_at' && key !== 'updated_at');\n        if (fields.length === 0) {\n            return await this.getUserById(id);\n        }\n        // ÐœÐ°Ð¿Ð¿Ð¸Ð½Ð³ Ð¿Ð¾Ð»ÐµÐ¹ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÐ° User Ð² Ð¿Ð¾Ð»Ñ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…\n        const dbFields = fields.map((field)=>{\n            if (field === 'avatar') return 'avatar_url';\n            if (field === 'isApproved') return 'approval_status';\n            return field;\n        });\n        // ÐŸÑ€ÐµÐ¾Ð±Ñ€Ð°Ð·ÑƒÐµÐ¼ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð´Ð»Ñ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…\n        const dbValues = fields.map((field)=>{\n            if (field === 'isApproved') {\n                return updates[field] ? 'approved' : 'pending';\n            }\n            return updates[field];\n        });\n        const setClause = dbFields.map((field, index)=>`${field} = $${index + 2}`).join(', ');\n        const result = await this.query(`UPDATE users SET ${setClause}, updated_at = CURRENT_TIMESTAMP WHERE id = $1 RETURNING *`, [\n            id,\n            ...dbValues\n        ]);\n        const row = result.rows[0];\n        if (!row) return null;\n        return {\n            id: row.id,\n            name: row.name,\n            email: row.email,\n            avatar: row.avatar_url,\n            role: row.role,\n            isApproved: row.is_approved,\n            created_at: row.created_at,\n            updated_at: row.updated_at,\n            password_hash: row.password_hash\n        };\n    }\n    async getAllUsers() {\n        const result = await this.query('SELECT * FROM users ORDER BY created_at DESC');\n        return result.rows.map((row)=>({\n                id: row.id,\n                name: row.name,\n                email: row.email,\n                avatar: row.avatar_url,\n                role: row.role || 'user',\n                isApproved: row.approval_status === 'approved',\n                created_at: row.created_at,\n                updated_at: row.updated_at,\n                password_hash: row.password_hash\n            }));\n    }\n    async deleteUser(id) {\n        const result = await this.query('DELETE FROM users WHERE id = $1', [\n            id\n        ]);\n        return result.rowCount > 0;\n    }\n    // === ÐœÐ•Ð¢ÐžÐ”Ð« Ð”Ð›Ð¯ ÐŸÐ ÐžÐ•ÐšÐ¢ÐžÐ’ ===\n    async createProject(projectData) {\n        console.log('ðŸ” PostgreSQL createProject called with:', projectData);\n        try {\n            // ÐšÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð¸Ñ€ÑƒÐµÐ¼ ÑÑ‚Ñ€Ð¾ÐºÐ¾Ð²Ñ‹Ð¹ ID Ð² integer Ð´Ð»Ñ PostgreSQL\n            const ownerIdInt = parseInt(projectData.created_by, 10);\n            if (isNaN(ownerIdInt)) {\n                throw new Error(`Invalid user ID: ${projectData.created_by}`);\n            }\n            const result = await this.query(`INSERT INTO projects (name, description, owner_id, color, icon, telegram_chat_id, telegram_topic_id, is_active, created_at, updated_at)\n       VALUES ($1, $2, $3, $4, $5, $6, $7, $8, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP) RETURNING *`, [\n                projectData.name,\n                projectData.description,\n                ownerIdInt,\n                projectData.color || '#3B82F6',\n                projectData.icon_url || null,\n                projectData.telegram_chat_id || null,\n                projectData.telegram_topic_id || null,\n                true\n            ]);\n            const project = result.rows[0];\n            // Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð²Ð»Ð°Ð´ÐµÐ»ÑŒÑ†Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ð² project_members Ñ Ñ€Ð¾Ð»ÑŒÑŽ 'owner'\n            await this.query(`INSERT INTO project_members (project_id, user_id, role, joined_at)\n         VALUES ($1, $2, $3, CURRENT_TIMESTAMP)`, [\n                project.id,\n                ownerIdInt,\n                'owner'\n            ]);\n            // ÐŸÑ€ÐµÐ¾Ð±Ñ€Ð°Ð·ÑƒÐµÐ¼ owner_id Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾ Ð² created_by Ð´Ð»Ñ ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ñ API\n            const apiProject = {\n                ...project,\n                created_by: project.owner_id.toString(),\n                icon_url: project.icon,\n                telegram_chat_id: project.telegram_chat_id,\n                telegram_topic_id: project.telegram_topic_id\n            };\n            console.log('âœ… PostgreSQL project created successfully with owner membership:', apiProject);\n            return apiProject;\n        } catch (error) {\n            console.error('âŒ PostgreSQL createProject error:', error);\n            throw error;\n        }\n    }\n    async getProjectById(id) {\n        const result = await this.query('SELECT * FROM projects WHERE id = $1', [\n            id\n        ]);\n        const project = result.rows[0];\n        if (!project) return null;\n        return {\n            ...project,\n            created_by: project.owner_id.toString(),\n            icon_url: project.icon,\n            telegram_chat_id: project.telegram_chat_id,\n            telegram_topic_id: project.telegram_topic_id\n        };\n    }\n    async getProjectsByUserId(userId) {\n        // ÐšÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð¸Ñ€ÑƒÐµÐ¼ userId Ð² integer Ð´Ð»Ñ PostgreSQL\n        const userIdInt = parseInt(userId, 10);\n        if (isNaN(userIdInt)) {\n            console.error('Invalid userId for getProjectsByUserId:', userId);\n            return [];\n        }\n        const result = await this.query(`SELECT DISTINCT p.* FROM projects p \n       LEFT JOIN project_members pm ON p.id = pm.project_id \n       WHERE (p.owner_id = $1 OR pm.user_id = $1) \n       ORDER BY p.created_at DESC`, [\n            userIdInt\n        ]);\n        return result.rows.map((project)=>({\n                ...project,\n                created_by: project.owner_id.toString(),\n                icon_url: project.icon,\n                telegram_chat_id: project.telegram_chat_id,\n                telegram_topic_id: project.telegram_topic_id\n            }));\n    }\n    async getUserProjects(userId) {\n        return this.getProjectsByUserId(userId);\n    }\n    async getAllProjects() {\n        const result = await this.query('SELECT * FROM projects ORDER BY created_at DESC');\n        return result.rows.map((project)=>({\n                ...project,\n                created_by: project.owner_id.toString(),\n                icon_url: project.icon,\n                telegram_chat_id: project.telegram_chat_id,\n                telegram_topic_id: project.telegram_topic_id\n            }));\n    }\n    async updateProject(id, updates) {\n        const fields = Object.keys(updates).filter((key)=>key !== 'id');\n        const values = fields.map((field)=>updates[field]);\n        const setClause = fields.map((field, index)=>`${field} = $${index + 2}`).join(', ');\n        if (fields.length === 0) {\n            return await this.getProjectById(id);\n        }\n        const result = await this.query(`UPDATE projects SET ${setClause} WHERE id = $1 RETURNING *`, [\n            id,\n            ...values\n        ]);\n        const project = result.rows[0];\n        if (!project) return null;\n        return {\n            ...project,\n            created_by: project.owner_id.toString(),\n            icon_url: project.icon,\n            telegram_chat_id: project.telegram_chat_id,\n            telegram_topic_id: project.telegram_topic_id\n        };\n    }\n    async deleteProject(id) {\n        const result = await this.query('DELETE FROM projects WHERE id = $1', [\n            id\n        ]);\n        return result.rowCount > 0;\n    }\n    async hasProjectAccess(userId, projectId) {\n        try {\n            // ÐšÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð¸Ñ€ÑƒÐµÐ¼ userId Ð² integer Ð´Ð»Ñ ÑÑ€Ð°Ð²Ð½ÐµÐ½Ð¸Ñ Ñ PostgreSQL\n            const userIdInt = parseInt(userId, 10);\n            if (isNaN(userIdInt)) {\n                console.error('Invalid userId for access check:', userId);\n                return false;\n            }\n            // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð²Ð»Ð°Ð´ÐµÐ»ÑŒÑ†ÐµÐ¼ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°\n            const ownerResult = await this.query('SELECT owner_id FROM projects WHERE id = $1', [\n                projectId\n            ]);\n            if (ownerResult.rows.length === 0) {\n                return false; // ÐŸÑ€Ð¾ÐµÐºÑ‚ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½\n            }\n            const projectOwner = ownerResult.rows[0].owner_id;\n            if (projectOwner === userIdInt) {\n                return true; // ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð²Ð»Ð°Ð´ÐµÐ»ÑŒÑ†ÐµÐ¼\n            }\n            // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ‡Ð»ÐµÐ½ÑÑ‚Ð²Ð¾ Ð² Ð¿Ñ€Ð¾ÐµÐºÑ‚Ðµ\n            const memberResult = await this.query('SELECT 1 FROM project_members WHERE project_id = $1 AND user_id = $2', [\n                projectId,\n                userIdInt\n            ]);\n            return memberResult.rows.length > 0;\n        } catch (error) {\n            console.error('Error checking project access:', error);\n            return false;\n        }\n    }\n    // === ÐœÐ•Ð¢ÐžÐ”Ð« Ð”Ð›Ð¯ Ð”ÐžÐ¡ÐžÐš ===\n    async createBoard(boardData) {\n        const result = await this.query(`INSERT INTO boards (name, description, project_id, created_by, created_at, updated_at) \n       VALUES ($1, $2, $3, $4, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP) \n       RETURNING *`, [\n            boardData.name,\n            boardData.description || '',\n            boardData.project_id,\n            parseInt(boardData.created_by, 10)\n        ]);\n        return result.rows[0];\n    }\n    async getBoardById(id) {\n        const result = await this.query('SELECT * FROM boards WHERE id = $1', [\n            id\n        ]);\n        return result.rows[0] || null;\n    }\n    async getBoardsByProjectId(projectId) {\n        const result = await this.query(`SELECT b.* FROM boards b \n       JOIN projects p ON b.project_id = p.id \n       WHERE b.project_id = $1 \n       ORDER BY b.position ASC, b.created_at DESC`, [\n            projectId\n        ]);\n        return result.rows;\n    }\n    async updateBoard(id, updates) {\n        const fields = Object.keys(updates).filter((key)=>key !== 'id');\n        const values = fields.map((field)=>updates[field]);\n        const setClause = fields.map((field, index)=>`${field} = $${index + 2}`).join(', ');\n        if (fields.length === 0) {\n            return await this.getBoardById(id);\n        }\n        const result = await this.query(`UPDATE boards SET ${setClause} WHERE id = $1 RETURNING *`, [\n            id,\n            ...values\n        ]);\n        return result.rows[0] || null;\n    }\n    async deleteBoard(id) {\n        const result = await this.query('DELETE FROM boards WHERE id = $1', [\n            id\n        ]);\n        return result.rowCount > 0;\n    }\n    // === ÐœÐ•Ð¢ÐžÐ”Ð« Ð”Ð›Ð¯ ÐšÐžÐ›ÐžÐÐžÐš ===\n    async createColumn(title, boardId, position, color, createdBy) {\n        const result = await this.query(`INSERT INTO columns (title, board_id, position, color, settings, created_by) \n       VALUES ($1, $2, $3, $4, $5, $6) \n       RETURNING *`, [\n            title,\n            boardId,\n            position || 0,\n            color || '#6B7280',\n            '{}',\n            createdBy || null\n        ]);\n        return result.rows[0];\n    }\n    async getColumnById(id) {\n        const result = await this.query('SELECT * FROM columns WHERE id = $1', [\n            id\n        ]);\n        return result.rows[0] || null;\n    }\n    async getColumnsByBoardId(boardId) {\n        const result = await this.query('SELECT * FROM columns WHERE board_id = $1 ORDER BY position ASC, created_at DESC', [\n            boardId\n        ]);\n        return result.rows;\n    }\n    async updateColumn(id, updates) {\n        const fields = Object.keys(updates).filter((key)=>key !== 'id');\n        const values = fields.map((field)=>updates[field]);\n        const setClause = fields.map((field, index)=>`${field} = $${index + 2}`).join(', ');\n        if (fields.length === 0) {\n            return await this.getColumnById(id);\n        }\n        const result = await this.query(`UPDATE columns SET ${setClause} WHERE id = $1 RETURNING *`, [\n            id,\n            ...values\n        ]);\n        return result.rows[0] || null;\n    }\n    async deleteColumn(id) {\n        const result = await this.query('DELETE FROM columns WHERE id = $1', [\n            id\n        ]);\n        return result.rowCount > 0;\n    }\n    // === ÐœÐ•Ð¢ÐžÐ”Ð« Ð”Ð›Ð¯ Ð—ÐÐ”ÐÐ§ ===\n    async createTask(taskData) {\n        const { title, description, status = 'todo', priority = 'medium', project_id, board_id, column_id, assignee_id, reporter_id, position = 0 } = taskData;\n        // Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð·Ð°Ð´Ð°Ñ‡Ñƒ Ð±ÐµÐ· assignee_id (Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ð°Ñ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ð° task_assignees)\n        const result = await this.query(`INSERT INTO tasks (title, description, status, priority, project_id, board_id, column_id, reporter_id, position) \n       VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) \n       RETURNING *`, [\n            title,\n            description,\n            status,\n            priority,\n            project_id,\n            board_id,\n            column_id,\n            reporter_id,\n            position\n        ]);\n        const task = result.rows[0];\n        // Ð•ÑÐ»Ð¸ ÑƒÐºÐ°Ð·Ð°Ð½ assignee_id, ÑÐ¾Ð·Ð´Ð°ÐµÐ¼ Ð·Ð°Ð¿Ð¸ÑÑŒ Ð² Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ðµ task_assignees\n        if (assignee_id) {\n            await this.query(`INSERT INTO task_assignees (task_id, user_id, assigned_by) \n         VALUES ($1, $2, $3)`, [\n                task.id,\n                assignee_id,\n                reporter_id\n            ]);\n        }\n        return task;\n    }\n    async getTaskById(id) {\n        const result = await this.query('SELECT * FROM tasks WHERE id = $1', [\n            id\n        ]);\n        return result.rows[0] || null;\n    }\n    async getTasksByProjectId(projectId) {\n        const result = await this.query('SELECT * FROM tasks WHERE project_id = $1 ORDER BY position ASC, created_at DESC', [\n            projectId\n        ]);\n        return result.rows;\n    }\n    async getTasksByColumnId(columnId) {\n        const result = await this.query('SELECT * FROM tasks WHERE column_id = $1 ORDER BY position ASC, created_at DESC', [\n            columnId\n        ]);\n        return result.rows;\n    }\n    async updateTask(id, updates) {\n        const fields = Object.keys(updates).filter((key)=>key !== 'id');\n        const values = fields.map((field)=>updates[field]);\n        const setClause = fields.map((field, index)=>`${field} = $${index + 2}`).join(', ');\n        if (fields.length === 0) {\n            return await this.getTaskById(id);\n        }\n        const result = await this.query(`UPDATE tasks SET ${setClause} WHERE id = $1 RETURNING *`, [\n            id,\n            ...values\n        ]);\n        return result.rows[0] || null;\n    }\n    async deleteTask(id) {\n        const result = await this.query('DELETE FROM tasks WHERE id = $1', [\n            id\n        ]);\n        return result.rowCount > 0;\n    }\n    async getTaskAssignees(taskId) {\n        const result = await this.query(`SELECT u.id, u.username, u.email, ta.assigned_at \n       FROM task_assignees ta \n       JOIN users u ON ta.user_id = u.id \n       WHERE ta.task_id = $1`, [\n            taskId\n        ]);\n        return result.rows;\n    }\n    async assignTaskToUser(taskId, userId, assignedBy) {\n        try {\n            await this.query(`INSERT INTO task_assignees (task_id, user_id, assigned_by) \n         VALUES ($1, $2, $3) \n         ON CONFLICT (task_id, user_id) DO NOTHING`, [\n                taskId,\n                userId,\n                assignedBy\n            ]);\n            return true;\n        } catch (error) {\n            console.error('Error assigning task to user:', error);\n            return false;\n        }\n    }\n    async unassignTaskFromUser(taskId, userId) {\n        const result = await this.query('DELETE FROM task_assignees WHERE task_id = $1 AND user_id = $2', [\n            taskId,\n            userId\n        ]);\n        return result.rowCount > 0;\n    }\n    // === Ð”ÐžÐŸÐžÐ›ÐÐ˜Ð¢Ð•Ð›Ð¬ÐÐ«Ð• ÐœÐ•Ð¢ÐžÐ”Ð« Ð”Ð›Ð¯ Ð¡ÐžÐ’ÐœÐ•Ð¡Ð¢Ð˜ÐœÐžÐ¡Ð¢Ð˜ ===\n    async getBoardColumns(boardId) {\n        return await this.getColumnsByBoardId(boardId);\n    }\n    async getColumnTasks(columnId) {\n        return await this.getTasksByColumnId(columnId);\n    }\n    // === ÐœÐ•Ð¢ÐžÐ”Ð« Ð”Ð›Ð¯ Ð¡Ð•Ð¡Ð¡Ð˜Ð™ ===\n    async createSession(sessionData) {\n        const result = await this.query('INSERT INTO sessions (session_token, user_id, expires_at) VALUES ($1, $2, $3) RETURNING *', [\n            sessionData.token,\n            sessionData.user_id,\n            sessionData.expires_at\n        ]);\n        const row = result.rows[0];\n        return {\n            id: row.id,\n            user_id: row.user_id,\n            token: row.session_token,\n            expires_at: row.expires_at,\n            created_at: row.created_at\n        };\n    }\n    async getSessionByToken(sessionToken) {\n        const result = await this.query('SELECT * FROM sessions WHERE session_token = $1 AND expires_at > NOW()', [\n            sessionToken\n        ]);\n        if (!result.rows[0]) return null;\n        const row = result.rows[0];\n        return {\n            id: row.id,\n            user_id: row.user_id,\n            token: row.session_token,\n            expires_at: row.expires_at,\n            created_at: row.created_at\n        };\n    }\n    async deleteSession(sessionToken) {\n        const result = await this.query('DELETE FROM sessions WHERE session_token = $1', [\n            sessionToken\n        ]);\n        return result.rowCount > 0;\n    }\n    async deleteUserSessions(userId) {\n        const result = await this.query('DELETE FROM sessions WHERE user_id = $1', [\n            userId\n        ]);\n        return result.rowCount;\n    }\n    async deleteExpiredSessions() {\n        const result = await this.query('DELETE FROM sessions WHERE expires_at <= NOW()');\n        return result.rowCount;\n    }\n    // === ÐœÐ•Ð¢ÐžÐ”Ð« Ð”Ð›Ð¯ ÐšÐžÐœÐœÐ•ÐÐ¢ÐÐ Ð˜Ð•Ð’ ===\n    async createComment(content, taskId, authorId) {\n        const result = await this.query(`INSERT INTO comments (content, task_id, author_id) \n       VALUES ($1, $2, $3) \n       RETURNING *`, [\n            content,\n            taskId,\n            authorId\n        ]);\n        return result.rows[0];\n    }\n    async getCommentsByTaskId(taskId) {\n        const result = await this.query('SELECT * FROM comments WHERE task_id = $1 AND deleted_at IS NULL ORDER BY created_at', [\n            taskId\n        ]);\n        return result.rows;\n    }\n    async updateComment(id, content) {\n        const result = await this.query('UPDATE comments SET content = $2 WHERE id = $1 RETURNING *', [\n            id,\n            content\n        ]);\n        return result.rows[0] || null;\n    }\n    async deleteComment(id) {\n        const result = await this.query('UPDATE comments SET deleted_at = CURRENT_TIMESTAMP WHERE id = $1', [\n            id\n        ]);\n        return result.rowCount > 0;\n    }\n    // === ÐœÐ•Ð¢ÐžÐ”Ð« Ð”Ð›Ð¯ Ð¢Ð•Ð“ÐžÐ’ ===\n    async createTag(name, color, projectId) {\n        const result = await this.query(`INSERT INTO tags (name, color, project_id) \n       VALUES ($1, $2, $3) \n       RETURNING *`, [\n            name,\n            color,\n            projectId\n        ]);\n        return result.rows[0];\n    }\n    async getTagsByProjectId(projectId) {\n        const result = await this.query('SELECT * FROM tags WHERE project_id = $1 ORDER BY name', [\n            projectId\n        ]);\n        return result.rows;\n    }\n    async addTagToTask(taskId, tagId) {\n        try {\n            await this.query('INSERT INTO task_tags (task_id, tag_id) VALUES ($1, $2)', [\n                taskId,\n                tagId\n            ]);\n            return true;\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        } catch (error) {\n            return false;\n        }\n    }\n    async removeTagFromTask(taskId, tagId) {\n        const result = await this.query('DELETE FROM task_tags WHERE task_id = $1 AND tag_id = $2', [\n            taskId,\n            tagId\n        ]);\n        return result.rowCount > 0;\n    }\n    async getTagsByTaskId(taskId) {\n        const result = await this.query(`SELECT t.* FROM tags t \n       JOIN task_tags tt ON t.id = tt.tag_id \n       WHERE tt.task_id = $1`, [\n            taskId\n        ]);\n        return result.rows;\n    }\n    // Ð¡Ñ‚Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð¼ÐµÑ‚Ð¾Ð´ Ð´Ð»Ñ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ ÑÐºÐ·ÐµÐ¼Ð¿Ð»ÑÑ€Ð° (Singleton)\n    static getInstance() {\n        if (!PostgreSQLAdapter.instance) {\n            const config = {\n                host: process.env.DB_HOST || 'localhost',\n                port: parseInt(process.env.DB_PORT || '5432'),\n                database: process.env.DB_NAME || 'encore_tasks',\n                user: process.env.DB_USER || 'postgres',\n                password: process.env.DB_PASSWORD || 'password',\n                ssl: false // ÐžÑ‚ÐºÐ»ÑŽÑ‡Ð°ÐµÐ¼ SSL Ð´Ð»Ñ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð³Ð¾ PostgreSQL\n            };\n            PostgreSQLAdapter.instance = new PostgreSQLAdapter(config);\n        }\n        return PostgreSQLAdapter.instance;\n    }\n}\n// Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ ÑÐºÐ·ÐµÐ¼Ð¿Ð»ÑÑ€Ð° Ð°Ð´Ð°Ð¿Ñ‚ÐµÑ€Ð°\nlet dbAdapter = null;\nfunction getPostgreSQLAdapter() {\n    if (!dbAdapter) {\n        const config = {\n            host: process.env.DB_HOST || 'localhost',\n            port: parseInt(process.env.DB_PORT || '5432'),\n            database: process.env.DB_NAME || 'encore_tasks',\n            user: process.env.DB_USER || 'postgres',\n            password: process.env.DB_PASSWORD || 'password',\n            ssl: process.env.DB_SSL === 'true'\n        };\n        dbAdapter = new PostgreSQLAdapter(config);\n    }\n    return dbAdapter;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (getPostgreSQLAdapter);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFlBQVksSUFBSW5MLGtCQUFrQkc7SUFDcEM7SUFFQSxPQUFPZ0w7QUFDVDtBQUVBLGlFQUFlQyxvQkFBb0JBLEVBQUMiLCJzb3VyY2VzIjpbIkU6XFxQcm9qZWN0c1xcZW5jb3JlLXRhc2tzXFxlbmNvcmUtdGFza3MtbWFpblxcc3JjXFxsaWJcXHBvc3RncmVzcWwtYWRhcHRlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQb29sLCBQb29sQ2xpZW50IH0gZnJvbSAncGcnO1xuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHRqcyc7XG5pbXBvcnQgeyBVc2VyLCBQcm9qZWN0LCBCb2FyZCwgQ29sdW1uLCBUYXNrLCBDb21tZW50LCBTZXNzaW9uIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgVGFnIH0gZnJvbSAnLi4vdHlwZXMvY29yZS50eXBlcyc7XG5cbi8vINCY0L3RgtC10YDRhNC10LnRgSDQtNC70Y8g0LrQvtC90YTQuNCz0YPRgNCw0YbQuNC4INCx0LDQt9GLINC00LDQvdC90YvRhVxuaW50ZXJmYWNlIERhdGFiYXNlQ29uZmlnIHtcbiAgaG9zdDogc3RyaW5nO1xuICBwb3J0OiBudW1iZXI7XG4gIGRhdGFiYXNlOiBzdHJpbmc7XG4gIHVzZXI6IHN0cmluZztcbiAgcGFzc3dvcmQ6IHN0cmluZztcbiAgc3NsPzogYm9vbGVhbjtcbn1cblxuLy8g0JrQu9Cw0YHRgSDQtNC70Y8g0YDQsNCx0L7RgtGLINGBIFBvc3RncmVTUUxcbmV4cG9ydCBjbGFzcyBQb3N0Z3JlU1FMQWRhcHRlciB7XG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBQb3N0Z3JlU1FMQWRhcHRlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHBvb2w6IFBvb2w7XG4gIHByaXZhdGUgY29uZmlnOiBEYXRhYmFzZUNvbmZpZztcbiAgcHJpdmF0ZSBpc0luaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBEYXRhYmFzZUNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIC8vINCh0L/QtdGG0LjQsNC70YzQvdCw0Y8g0L3QsNGB0YLRgNC+0LnQutCwIFNTTCDQtNC70Y8gU3VwYWJhc2VcbiAgICBsZXQgc3NsQ29uZmlnOiBib29sZWFuIHwgb2JqZWN0ID0gZmFsc2U7XG4gICAgaWYgKGNvbmZpZy5zc2wpIHtcbiAgICAgIC8vINCV0YHQu9C4INGF0L7RgdGCINGB0L7QtNC10YDQttC40YIgc3VwYWJhc2UuY28sINC40YHQv9C+0LvRjNC30YPQtdC8INGB0L/QtdGG0LjQsNC70YzQvdGL0LUg0L3QsNGB0YLRgNC+0LnQutC4IFNTTFxuICAgICAgaWYgKGNvbmZpZy5ob3N0LmluY2x1ZGVzKCdzdXBhYmFzZS5jbycpKSB7XG4gICAgICAgIHNzbENvbmZpZyA9IHtcbiAgICAgICAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlLFxuICAgICAgICAgIGNhOiB1bmRlZmluZWRcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNzbENvbmZpZyA9IHsgcmVqZWN0VW5hdXRob3JpemVkOiBmYWxzZSB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMucG9vbCA9IG5ldyBQb29sKHtcbiAgICAgIGhvc3Q6IGNvbmZpZy5ob3N0LFxuICAgICAgcG9ydDogY29uZmlnLnBvcnQsXG4gICAgICBkYXRhYmFzZTogY29uZmlnLmRhdGFiYXNlLFxuICAgICAgdXNlcjogY29uZmlnLnVzZXIsXG4gICAgICBwYXNzd29yZDogY29uZmlnLnBhc3N3b3JkLFxuICAgICAgc3NsOiBzc2xDb25maWcsXG4gICAgICBtYXg6IDIwLCAvLyDQvNCw0LrRgdC40LzQsNC70YzQvdC+0LUg0LrQvtC70LjRh9C10YHRgtCy0L4g0YHQvtC10LTQuNC90LXQvdC40Lkg0LIg0L/Rg9C70LVcbiAgICAgIGlkbGVUaW1lb3V0TWlsbGlzOiAzMDAwMCxcbiAgICAgIGNvbm5lY3Rpb25UaW1lb3V0TWlsbGlzOiAyMDAwLFxuICAgIH0pO1xuICB9XG5cbiAgLy8g0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0LHQsNC30Ysg0LTQsNC90L3Ri9GFXG4gIGFzeW5jIGluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZCkgcmV0dXJuO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdJbml0aWFsaXppbmcgUG9zdGdyZVNRTCBhZGFwdGVyIHdpdGggY29uZmlnOicsIHtcbiAgICAgICAgaG9zdDogdGhpcy5jb25maWcuaG9zdCxcbiAgICAgICAgcG9ydDogdGhpcy5jb25maWcucG9ydCxcbiAgICAgICAgZGF0YWJhc2U6IHRoaXMuY29uZmlnLmRhdGFiYXNlLFxuICAgICAgICB1c2VyOiB0aGlzLmNvbmZpZy51c2VyLFxuICAgICAgICBzc2w6IHRoaXMuY29uZmlnLnNzbFxuICAgICAgfSk7XG4gICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLnBvb2wuY29ubmVjdCgpO1xuICAgICAgXG4gICAgICAvLyDQn9GA0L7QstC10YDRj9C10Lwg0L/QvtC00LrQu9GO0YfQtdC90LjQtVxuICAgICAgYXdhaXQgY2xpZW50LnF1ZXJ5KCdTRUxFQ1QgTk9XKCknKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ+KchSBQb3N0Z3JlU1FMINC/0L7QtNC60LvRjtGH0LXQvdC40LUg0YPRgdGC0LDQvdC+0LLQu9C10L3QvicpO1xuICAgICAgY2xpZW50LnJlbGVhc2UoKTtcbiAgICAgIFxuICAgICAgdGhpcy5pc0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MINCe0YjQuNCx0LrQsCDQv9C+0LTQutC70Y7Rh9C10L3QuNGPINC6IFBvc3RncmVTUUw6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8g0JfQsNC60YDRi9GC0LjQtSDQv9GD0LvQsCDRgdC+0LXQtNC40L3QtdC90LjQuVxuICBhc3luYyBjbG9zZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLnBvb2wuZW5kKCk7XG4gICAgdGhpcy5pc0luaXRpYWxpemVkID0gZmFsc2U7XG4gIH1cblxuICAvLyDQn9C+0LvRg9GH0LXQvdC40LUg0LrQu9C40LXQvdGC0LAg0LTQu9GPINGC0YDQsNC90LfQsNC60YbQuNC5XG4gIGFzeW5jIGdldENsaWVudCgpOiBQcm9taXNlPFBvb2xDbGllbnQ+IHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5wb29sLmNvbm5lY3QoKTtcbiAgfVxuXG4gIC8vINCa0L7QvdCy0LXRgNGC0LDRhtC40Y8gU1FMINC40LcgU1FMaXRlINGE0L7RgNC80LDRgtCwICg/KSDQsiBQb3N0Z3JlU1FMINGE0L7RgNC80LDRgiAoJDEsICQyLCAuLi4pXG4gIHByaXZhdGUgY29udmVydFNxbFRvUG9zdGdyZVNRTChzcWw6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgbGV0IHBhcmFtSW5kZXggPSAxO1xuICAgIHJldHVybiBzcWwucmVwbGFjZSgvXFw/L2csICgpID0+IGAkJHtwYXJhbUluZGV4Kyt9YCk7XG4gIH1cblxuICAvLyDQktGL0L/QvtC70L3QtdC90LjQtSDQt9Cw0L/RgNC+0YHQsFxuICBhc3luYyBxdWVyeSh0ZXh0OiBzdHJpbmcsIHBhcmFtcz86IHVua25vd25bXSk6IFByb21pc2U8YW55PiB7XG4gICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5wb29sLmNvbm5lY3QoKTtcbiAgICB0cnkge1xuICAgICAgLy8g0JrQvtC90LLQtdGA0YLQuNGA0YPQtdC8IFNRTCDQuNC3IFNRTGl0ZSDRhNC+0YDQvNCw0YLQsCDQsiBQb3N0Z3JlU1FMINGE0L7RgNC80LDRglxuICAgICAgY29uc3QgY29udmVydGVkU3FsID0gdGhpcy5jb252ZXJ0U3FsVG9Qb3N0Z3JlU1FMKHRleHQpO1xuICAgICAgY29uc29sZS5sb2coJ09yaWdpbmFsIFNRTCBRdWVyeTonLCB0ZXh0KTtcbiAgICAgIGNvbnNvbGUubG9nKCdDb252ZXJ0ZWQgU1FMIFF1ZXJ5OicsIGNvbnZlcnRlZFNxbCk7XG4gICAgICBjb25zb2xlLmxvZygnU1FMIFBhcmFtczonLCBwYXJhbXMpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xpZW50LnF1ZXJ5KGNvbnZlcnRlZFNxbCwgcGFyYW1zKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGNsaWVudC5yZWxlYXNlKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gPT09INCc0JXQotCe0JTQqyDQlNCb0K8g0J/QntCb0KzQl9Ce0JLQkNCi0JXQm9CV0JkgPT09XG5cbiAgYXN5bmMgY3JlYXRlVXNlcih1c2VyRGF0YTogT21pdDxVc2VyLCAnaWQnIHwgJ2NyZWF0ZWRfYXQnIHwgJ3VwZGF0ZWRfYXQnPik6IFByb21pc2U8VXNlcj4ge1xuICAgIGNvbnN0IHsgZW1haWwsIG5hbWUsIHJvbGUgPSAndXNlcicsIHBhc3N3b3JkX2hhc2gsIGlzQXBwcm92ZWQgPSBmYWxzZSwgYXZhdGFyIH0gPSB1c2VyRGF0YTtcbiAgICBcbiAgICAvLyDQldGB0LvQuCBwYXNzd29yZF9oYXNoINC90LUg0L/RgNC10LTQvtGB0YLQsNCy0LvQtdC9LCDQvdC+INC10YHRgtGMINC/0LDRgNC+0LvRjCDQsiDQstC40LTQtSDRgdGC0YDQvtC60LgsINGF0LXRiNC40YDRg9C10Lwg0LXQs9C+XG4gICAgY29uc3QgdXNlckRhdGFXaXRoUGFzc3dvcmQgPSB1c2VyRGF0YSBhcyB7IHBhc3N3b3JkPzogc3RyaW5nIH07XG4gICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBwYXNzd29yZF9oYXNoIHx8ICh1c2VyRGF0YVdpdGhQYXNzd29yZC5wYXNzd29yZCA/IFxuICAgICAgYXdhaXQgYmNyeXB0Lmhhc2godXNlckRhdGFXaXRoUGFzc3dvcmQucGFzc3dvcmQsIDEyKSA6IFxuICAgICAgYXdhaXQgYmNyeXB0Lmhhc2goJ2RlZmF1bHRwYXNzd29yZCcsIDEyKSk7XG4gICAgXG4gICAgLy8g0J/RgNC10L7QsdGA0LDQt9GD0LXQvCBpc0FwcHJvdmVkINCyIGFwcHJvdmFsX3N0YXR1c1xuICAgIGNvbnN0IGFwcHJvdmFsU3RhdHVzID0gaXNBcHByb3ZlZCA/ICdhcHByb3ZlZCcgOiAncGVuZGluZyc7XG4gICAgXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5xdWVyeShcbiAgICAgIGBJTlNFUlQgSU5UTyB1c2VycyAoZW1haWwsIHBhc3N3b3JkX2hhc2gsIG5hbWUsIHJvbGUsIGFwcHJvdmFsX3N0YXR1cywgYXZhdGFyX3VybCkgXG4gICAgICAgVkFMVUVTICgkMSwgJDIsICQzLCAkNCwgJDUsICQ2KSBcbiAgICAgICBSRVRVUk5JTkcgKmAsXG4gICAgICBbZW1haWwsIGhhc2hlZFBhc3N3b3JkLCBuYW1lLCByb2xlLCBhcHByb3ZhbFN0YXR1cywgYXZhdGFyXVxuICAgICk7XG4gICAgXG4gICAgY29uc3Qgcm93ID0gcmVzdWx0LnJvd3NbMF07XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiByb3cuaWQsXG4gICAgICBuYW1lOiByb3cubmFtZSxcbiAgICAgIGVtYWlsOiByb3cuZW1haWwsXG4gICAgICBhdmF0YXI6IHJvdy5hdmF0YXJfdXJsLFxuICAgICAgcm9sZTogcm93LnJvbGUsXG4gICAgICBpc0FwcHJvdmVkOiByb3cuYXBwcm92YWxfc3RhdHVzID09PSAnYXBwcm92ZWQnLFxuICAgICAgY3JlYXRlZF9hdDogcm93LmNyZWF0ZWRfYXQsXG4gICAgICB1cGRhdGVkX2F0OiByb3cudXBkYXRlZF9hdCxcbiAgICAgIHBhc3N3b3JkX2hhc2g6IHJvdy5wYXNzd29yZF9oYXNoXG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIGdldFVzZXJCeUVtYWlsKGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCBudWxsPiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5xdWVyeShcbiAgICAgICdTRUxFQ1QgKiBGUk9NIHVzZXJzIFdIRVJFIGVtYWlsID0gJDEnLFxuICAgICAgW2VtYWlsXVxuICAgICk7XG4gICAgY29uc3Qgcm93ID0gcmVzdWx0LnJvd3NbMF07XG4gICAgaWYgKCFyb3cpIHJldHVybiBudWxsO1xuICAgIFxuICAgIC8vINCc0LDQv9C/0LjQvdCzINC/0L7Qu9C10Lkg0LHQsNC30Ysg0LTQsNC90L3Ri9GFINCyIFVzZXIg0LjQvdGC0LXRgNGE0LXQudGBXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiByb3cuaWQsXG4gICAgICBuYW1lOiByb3cubmFtZSxcbiAgICAgIGVtYWlsOiByb3cuZW1haWwsXG4gICAgICBhdmF0YXI6IHJvdy5hdmF0YXJfdXJsLFxuICAgICAgcm9sZTogcm93LnJvbGUgfHwgJ3VzZXInLFxuICAgICAgaXNBcHByb3ZlZDogcm93LmFwcHJvdmFsX3N0YXR1cyA9PT0gJ2FwcHJvdmVkJyxcbiAgICAgIGNyZWF0ZWRfYXQ6IHJvdy5jcmVhdGVkX2F0LFxuICAgICAgdXBkYXRlZF9hdDogcm93LnVwZGF0ZWRfYXQsXG4gICAgICBwYXNzd29yZF9oYXNoOiByb3cucGFzc3dvcmRfaGFzaFxuICAgIH07XG4gIH1cblxuICBhc3luYyBnZXRVc2VyQnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucXVlcnkoXG4gICAgICAnU0VMRUNUICogRlJPTSB1c2VycyBXSEVSRSBpZCA9ICQxJyxcbiAgICAgIFtpZF1cbiAgICApO1xuICAgIGNvbnN0IHJvdyA9IHJlc3VsdC5yb3dzWzBdO1xuICAgIGlmICghcm93KSByZXR1cm4gbnVsbDtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnVXNlciBkYXRhOicsIHJvdyk7XG4gICAgY29uc29sZS5sb2coJ1VzZXIgaXNBcHByb3ZlZDonLCByb3cuYXBwcm92YWxfc3RhdHVzID09PSAnYXBwcm92ZWQnLCAndHlwZTonLCB0eXBlb2YgKHJvdy5hcHByb3ZhbF9zdGF0dXMgPT09ICdhcHByb3ZlZCcpKTtcbiAgICBjb25zb2xlLmxvZygnVXNlciByb2xlOicsIHJvdy5yb2xlKTtcbiAgICBjb25zb2xlLmxvZygnRmluYWwgaXNBcHByb3ZlZDonLCByb3cuYXBwcm92YWxfc3RhdHVzID09PSAnYXBwcm92ZWQnKTtcbiAgICBcbiAgICAvLyDQnNCw0L/Qv9C40L3QsyDQv9C+0LvQtdC5INCx0LDQt9GLINC00LDQvdC90YvRhSDQsiBVc2VyINC40L3RgtC10YDRhNC10LnRgVxuICAgIHJldHVybiB7XG4gICAgICBpZDogcm93LmlkLFxuICAgICAgbmFtZTogcm93Lm5hbWUsXG4gICAgICBlbWFpbDogcm93LmVtYWlsLFxuICAgICAgYXZhdGFyOiByb3cuYXZhdGFyX3VybCxcbiAgICAgIHJvbGU6IHJvdy5yb2xlIHx8ICd1c2VyJyxcbiAgICAgIGlzQXBwcm92ZWQ6IHJvdy5hcHByb3ZhbF9zdGF0dXMgPT09ICdhcHByb3ZlZCcsXG4gICAgICBjcmVhdGVkX2F0OiByb3cuY3JlYXRlZF9hdCxcbiAgICAgIHVwZGF0ZWRfYXQ6IHJvdy51cGRhdGVkX2F0LFxuICAgICAgcGFzc3dvcmRfaGFzaDogcm93LnBhc3N3b3JkX2hhc2hcbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlVXNlcihpZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPFVzZXI+KTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICAgIGNvbnN0IGZpZWxkcyA9IE9iamVjdC5rZXlzKHVwZGF0ZXMpLmZpbHRlcihrZXkgPT4ga2V5ICE9PSAnaWQnICYmIGtleSAhPT0gJ2NyZWF0ZWRfYXQnICYmIGtleSAhPT0gJ3VwZGF0ZWRfYXQnKTtcbiAgICBcbiAgICBpZiAoZmllbGRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0VXNlckJ5SWQoaWQpO1xuICAgIH1cblxuICAgIC8vINCc0LDQv9C/0LjQvdCzINC/0L7Qu9C10Lkg0LjQvdGC0LXRgNGE0LXQudGB0LAgVXNlciDQsiDQv9C+0LvRjyDQsdCw0LfRiyDQtNCw0L3QvdGL0YVcbiAgICBjb25zdCBkYkZpZWxkcyA9IGZpZWxkcy5tYXAoZmllbGQgPT4ge1xuICAgICAgaWYgKGZpZWxkID09PSAnYXZhdGFyJykgcmV0dXJuICdhdmF0YXJfdXJsJztcbiAgICAgIGlmIChmaWVsZCA9PT0gJ2lzQXBwcm92ZWQnKSByZXR1cm4gJ2FwcHJvdmFsX3N0YXR1cyc7XG4gICAgICByZXR1cm4gZmllbGQ7XG4gICAgfSk7XG4gICAgXG4gICAgLy8g0J/RgNC10L7QsdGA0LDQt9GD0LXQvCDQt9C90LDRh9C10L3QuNGPINC00LvRjyDQsdCw0LfRiyDQtNCw0L3QvdGL0YVcbiAgICBjb25zdCBkYlZhbHVlcyA9IGZpZWxkcy5tYXAoZmllbGQgPT4ge1xuICAgICAgaWYgKGZpZWxkID09PSAnaXNBcHByb3ZlZCcpIHtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZXNbZmllbGRdID8gJ2FwcHJvdmVkJyA6ICdwZW5kaW5nJztcbiAgICAgIH1cbiAgICAgIHJldHVybiB1cGRhdGVzW2ZpZWxkIGFzIGtleW9mIFVzZXJdO1xuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IHNldENsYXVzZSA9IGRiRmllbGRzLm1hcCgoZmllbGQsIGluZGV4KSA9PiBgJHtmaWVsZH0gPSAkJHtpbmRleCArIDJ9YCkuam9pbignLCAnKTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucXVlcnkoXG4gICAgICBgVVBEQVRFIHVzZXJzIFNFVCAke3NldENsYXVzZX0sIHVwZGF0ZWRfYXQgPSBDVVJSRU5UX1RJTUVTVEFNUCBXSEVSRSBpZCA9ICQxIFJFVFVSTklORyAqYCxcbiAgICAgIFtpZCwgLi4uZGJWYWx1ZXNdXG4gICAgKTtcbiAgICBcbiAgICBjb25zdCByb3cgPSByZXN1bHQucm93c1swXTtcbiAgICBpZiAoIXJvdykgcmV0dXJuIG51bGw7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiByb3cuaWQsXG4gICAgICBuYW1lOiByb3cubmFtZSxcbiAgICAgIGVtYWlsOiByb3cuZW1haWwsXG4gICAgICBhdmF0YXI6IHJvdy5hdmF0YXJfdXJsLFxuICAgICAgcm9sZTogcm93LnJvbGUsXG4gICAgICBpc0FwcHJvdmVkOiByb3cuaXNfYXBwcm92ZWQsXG4gICAgICBjcmVhdGVkX2F0OiByb3cuY3JlYXRlZF9hdCxcbiAgICAgIHVwZGF0ZWRfYXQ6IHJvdy51cGRhdGVkX2F0LFxuICAgICAgcGFzc3dvcmRfaGFzaDogcm93LnBhc3N3b3JkX2hhc2hcbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgZ2V0QWxsVXNlcnMoKTogUHJvbWlzZTxVc2VyW10+IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnF1ZXJ5KFxuICAgICAgJ1NFTEVDVCAqIEZST00gdXNlcnMgT1JERVIgQlkgY3JlYXRlZF9hdCBERVNDJ1xuICAgICk7XG4gICAgcmV0dXJuIHJlc3VsdC5yb3dzLm1hcCgocm93OiBhbnkpID0+ICh7XG4gICAgICBpZDogcm93LmlkLFxuICAgICAgbmFtZTogcm93Lm5hbWUsXG4gICAgICBlbWFpbDogcm93LmVtYWlsLFxuICAgICAgYXZhdGFyOiByb3cuYXZhdGFyX3VybCxcbiAgICAgIHJvbGU6IHJvdy5yb2xlIHx8ICd1c2VyJyxcbiAgICAgIGlzQXBwcm92ZWQ6IHJvdy5hcHByb3ZhbF9zdGF0dXMgPT09ICdhcHByb3ZlZCcsXG4gICAgICBjcmVhdGVkX2F0OiByb3cuY3JlYXRlZF9hdCxcbiAgICAgIHVwZGF0ZWRfYXQ6IHJvdy51cGRhdGVkX2F0LFxuICAgICAgcGFzc3dvcmRfaGFzaDogcm93LnBhc3N3b3JkX2hhc2hcbiAgICB9KSk7XG4gIH1cblxuICBhc3luYyBkZWxldGVVc2VyKGlkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnF1ZXJ5KFxuICAgICAgJ0RFTEVURSBGUk9NIHVzZXJzIFdIRVJFIGlkID0gJDEnLFxuICAgICAgW2lkXVxuICAgICk7XG4gICAgcmV0dXJuIHJlc3VsdC5yb3dDb3VudCA+IDA7XG4gIH1cblxuICAvLyA9PT0g0JzQldCi0J7QlNCrINCU0JvQryDQn9Cg0J7QldCa0KLQntCSID09PVxuXG4gIGFzeW5jIGNyZWF0ZVByb2plY3QocHJvamVjdERhdGE6IHsgbmFtZTogc3RyaW5nOyBkZXNjcmlwdGlvbjogc3RyaW5nOyBjcmVhdGVkX2J5OiBzdHJpbmc7IGNvbG9yPzogc3RyaW5nOyBpY29uX3VybD86IHN0cmluZzsgdGVsZWdyYW1fY2hhdF9pZD86IHN0cmluZzsgdGVsZWdyYW1fdG9waWNfaWQ/OiBzdHJpbmcgfSk6IFByb21pc2U8UHJvamVjdD4ge1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIFBvc3RncmVTUUwgY3JlYXRlUHJvamVjdCBjYWxsZWQgd2l0aDonLCBwcm9qZWN0RGF0YSk7XG4gICAgdHJ5IHtcbiAgICAgIC8vINCa0L7QvdCy0LXRgNGC0LjRgNGD0LXQvCDRgdGC0YDQvtC60L7QstGL0LkgSUQg0LIgaW50ZWdlciDQtNC70Y8gUG9zdGdyZVNRTFxuICAgICAgY29uc3Qgb3duZXJJZEludCA9IHBhcnNlSW50KHByb2plY3REYXRhLmNyZWF0ZWRfYnksIDEwKTtcbiAgICAgIGlmIChpc05hTihvd25lcklkSW50KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdXNlciBJRDogJHtwcm9qZWN0RGF0YS5jcmVhdGVkX2J5fWApO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnF1ZXJ5KFxuICAgICAgICBgSU5TRVJUIElOVE8gcHJvamVjdHMgKG5hbWUsIGRlc2NyaXB0aW9uLCBvd25lcl9pZCwgY29sb3IsIGljb24sIHRlbGVncmFtX2NoYXRfaWQsIHRlbGVncmFtX3RvcGljX2lkLCBpc19hY3RpdmUsIGNyZWF0ZWRfYXQsIHVwZGF0ZWRfYXQpXG4gICAgICAgVkFMVUVTICgkMSwgJDIsICQzLCAkNCwgJDUsICQ2LCAkNywgJDgsIENVUlJFTlRfVElNRVNUQU1QLCBDVVJSRU5UX1RJTUVTVEFNUCkgUkVUVVJOSU5HICpgLFxuICAgICAgICBbcHJvamVjdERhdGEubmFtZSwgcHJvamVjdERhdGEuZGVzY3JpcHRpb24sIG93bmVySWRJbnQsIHByb2plY3REYXRhLmNvbG9yIHx8ICcjM0I4MkY2JywgcHJvamVjdERhdGEuaWNvbl91cmwgfHwgbnVsbCwgcHJvamVjdERhdGEudGVsZWdyYW1fY2hhdF9pZCB8fCBudWxsLCBwcm9qZWN0RGF0YS50ZWxlZ3JhbV90b3BpY19pZCB8fCBudWxsLCB0cnVlXVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgY29uc3QgcHJvamVjdCA9IHJlc3VsdC5yb3dzWzBdO1xuICAgICAgXG4gICAgICAvLyDQlNC+0LHQsNCy0LvRj9C10Lwg0LLQu9Cw0LTQtdC70YzRhtCwINC/0YDQvtC10LrRgtCwINCyIHByb2plY3RfbWVtYmVycyDRgSDRgNC+0LvRjNGOICdvd25lcidcbiAgICAgIGF3YWl0IHRoaXMucXVlcnkoXG4gICAgICAgIGBJTlNFUlQgSU5UTyBwcm9qZWN0X21lbWJlcnMgKHByb2plY3RfaWQsIHVzZXJfaWQsIHJvbGUsIGpvaW5lZF9hdClcbiAgICAgICAgIFZBTFVFUyAoJDEsICQyLCAkMywgQ1VSUkVOVF9USU1FU1RBTVApYCxcbiAgICAgICAgW3Byb2plY3QuaWQsIG93bmVySWRJbnQsICdvd25lciddXG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyDQn9GA0LXQvtCx0YDQsNC30YPQtdC8IG93bmVyX2lkINC+0LHRgNCw0YLQvdC+INCyIGNyZWF0ZWRfYnkg0LTQu9GPINGB0L7QstC80LXRgdGC0LjQvNC+0YHRgtC4INGBIEFQSVxuICAgICAgY29uc3QgYXBpUHJvamVjdCA9IHtcbiAgICAgICAgLi4ucHJvamVjdCxcbiAgICAgICAgY3JlYXRlZF9ieTogcHJvamVjdC5vd25lcl9pZC50b1N0cmluZygpLFxuICAgICAgICBpY29uX3VybDogcHJvamVjdC5pY29uLFxuICAgICAgICB0ZWxlZ3JhbV9jaGF0X2lkOiBwcm9qZWN0LnRlbGVncmFtX2NoYXRfaWQsXG4gICAgICAgIHRlbGVncmFtX3RvcGljX2lkOiBwcm9qZWN0LnRlbGVncmFtX3RvcGljX2lkXG4gICAgICB9O1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygn4pyFIFBvc3RncmVTUUwgcHJvamVjdCBjcmVhdGVkIHN1Y2Nlc3NmdWxseSB3aXRoIG93bmVyIG1lbWJlcnNoaXA6JywgYXBpUHJvamVjdCk7XG4gICAgICByZXR1cm4gYXBpUHJvamVjdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIFBvc3RncmVTUUwgY3JlYXRlUHJvamVjdCBlcnJvcjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRQcm9qZWN0QnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxQcm9qZWN0IHwgbnVsbD4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucXVlcnkoXG4gICAgICAnU0VMRUNUICogRlJPTSBwcm9qZWN0cyBXSEVSRSBpZCA9ICQxJyxcbiAgICAgIFtpZF1cbiAgICApO1xuICAgIGNvbnN0IHByb2plY3QgPSByZXN1bHQucm93c1swXTtcbiAgICBpZiAoIXByb2plY3QpIHJldHVybiBudWxsO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICAuLi5wcm9qZWN0LFxuICAgICAgY3JlYXRlZF9ieTogcHJvamVjdC5vd25lcl9pZC50b1N0cmluZygpLFxuICAgICAgaWNvbl91cmw6IHByb2plY3QuaWNvbixcbiAgICAgIHRlbGVncmFtX2NoYXRfaWQ6IHByb2plY3QudGVsZWdyYW1fY2hhdF9pZCxcbiAgICAgIHRlbGVncmFtX3RvcGljX2lkOiBwcm9qZWN0LnRlbGVncmFtX3RvcGljX2lkXG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIGdldFByb2plY3RzQnlVc2VySWQodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFByb2plY3RbXT4ge1xuICAgIC8vINCa0L7QvdCy0LXRgNGC0LjRgNGD0LXQvCB1c2VySWQg0LIgaW50ZWdlciDQtNC70Y8gUG9zdGdyZVNRTFxuICAgIGNvbnN0IHVzZXJJZEludCA9IHBhcnNlSW50KHVzZXJJZCwgMTApO1xuICAgIGlmIChpc05hTih1c2VySWRJbnQpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIHVzZXJJZCBmb3IgZ2V0UHJvamVjdHNCeVVzZXJJZDonLCB1c2VySWQpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnF1ZXJ5KFxuICAgICAgYFNFTEVDVCBESVNUSU5DVCBwLiogRlJPTSBwcm9qZWN0cyBwIFxuICAgICAgIExFRlQgSk9JTiBwcm9qZWN0X21lbWJlcnMgcG0gT04gcC5pZCA9IHBtLnByb2plY3RfaWQgXG4gICAgICAgV0hFUkUgKHAub3duZXJfaWQgPSAkMSBPUiBwbS51c2VyX2lkID0gJDEpIFxuICAgICAgIE9SREVSIEJZIHAuY3JlYXRlZF9hdCBERVNDYCxcbiAgICAgIFt1c2VySWRJbnRdXG4gICAgKTtcbiAgICByZXR1cm4gcmVzdWx0LnJvd3MubWFwKChwcm9qZWN0OiBhbnkpID0+ICh7XG4gICAgICAuLi5wcm9qZWN0LFxuICAgICAgY3JlYXRlZF9ieTogcHJvamVjdC5vd25lcl9pZC50b1N0cmluZygpLFxuICAgICAgaWNvbl91cmw6IHByb2plY3QuaWNvbixcbiAgICAgIHRlbGVncmFtX2NoYXRfaWQ6IHByb2plY3QudGVsZWdyYW1fY2hhdF9pZCxcbiAgICAgIHRlbGVncmFtX3RvcGljX2lkOiBwcm9qZWN0LnRlbGVncmFtX3RvcGljX2lkXG4gICAgfSkpO1xuICB9XG5cbiAgYXN5bmMgZ2V0VXNlclByb2plY3RzKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxQcm9qZWN0W10+IHtcbiAgICByZXR1cm4gdGhpcy5nZXRQcm9qZWN0c0J5VXNlcklkKHVzZXJJZCk7XG4gIH1cblxuICBhc3luYyBnZXRBbGxQcm9qZWN0cygpOiBQcm9taXNlPFByb2plY3RbXT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucXVlcnkoXG4gICAgICAnU0VMRUNUICogRlJPTSBwcm9qZWN0cyBPUkRFUiBCWSBjcmVhdGVkX2F0IERFU0MnXG4gICAgKTtcbiAgICByZXR1cm4gcmVzdWx0LnJvd3MubWFwKChwcm9qZWN0OiBhbnkpID0+ICh7XG4gICAgICAuLi5wcm9qZWN0LFxuICAgICAgY3JlYXRlZF9ieTogcHJvamVjdC5vd25lcl9pZC50b1N0cmluZygpLFxuICAgICAgaWNvbl91cmw6IHByb2plY3QuaWNvbixcbiAgICAgIHRlbGVncmFtX2NoYXRfaWQ6IHByb2plY3QudGVsZWdyYW1fY2hhdF9pZCxcbiAgICAgIHRlbGVncmFtX3RvcGljX2lkOiBwcm9qZWN0LnRlbGVncmFtX3RvcGljX2lkXG4gICAgfSkpO1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlUHJvamVjdChpZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPFByb2plY3Q+KTogUHJvbWlzZTxQcm9qZWN0IHwgbnVsbD4ge1xuICAgIGNvbnN0IGZpZWxkcyA9IE9iamVjdC5rZXlzKHVwZGF0ZXMpLmZpbHRlcihrZXkgPT4ga2V5ICE9PSAnaWQnKTtcbiAgICBjb25zdCB2YWx1ZXMgPSBmaWVsZHMubWFwKGZpZWxkID0+IHVwZGF0ZXNbZmllbGQgYXMga2V5b2YgUHJvamVjdF0pO1xuICAgIGNvbnN0IHNldENsYXVzZSA9IGZpZWxkcy5tYXAoKGZpZWxkLCBpbmRleCkgPT4gYCR7ZmllbGR9ID0gJCR7aW5kZXggKyAyfWApLmpvaW4oJywgJyk7XG4gICAgXG4gICAgaWYgKGZpZWxkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldFByb2plY3RCeUlkKGlkKTtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnF1ZXJ5KFxuICAgICAgYFVQREFURSBwcm9qZWN0cyBTRVQgJHtzZXRDbGF1c2V9IFdIRVJFIGlkID0gJDEgUkVUVVJOSU5HICpgLFxuICAgICAgW2lkLCAuLi52YWx1ZXNdXG4gICAgKTtcbiAgICBjb25zdCBwcm9qZWN0ID0gcmVzdWx0LnJvd3NbMF07XG4gICAgaWYgKCFwcm9qZWN0KSByZXR1cm4gbnVsbDtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgLi4ucHJvamVjdCxcbiAgICAgIGNyZWF0ZWRfYnk6IHByb2plY3Qub3duZXJfaWQudG9TdHJpbmcoKSxcbiAgICAgIGljb25fdXJsOiBwcm9qZWN0Lmljb24sXG4gICAgICB0ZWxlZ3JhbV9jaGF0X2lkOiBwcm9qZWN0LnRlbGVncmFtX2NoYXRfaWQsXG4gICAgICB0ZWxlZ3JhbV90b3BpY19pZDogcHJvamVjdC50ZWxlZ3JhbV90b3BpY19pZFxuICAgIH07XG4gIH1cblxuICBhc3luYyBkZWxldGVQcm9qZWN0KGlkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnF1ZXJ5KFxuICAgICAgJ0RFTEVURSBGUk9NIHByb2plY3RzIFdIRVJFIGlkID0gJDEnLFxuICAgICAgW2lkXVxuICAgICk7XG4gICAgcmV0dXJuIHJlc3VsdC5yb3dDb3VudCA+IDA7XG4gIH1cblxuICBhc3luYyBoYXNQcm9qZWN0QWNjZXNzKHVzZXJJZDogc3RyaW5nLCBwcm9qZWN0SWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICAvLyDQmtC+0L3QstC10YDRgtC40YDRg9C10LwgdXNlcklkINCyIGludGVnZXIg0LTQu9GPINGB0YDQsNCy0L3QtdC90LjRjyDRgSBQb3N0Z3JlU1FMXG4gICAgICBjb25zdCB1c2VySWRJbnQgPSBwYXJzZUludCh1c2VySWQsIDEwKTtcbiAgICAgIGlmIChpc05hTih1c2VySWRJbnQpKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgdXNlcklkIGZvciBhY2Nlc3MgY2hlY2s6JywgdXNlcklkKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyDQn9GA0L7QstC10YDRj9C10LwsINGP0LLQu9GP0LXRgtGB0Y8g0LvQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0LLQu9Cw0LTQtdC70YzRhtC10Lwg0L/RgNC+0LXQutGC0LBcbiAgICAgIGNvbnN0IG93bmVyUmVzdWx0ID0gYXdhaXQgdGhpcy5xdWVyeShcbiAgICAgICAgJ1NFTEVDVCBvd25lcl9pZCBGUk9NIHByb2plY3RzIFdIRVJFIGlkID0gJDEnLFxuICAgICAgICBbcHJvamVjdElkXVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgaWYgKG93bmVyUmVzdWx0LnJvd3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTsgLy8g0J/RgNC+0LXQutGCINC90LUg0L3QsNC50LTQtdC9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHByb2plY3RPd25lciA9IG93bmVyUmVzdWx0LnJvd3NbMF0ub3duZXJfaWQ7XG4gICAgICBpZiAocHJvamVjdE93bmVyID09PSB1c2VySWRJbnQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7IC8vINCf0L7Qu9GM0LfQvtCy0LDRgtC10LvRjCDRj9Cy0LvRj9C10YLRgdGPINCy0LvQsNC00LXQu9GM0YbQtdC8XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCDRh9C70LXQvdGB0YLQstC+INCyINC/0YDQvtC10LrRgtC1XG4gICAgICBjb25zdCBtZW1iZXJSZXN1bHQgPSBhd2FpdCB0aGlzLnF1ZXJ5KFxuICAgICAgICAnU0VMRUNUIDEgRlJPTSBwcm9qZWN0X21lbWJlcnMgV0hFUkUgcHJvamVjdF9pZCA9ICQxIEFORCB1c2VyX2lkID0gJDInLFxuICAgICAgICBbcHJvamVjdElkLCB1c2VySWRJbnRdXG4gICAgICApO1xuICAgICAgXG4gICAgICByZXR1cm4gbWVtYmVyUmVzdWx0LnJvd3MubGVuZ3RoID4gMDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2hlY2tpbmcgcHJvamVjdCBhY2Nlc3M6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8vID09PSDQnNCV0KLQntCU0Ksg0JTQm9CvINCU0J7QodCe0JogPT09XG5cbiAgYXN5bmMgY3JlYXRlQm9hcmQoYm9hcmREYXRhOiBhbnkpOiBQcm9taXNlPEJvYXJkPiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5xdWVyeShcbiAgICAgIGBJTlNFUlQgSU5UTyBib2FyZHMgKG5hbWUsIGRlc2NyaXB0aW9uLCBwcm9qZWN0X2lkLCBjcmVhdGVkX2J5LCBjcmVhdGVkX2F0LCB1cGRhdGVkX2F0KSBcbiAgICAgICBWQUxVRVMgKCQxLCAkMiwgJDMsICQ0LCBDVVJSRU5UX1RJTUVTVEFNUCwgQ1VSUkVOVF9USU1FU1RBTVApIFxuICAgICAgIFJFVFVSTklORyAqYCxcbiAgICAgIFtib2FyZERhdGEubmFtZSwgYm9hcmREYXRhLmRlc2NyaXB0aW9uIHx8ICcnLCBib2FyZERhdGEucHJvamVjdF9pZCwgcGFyc2VJbnQoYm9hcmREYXRhLmNyZWF0ZWRfYnksIDEwKV1cbiAgICApO1xuICAgIHJldHVybiByZXN1bHQucm93c1swXTtcbiAgfVxuXG4gIGFzeW5jIGdldEJvYXJkQnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxCb2FyZCB8IG51bGw+IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnF1ZXJ5KFxuICAgICAgJ1NFTEVDVCAqIEZST00gYm9hcmRzIFdIRVJFIGlkID0gJDEnLFxuICAgICAgW2lkXVxuICAgICk7XG4gICAgcmV0dXJuIHJlc3VsdC5yb3dzWzBdIHx8IG51bGw7XG4gIH1cblxuICBhc3luYyBnZXRCb2FyZHNCeVByb2plY3RJZChwcm9qZWN0SWQ6IHN0cmluZyk6IFByb21pc2U8Qm9hcmRbXT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucXVlcnkoXG4gICAgICBgU0VMRUNUIGIuKiBGUk9NIGJvYXJkcyBiIFxuICAgICAgIEpPSU4gcHJvamVjdHMgcCBPTiBiLnByb2plY3RfaWQgPSBwLmlkIFxuICAgICAgIFdIRVJFIGIucHJvamVjdF9pZCA9ICQxIFxuICAgICAgIE9SREVSIEJZIGIucG9zaXRpb24gQVNDLCBiLmNyZWF0ZWRfYXQgREVTQ2AsXG4gICAgICBbcHJvamVjdElkXVxuICAgICk7XG4gICAgcmV0dXJuIHJlc3VsdC5yb3dzO1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlQm9hcmQoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxCb2FyZD4pOiBQcm9taXNlPEJvYXJkIHwgbnVsbD4ge1xuICAgIGNvbnN0IGZpZWxkcyA9IE9iamVjdC5rZXlzKHVwZGF0ZXMpLmZpbHRlcihrZXkgPT4ga2V5ICE9PSAnaWQnKTtcbiAgICBjb25zdCB2YWx1ZXMgPSBmaWVsZHMubWFwKGZpZWxkID0+IHVwZGF0ZXNbZmllbGQgYXMga2V5b2YgQm9hcmRdKTtcbiAgICBjb25zdCBzZXRDbGF1c2UgPSBmaWVsZHMubWFwKChmaWVsZCwgaW5kZXgpID0+IGAke2ZpZWxkfSA9ICQke2luZGV4ICsgMn1gKS5qb2luKCcsICcpO1xuICAgIFxuICAgIGlmIChmaWVsZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRCb2FyZEJ5SWQoaWQpO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucXVlcnkoXG4gICAgICBgVVBEQVRFIGJvYXJkcyBTRVQgJHtzZXRDbGF1c2V9IFdIRVJFIGlkID0gJDEgUkVUVVJOSU5HICpgLFxuICAgICAgW2lkLCAuLi52YWx1ZXNdXG4gICAgKTtcbiAgICByZXR1cm4gcmVzdWx0LnJvd3NbMF0gfHwgbnVsbDtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZUJvYXJkKGlkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnF1ZXJ5KFxuICAgICAgJ0RFTEVURSBGUk9NIGJvYXJkcyBXSEVSRSBpZCA9ICQxJyxcbiAgICAgIFtpZF1cbiAgICApO1xuICAgIHJldHVybiByZXN1bHQucm93Q291bnQgPiAwO1xuICB9XG5cbiAgLy8gPT09INCc0JXQotCe0JTQqyDQlNCb0K8g0JrQntCb0J7QndCe0JogPT09XG5cbiAgYXN5bmMgY3JlYXRlQ29sdW1uKHRpdGxlOiBzdHJpbmcsIGJvYXJkSWQ6IHN0cmluZywgcG9zaXRpb24/OiBudW1iZXIsIGNvbG9yPzogc3RyaW5nLCBjcmVhdGVkQnk/OiBzdHJpbmcpOiBQcm9taXNlPENvbHVtbj4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucXVlcnkoXG4gICAgICBgSU5TRVJUIElOVE8gY29sdW1ucyAodGl0bGUsIGJvYXJkX2lkLCBwb3NpdGlvbiwgY29sb3IsIHNldHRpbmdzLCBjcmVhdGVkX2J5KSBcbiAgICAgICBWQUxVRVMgKCQxLCAkMiwgJDMsICQ0LCAkNSwgJDYpIFxuICAgICAgIFJFVFVSTklORyAqYCxcbiAgICAgIFt0aXRsZSwgYm9hcmRJZCwgcG9zaXRpb24gfHwgMCwgY29sb3IgfHwgJyM2QjcyODAnLCAne30nLCBjcmVhdGVkQnkgfHwgbnVsbF1cbiAgICApO1xuICAgIHJldHVybiByZXN1bHQucm93c1swXTtcbiAgfVxuXG4gIGFzeW5jIGdldENvbHVtbkJ5SWQoaWQ6IHN0cmluZyk6IFByb21pc2U8Q29sdW1uIHwgbnVsbD4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucXVlcnkoXG4gICAgICAnU0VMRUNUICogRlJPTSBjb2x1bW5zIFdIRVJFIGlkID0gJDEnLFxuICAgICAgW2lkXVxuICAgICk7XG4gICAgcmV0dXJuIHJlc3VsdC5yb3dzWzBdIHx8IG51bGw7XG4gIH1cblxuICBhc3luYyBnZXRDb2x1bW5zQnlCb2FyZElkKGJvYXJkSWQ6IHN0cmluZyk6IFByb21pc2U8Q29sdW1uW10+IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnF1ZXJ5KFxuICAgICAgJ1NFTEVDVCAqIEZST00gY29sdW1ucyBXSEVSRSBib2FyZF9pZCA9ICQxIE9SREVSIEJZIHBvc2l0aW9uIEFTQywgY3JlYXRlZF9hdCBERVNDJyxcbiAgICAgIFtib2FyZElkXVxuICAgICk7XG4gICAgcmV0dXJuIHJlc3VsdC5yb3dzO1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ29sdW1uKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8Q29sdW1uPik6IFByb21pc2U8Q29sdW1uIHwgbnVsbD4ge1xuICAgIGNvbnN0IGZpZWxkcyA9IE9iamVjdC5rZXlzKHVwZGF0ZXMpLmZpbHRlcihrZXkgPT4ga2V5ICE9PSAnaWQnKTtcbiAgICBjb25zdCB2YWx1ZXMgPSBmaWVsZHMubWFwKGZpZWxkID0+IHVwZGF0ZXNbZmllbGQgYXMga2V5b2YgQ29sdW1uXSk7XG4gICAgY29uc3Qgc2V0Q2xhdXNlID0gZmllbGRzLm1hcCgoZmllbGQsIGluZGV4KSA9PiBgJHtmaWVsZH0gPSAkJHtpbmRleCArIDJ9YCkuam9pbignLCAnKTtcbiAgICBcbiAgICBpZiAoZmllbGRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0Q29sdW1uQnlJZChpZCk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5xdWVyeShcbiAgICAgIGBVUERBVEUgY29sdW1ucyBTRVQgJHtzZXRDbGF1c2V9IFdIRVJFIGlkID0gJDEgUkVUVVJOSU5HICpgLFxuICAgICAgW2lkLCAuLi52YWx1ZXNdXG4gICAgKTtcbiAgICByZXR1cm4gcmVzdWx0LnJvd3NbMF0gfHwgbnVsbDtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZUNvbHVtbihpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5xdWVyeShcbiAgICAgICdERUxFVEUgRlJPTSBjb2x1bW5zIFdIRVJFIGlkID0gJDEnLFxuICAgICAgW2lkXVxuICAgICk7XG4gICAgcmV0dXJuIHJlc3VsdC5yb3dDb3VudCA+IDA7XG4gIH1cblxuICAvLyA9PT0g0JzQldCi0J7QlNCrINCU0JvQryDQl9CQ0JTQkNCnID09PVxuXG4gIGFzeW5jIGNyZWF0ZVRhc2sodGFza0RhdGE6IFBhcnRpYWw8VGFzaz4pOiBQcm9taXNlPFRhc2s+IHtcbiAgICBjb25zdCB7XG4gICAgICB0aXRsZSxcbiAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgc3RhdHVzID0gJ3RvZG8nLFxuICAgICAgcHJpb3JpdHkgPSAnbWVkaXVtJyxcbiAgICAgIHByb2plY3RfaWQsXG4gICAgICBib2FyZF9pZCxcbiAgICAgIGNvbHVtbl9pZCxcbiAgICAgIGFzc2lnbmVlX2lkLFxuICAgICAgcmVwb3J0ZXJfaWQsXG4gICAgICBwb3NpdGlvbiA9IDBcbiAgICB9ID0gdGFza0RhdGE7XG5cbiAgICAvLyDQodC+0LfQtNCw0LXQvCDQt9Cw0LTQsNGH0YMg0LHQtdC3IGFzc2lnbmVlX2lkICjQuNGB0L/QvtC70YzQt9GD0LXRgtGB0Y8g0L7RgtC00LXQu9GM0L3QsNGPINGC0LDQsdC70LjRhtCwIHRhc2tfYXNzaWduZWVzKVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucXVlcnkoXG4gICAgICBgSU5TRVJUIElOVE8gdGFza3MgKHRpdGxlLCBkZXNjcmlwdGlvbiwgc3RhdHVzLCBwcmlvcml0eSwgcHJvamVjdF9pZCwgYm9hcmRfaWQsIGNvbHVtbl9pZCwgcmVwb3J0ZXJfaWQsIHBvc2l0aW9uKSBcbiAgICAgICBWQUxVRVMgKCQxLCAkMiwgJDMsICQ0LCAkNSwgJDYsICQ3LCAkOCwgJDkpIFxuICAgICAgIFJFVFVSTklORyAqYCxcbiAgICAgIFt0aXRsZSwgZGVzY3JpcHRpb24sIHN0YXR1cywgcHJpb3JpdHksIHByb2plY3RfaWQsIGJvYXJkX2lkLCBjb2x1bW5faWQsIHJlcG9ydGVyX2lkLCBwb3NpdGlvbl1cbiAgICApO1xuICAgIFxuICAgIGNvbnN0IHRhc2sgPSByZXN1bHQucm93c1swXTtcbiAgICBcbiAgICAvLyDQldGB0LvQuCDRg9C60LDQt9Cw0L0gYXNzaWduZWVfaWQsINGB0L7Qt9C00LDQtdC8INC30LDQv9C40YHRjCDQsiDRgtCw0LHQu9C40YbQtSB0YXNrX2Fzc2lnbmVlc1xuICAgIGlmIChhc3NpZ25lZV9pZCkge1xuICAgICAgYXdhaXQgdGhpcy5xdWVyeShcbiAgICAgICAgYElOU0VSVCBJTlRPIHRhc2tfYXNzaWduZWVzICh0YXNrX2lkLCB1c2VyX2lkLCBhc3NpZ25lZF9ieSkgXG4gICAgICAgICBWQUxVRVMgKCQxLCAkMiwgJDMpYCxcbiAgICAgICAgW3Rhc2suaWQsIGFzc2lnbmVlX2lkLCByZXBvcnRlcl9pZF1cbiAgICAgICk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB0YXNrO1xuICB9XG5cbiAgYXN5bmMgZ2V0VGFza0J5SWQoaWQ6IHN0cmluZyk6IFByb21pc2U8VGFzayB8IG51bGw+IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnF1ZXJ5KFxuICAgICAgJ1NFTEVDVCAqIEZST00gdGFza3MgV0hFUkUgaWQgPSAkMScsXG4gICAgICBbaWRdXG4gICAgKTtcbiAgICByZXR1cm4gcmVzdWx0LnJvd3NbMF0gfHwgbnVsbDtcbiAgfVxuXG4gIGFzeW5jIGdldFRhc2tzQnlQcm9qZWN0SWQocHJvamVjdElkOiBzdHJpbmcpOiBQcm9taXNlPFRhc2tbXT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucXVlcnkoXG4gICAgICAnU0VMRUNUICogRlJPTSB0YXNrcyBXSEVSRSBwcm9qZWN0X2lkID0gJDEgT1JERVIgQlkgcG9zaXRpb24gQVNDLCBjcmVhdGVkX2F0IERFU0MnLFxuICAgICAgW3Byb2plY3RJZF1cbiAgICApO1xuICAgIHJldHVybiByZXN1bHQucm93cztcbiAgfVxuXG4gIGFzeW5jIGdldFRhc2tzQnlDb2x1bW5JZChjb2x1bW5JZDogc3RyaW5nKTogUHJvbWlzZTxUYXNrW10+IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnF1ZXJ5KFxuICAgICAgJ1NFTEVDVCAqIEZST00gdGFza3MgV0hFUkUgY29sdW1uX2lkID0gJDEgT1JERVIgQlkgcG9zaXRpb24gQVNDLCBjcmVhdGVkX2F0IERFU0MnLFxuICAgICAgW2NvbHVtbklkXVxuICAgICk7XG4gICAgcmV0dXJuIHJlc3VsdC5yb3dzO1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlVGFzayhpZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPFRhc2s+KTogUHJvbWlzZTxUYXNrIHwgbnVsbD4ge1xuICAgIGNvbnN0IGZpZWxkcyA9IE9iamVjdC5rZXlzKHVwZGF0ZXMpLmZpbHRlcihrZXkgPT4ga2V5ICE9PSAnaWQnKTtcbiAgICBjb25zdCB2YWx1ZXMgPSBmaWVsZHMubWFwKGZpZWxkID0+IHVwZGF0ZXNbZmllbGQgYXMga2V5b2YgVGFza10pO1xuICAgIGNvbnN0IHNldENsYXVzZSA9IGZpZWxkcy5tYXAoKGZpZWxkLCBpbmRleCkgPT4gYCR7ZmllbGR9ID0gJCR7aW5kZXggKyAyfWApLmpvaW4oJywgJyk7XG4gICAgXG4gICAgaWYgKGZpZWxkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldFRhc2tCeUlkKGlkKTtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnF1ZXJ5KFxuICAgICAgYFVQREFURSB0YXNrcyBTRVQgJHtzZXRDbGF1c2V9IFdIRVJFIGlkID0gJDEgUkVUVVJOSU5HICpgLFxuICAgICAgW2lkLCAuLi52YWx1ZXNdXG4gICAgKTtcbiAgICByZXR1cm4gcmVzdWx0LnJvd3NbMF0gfHwgbnVsbDtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZVRhc2soaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucXVlcnkoXG4gICAgICAnREVMRVRFIEZST00gdGFza3MgV0hFUkUgaWQgPSAkMScsXG4gICAgICBbaWRdXG4gICAgKTtcbiAgICByZXR1cm4gcmVzdWx0LnJvd0NvdW50ID4gMDtcbiAgfVxuXG4gIGFzeW5jIGdldFRhc2tBc3NpZ25lZXModGFza0lkOiBzdHJpbmcpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5xdWVyeShcbiAgICAgIGBTRUxFQ1QgdS5pZCwgdS51c2VybmFtZSwgdS5lbWFpbCwgdGEuYXNzaWduZWRfYXQgXG4gICAgICAgRlJPTSB0YXNrX2Fzc2lnbmVlcyB0YSBcbiAgICAgICBKT0lOIHVzZXJzIHUgT04gdGEudXNlcl9pZCA9IHUuaWQgXG4gICAgICAgV0hFUkUgdGEudGFza19pZCA9ICQxYCxcbiAgICAgIFt0YXNrSWRdXG4gICAgKTtcbiAgICByZXR1cm4gcmVzdWx0LnJvd3M7XG4gIH1cblxuICBhc3luYyBhc3NpZ25UYXNrVG9Vc2VyKHRhc2tJZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZywgYXNzaWduZWRCeT86IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnF1ZXJ5KFxuICAgICAgICBgSU5TRVJUIElOVE8gdGFza19hc3NpZ25lZXMgKHRhc2tfaWQsIHVzZXJfaWQsIGFzc2lnbmVkX2J5KSBcbiAgICAgICAgIFZBTFVFUyAoJDEsICQyLCAkMykgXG4gICAgICAgICBPTiBDT05GTElDVCAodGFza19pZCwgdXNlcl9pZCkgRE8gTk9USElOR2AsXG4gICAgICAgIFt0YXNrSWQsIHVzZXJJZCwgYXNzaWduZWRCeV1cbiAgICAgICk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYXNzaWduaW5nIHRhc2sgdG8gdXNlcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdW5hc3NpZ25UYXNrRnJvbVVzZXIodGFza0lkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5xdWVyeShcbiAgICAgICdERUxFVEUgRlJPTSB0YXNrX2Fzc2lnbmVlcyBXSEVSRSB0YXNrX2lkID0gJDEgQU5EIHVzZXJfaWQgPSAkMicsXG4gICAgICBbdGFza0lkLCB1c2VySWRdXG4gICAgKTtcbiAgICByZXR1cm4gcmVzdWx0LnJvd0NvdW50ID4gMDtcbiAgfVxuXG4gIC8vID09PSDQlNCe0J/QntCb0J3QmNCi0JXQm9Cs0J3Qq9CVINCc0JXQotCe0JTQqyDQlNCb0K8g0KHQntCS0JzQldCh0KLQmNCc0J7QodCi0JggPT09XG5cbiAgYXN5bmMgZ2V0Qm9hcmRDb2x1bW5zKGJvYXJkSWQ6IHN0cmluZyk6IFByb21pc2U8Q29sdW1uW10+IHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRDb2x1bW5zQnlCb2FyZElkKGJvYXJkSWQpO1xuICB9XG5cbiAgYXN5bmMgZ2V0Q29sdW1uVGFza3MoY29sdW1uSWQ6IHN0cmluZyk6IFByb21pc2U8VGFza1tdPiB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0VGFza3NCeUNvbHVtbklkKGNvbHVtbklkKTtcbiAgfVxuXG4gIC8vID09PSDQnNCV0KLQntCU0Ksg0JTQm9CvINCh0JXQodCh0JjQmSA9PT1cblxuICBhc3luYyBjcmVhdGVTZXNzaW9uKHNlc3Npb25EYXRhOiBPbWl0PFNlc3Npb24sICdpZCcgfCAnY3JlYXRlZF9hdCcgfCAndXBkYXRlZF9hdCc+KTogUHJvbWlzZTxTZXNzaW9uPiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5xdWVyeShcbiAgICAgICdJTlNFUlQgSU5UTyBzZXNzaW9ucyAoc2Vzc2lvbl90b2tlbiwgdXNlcl9pZCwgZXhwaXJlc19hdCkgVkFMVUVTICgkMSwgJDIsICQzKSBSRVRVUk5JTkcgKicsXG4gICAgICBbc2Vzc2lvbkRhdGEudG9rZW4sIHNlc3Npb25EYXRhLnVzZXJfaWQsIHNlc3Npb25EYXRhLmV4cGlyZXNfYXRdXG4gICAgKTtcbiAgICBcbiAgICBjb25zdCByb3cgPSByZXN1bHQucm93c1swXTtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHJvdy5pZCxcbiAgICAgIHVzZXJfaWQ6IHJvdy51c2VyX2lkLFxuICAgICAgdG9rZW46IHJvdy5zZXNzaW9uX3Rva2VuLFxuICAgICAgZXhwaXJlc19hdDogcm93LmV4cGlyZXNfYXQsXG4gICAgICBjcmVhdGVkX2F0OiByb3cuY3JlYXRlZF9hdFxuICAgIH07XG4gIH1cblxuICBhc3luYyBnZXRTZXNzaW9uQnlUb2tlbihzZXNzaW9uVG9rZW46IHN0cmluZyk6IFByb21pc2U8U2Vzc2lvbiB8IG51bGw+IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnF1ZXJ5KFxuICAgICAgJ1NFTEVDVCAqIEZST00gc2Vzc2lvbnMgV0hFUkUgc2Vzc2lvbl90b2tlbiA9ICQxIEFORCBleHBpcmVzX2F0ID4gTk9XKCknLFxuICAgICAgW3Nlc3Npb25Ub2tlbl1cbiAgICApO1xuICAgIFxuICAgIGlmICghcmVzdWx0LnJvd3NbMF0pIHJldHVybiBudWxsO1xuICAgIFxuICAgIGNvbnN0IHJvdyA9IHJlc3VsdC5yb3dzWzBdO1xuICAgIHJldHVybiB7XG4gICAgICBpZDogcm93LmlkLFxuICAgICAgdXNlcl9pZDogcm93LnVzZXJfaWQsXG4gICAgICB0b2tlbjogcm93LnNlc3Npb25fdG9rZW4sXG4gICAgICBleHBpcmVzX2F0OiByb3cuZXhwaXJlc19hdCxcbiAgICAgIGNyZWF0ZWRfYXQ6IHJvdy5jcmVhdGVkX2F0XG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZVNlc3Npb24oc2Vzc2lvblRva2VuOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnF1ZXJ5KFxuICAgICAgJ0RFTEVURSBGUk9NIHNlc3Npb25zIFdIRVJFIHNlc3Npb25fdG9rZW4gPSAkMScsXG4gICAgICBbc2Vzc2lvblRva2VuXVxuICAgICk7XG4gICAgcmV0dXJuIHJlc3VsdC5yb3dDb3VudCA+IDA7XG4gIH1cblxuICBhc3luYyBkZWxldGVVc2VyU2Vzc2lvbnModXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucXVlcnkoXG4gICAgICAnREVMRVRFIEZST00gc2Vzc2lvbnMgV0hFUkUgdXNlcl9pZCA9ICQxJyxcbiAgICAgIFt1c2VySWRdXG4gICAgKTtcbiAgICByZXR1cm4gcmVzdWx0LnJvd0NvdW50O1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlRXhwaXJlZFNlc3Npb25zKCk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5xdWVyeShcbiAgICAgICdERUxFVEUgRlJPTSBzZXNzaW9ucyBXSEVSRSBleHBpcmVzX2F0IDw9IE5PVygpJ1xuICAgICk7XG4gICAgcmV0dXJuIHJlc3VsdC5yb3dDb3VudDtcbiAgfVxuXG4gIC8vID09PSDQnNCV0KLQntCU0Ksg0JTQm9CvINCa0J7QnNCc0JXQndCi0JDQoNCY0JXQkiA9PT1cblxuICBhc3luYyBjcmVhdGVDb21tZW50KGNvbnRlbnQ6IHN0cmluZywgdGFza0lkOiBzdHJpbmcsIGF1dGhvcklkOiBzdHJpbmcpOiBQcm9taXNlPENvbW1lbnQ+IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnF1ZXJ5KFxuICAgICAgYElOU0VSVCBJTlRPIGNvbW1lbnRzIChjb250ZW50LCB0YXNrX2lkLCBhdXRob3JfaWQpIFxuICAgICAgIFZBTFVFUyAoJDEsICQyLCAkMykgXG4gICAgICAgUkVUVVJOSU5HICpgLFxuICAgICAgW2NvbnRlbnQsIHRhc2tJZCwgYXV0aG9ySWRdXG4gICAgKTtcbiAgICByZXR1cm4gcmVzdWx0LnJvd3NbMF07XG4gIH1cblxuICBhc3luYyBnZXRDb21tZW50c0J5VGFza0lkKHRhc2tJZDogc3RyaW5nKTogUHJvbWlzZTxDb21tZW50W10+IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnF1ZXJ5KFxuICAgICAgJ1NFTEVDVCAqIEZST00gY29tbWVudHMgV0hFUkUgdGFza19pZCA9ICQxIEFORCBkZWxldGVkX2F0IElTIE5VTEwgT1JERVIgQlkgY3JlYXRlZF9hdCcsXG4gICAgICBbdGFza0lkXVxuICAgICk7XG4gICAgcmV0dXJuIHJlc3VsdC5yb3dzO1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ29tbWVudChpZDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPENvbW1lbnQgfCBudWxsPiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5xdWVyeShcbiAgICAgICdVUERBVEUgY29tbWVudHMgU0VUIGNvbnRlbnQgPSAkMiBXSEVSRSBpZCA9ICQxIFJFVFVSTklORyAqJyxcbiAgICAgIFtpZCwgY29udGVudF1cbiAgICApO1xuICAgIHJldHVybiByZXN1bHQucm93c1swXSB8fCBudWxsO1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlQ29tbWVudChpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5xdWVyeShcbiAgICAgICdVUERBVEUgY29tbWVudHMgU0VUIGRlbGV0ZWRfYXQgPSBDVVJSRU5UX1RJTUVTVEFNUCBXSEVSRSBpZCA9ICQxJyxcbiAgICAgIFtpZF1cbiAgICApO1xuICAgIHJldHVybiByZXN1bHQucm93Q291bnQgPiAwO1xuICB9XG5cbiAgLy8gPT09INCc0JXQotCe0JTQqyDQlNCb0K8g0KLQldCT0J7QkiA9PT1cblxuICBhc3luYyBjcmVhdGVUYWcobmFtZTogc3RyaW5nLCBjb2xvcjogc3RyaW5nLCBwcm9qZWN0SWQ/OiBzdHJpbmcpOiBQcm9taXNlPFRhZz4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucXVlcnkoXG4gICAgICBgSU5TRVJUIElOVE8gdGFncyAobmFtZSwgY29sb3IsIHByb2plY3RfaWQpIFxuICAgICAgIFZBTFVFUyAoJDEsICQyLCAkMykgXG4gICAgICAgUkVUVVJOSU5HICpgLFxuICAgICAgW25hbWUsIGNvbG9yLCBwcm9qZWN0SWRdXG4gICAgKTtcbiAgICByZXR1cm4gcmVzdWx0LnJvd3NbMF07XG4gIH1cblxuICBhc3luYyBnZXRUYWdzQnlQcm9qZWN0SWQocHJvamVjdElkOiBzdHJpbmcpOiBQcm9taXNlPFRhZ1tdPiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5xdWVyeShcbiAgICAgICdTRUxFQ1QgKiBGUk9NIHRhZ3MgV0hFUkUgcHJvamVjdF9pZCA9ICQxIE9SREVSIEJZIG5hbWUnLFxuICAgICAgW3Byb2plY3RJZF1cbiAgICApO1xuICAgIHJldHVybiByZXN1bHQucm93cztcbiAgfVxuXG4gIGFzeW5jIGFkZFRhZ1RvVGFzayh0YXNrSWQ6IHN0cmluZywgdGFnSWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnF1ZXJ5KFxuICAgICAgICAnSU5TRVJUIElOVE8gdGFza190YWdzICh0YXNrX2lkLCB0YWdfaWQpIFZBTFVFUyAoJDEsICQyKScsXG4gICAgICAgIFt0YXNrSWQsIHRhZ0lkXVxuICAgICAgKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlbW92ZVRhZ0Zyb21UYXNrKHRhc2tJZDogc3RyaW5nLCB0YWdJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5xdWVyeShcbiAgICAgICdERUxFVEUgRlJPTSB0YXNrX3RhZ3MgV0hFUkUgdGFza19pZCA9ICQxIEFORCB0YWdfaWQgPSAkMicsXG4gICAgICBbdGFza0lkLCB0YWdJZF1cbiAgICApO1xuICAgIHJldHVybiByZXN1bHQucm93Q291bnQgPiAwO1xuICB9XG5cbiAgYXN5bmMgZ2V0VGFnc0J5VGFza0lkKHRhc2tJZDogc3RyaW5nKTogUHJvbWlzZTxUYWdbXT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucXVlcnkoXG4gICAgICBgU0VMRUNUIHQuKiBGUk9NIHRhZ3MgdCBcbiAgICAgICBKT0lOIHRhc2tfdGFncyB0dCBPTiB0LmlkID0gdHQudGFnX2lkIFxuICAgICAgIFdIRVJFIHR0LnRhc2tfaWQgPSAkMWAsXG4gICAgICBbdGFza0lkXVxuICAgICk7XG4gICAgcmV0dXJuIHJlc3VsdC5yb3dzO1xuICB9XG5cbiAgLy8g0KHRgtCw0YLQuNGH0LXRgdC60LjQuSDQvNC10YLQvtC0INC00LvRjyDQv9C+0LvRg9GH0LXQvdC40Y8g0Y3QutC30LXQvNC/0LvRj9GA0LAgKFNpbmdsZXRvbilcbiAgc3RhdGljIGdldEluc3RhbmNlKCk6IFBvc3RncmVTUUxBZGFwdGVyIHtcbiAgICBpZiAoIVBvc3RncmVTUUxBZGFwdGVyLmluc3RhbmNlKSB7XG4gICAgICBjb25zdCBjb25maWc6IERhdGFiYXNlQ29uZmlnID0ge1xuICAgICAgICBob3N0OiBwcm9jZXNzLmVudi5EQl9IT1NUIHx8ICdsb2NhbGhvc3QnLFxuICAgICAgICBwb3J0OiBwYXJzZUludChwcm9jZXNzLmVudi5EQl9QT1JUIHx8ICc1NDMyJyksXG4gICAgICAgIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FIHx8ICdlbmNvcmVfdGFza3MnLFxuICAgICAgICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSIHx8ICdwb3N0Z3JlcycsXG4gICAgICAgIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5EQl9QQVNTV09SRCB8fCAncGFzc3dvcmQnLFxuICAgICAgICBzc2w6IGZhbHNlIC8vINCe0YLQutC70Y7Rh9Cw0LXQvCBTU0wg0LTQu9GPINC70L7QutCw0LvRjNC90L7Qs9C+IFBvc3RncmVTUUxcbiAgICAgIH07XG4gICAgICBcbiAgICAgIFBvc3RncmVTUUxBZGFwdGVyLmluc3RhbmNlID0gbmV3IFBvc3RncmVTUUxBZGFwdGVyKGNvbmZpZyk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBQb3N0Z3JlU1FMQWRhcHRlci5pbnN0YW5jZTtcbiAgfVxufVxuXG4vLyDQrdC60YHQv9C+0YDRgiDRjdC60LfQtdC80L/Qu9GP0YDQsCDQsNC00LDQv9GC0LXRgNCwXG5sZXQgZGJBZGFwdGVyOiBQb3N0Z3JlU1FMQWRhcHRlciB8IG51bGwgPSBudWxsO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UG9zdGdyZVNRTEFkYXB0ZXIoKTogUG9zdGdyZVNRTEFkYXB0ZXIge1xuICBpZiAoIWRiQWRhcHRlcikge1xuICAgIGNvbnN0IGNvbmZpZzogRGF0YWJhc2VDb25maWcgPSB7XG4gICAgICBob3N0OiBwcm9jZXNzLmVudi5EQl9IT1NUIHx8ICdsb2NhbGhvc3QnLFxuICAgICAgcG9ydDogcGFyc2VJbnQocHJvY2Vzcy5lbnYuREJfUE9SVCB8fCAnNTQzMicpLFxuICAgICAgZGF0YWJhc2U6IHByb2Nlc3MuZW52LkRCX05BTUUgfHwgJ2VuY29yZV90YXNrcycsXG4gICAgICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSIHx8ICdwb3N0Z3JlcycsXG4gICAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTU1dPUkQgfHwgJ3Bhc3N3b3JkJyxcbiAgICAgIHNzbDogcHJvY2Vzcy5lbnYuREJfU1NMID09PSAndHJ1ZSdcbiAgICB9O1xuICAgIFxuICAgIGRiQWRhcHRlciA9IG5ldyBQb3N0Z3JlU1FMQWRhcHRlcihjb25maWcpO1xuICB9XG4gIFxuICByZXR1cm4gZGJBZGFwdGVyO1xufVxuXG5leHBvcnQgZGVmYXVsdCBnZXRQb3N0Z3JlU1FMQWRhcHRlcjsiXSwibmFtZXMiOlsiUG9vbCIsImJjcnlwdCIsIlBvc3RncmVTUUxBZGFwdGVyIiwiaW5zdGFuY2UiLCJjb25zdHJ1Y3RvciIsImNvbmZpZyIsImlzSW5pdGlhbGl6ZWQiLCJzc2xDb25maWciLCJzc2wiLCJob3N0IiwiaW5jbHVkZXMiLCJyZWplY3RVbmF1dGhvcml6ZWQiLCJjYSIsInVuZGVmaW5lZCIsInBvb2wiLCJwb3J0IiwiZGF0YWJhc2UiLCJ1c2VyIiwicGFzc3dvcmQiLCJtYXgiLCJpZGxlVGltZW91dE1pbGxpcyIsImNvbm5lY3Rpb25UaW1lb3V0TWlsbGlzIiwiaW5pdGlhbGl6ZSIsImNvbnNvbGUiLCJsb2ciLCJjbGllbnQiLCJjb25uZWN0IiwicXVlcnkiLCJyZWxlYXNlIiwiZXJyb3IiLCJjbG9zZSIsImVuZCIsImdldENsaWVudCIsImNvbnZlcnRTcWxUb1Bvc3RncmVTUUwiLCJzcWwiLCJwYXJhbUluZGV4IiwicmVwbGFjZSIsInRleHQiLCJwYXJhbXMiLCJjb252ZXJ0ZWRTcWwiLCJyZXN1bHQiLCJjcmVhdGVVc2VyIiwidXNlckRhdGEiLCJlbWFpbCIsIm5hbWUiLCJyb2xlIiwicGFzc3dvcmRfaGFzaCIsImlzQXBwcm92ZWQiLCJhdmF0YXIiLCJ1c2VyRGF0YVdpdGhQYXNzd29yZCIsImhhc2hlZFBhc3N3b3JkIiwiaGFzaCIsImFwcHJvdmFsU3RhdHVzIiwicm93Iiwicm93cyIsImlkIiwiYXZhdGFyX3VybCIsImFwcHJvdmFsX3N0YXR1cyIsImNyZWF0ZWRfYXQiLCJ1cGRhdGVkX2F0IiwiZ2V0VXNlckJ5RW1haWwiLCJnZXRVc2VyQnlJZCIsInVwZGF0ZVVzZXIiLCJ1cGRhdGVzIiwiZmllbGRzIiwiT2JqZWN0Iiwia2V5cyIsImZpbHRlciIsImtleSIsImxlbmd0aCIsImRiRmllbGRzIiwibWFwIiwiZmllbGQiLCJkYlZhbHVlcyIsInNldENsYXVzZSIsImluZGV4Iiwiam9pbiIsImlzX2FwcHJvdmVkIiwiZ2V0QWxsVXNlcnMiLCJkZWxldGVVc2VyIiwicm93Q291bnQiLCJjcmVhdGVQcm9qZWN0IiwicHJvamVjdERhdGEiLCJvd25lcklkSW50IiwicGFyc2VJbnQiLCJjcmVhdGVkX2J5IiwiaXNOYU4iLCJFcnJvciIsImRlc2NyaXB0aW9uIiwiY29sb3IiLCJpY29uX3VybCIsInRlbGVncmFtX2NoYXRfaWQiLCJ0ZWxlZ3JhbV90b3BpY19pZCIsInByb2plY3QiLCJhcGlQcm9qZWN0Iiwib3duZXJfaWQiLCJ0b1N0cmluZyIsImljb24iLCJnZXRQcm9qZWN0QnlJZCIsImdldFByb2plY3RzQnlVc2VySWQiLCJ1c2VySWQiLCJ1c2VySWRJbnQiLCJnZXRVc2VyUHJvamVjdHMiLCJnZXRBbGxQcm9qZWN0cyIsInVwZGF0ZVByb2plY3QiLCJ2YWx1ZXMiLCJkZWxldGVQcm9qZWN0IiwiaGFzUHJvamVjdEFjY2VzcyIsInByb2plY3RJZCIsIm93bmVyUmVzdWx0IiwicHJvamVjdE93bmVyIiwibWVtYmVyUmVzdWx0IiwiY3JlYXRlQm9hcmQiLCJib2FyZERhdGEiLCJwcm9qZWN0X2lkIiwiZ2V0Qm9hcmRCeUlkIiwiZ2V0Qm9hcmRzQnlQcm9qZWN0SWQiLCJ1cGRhdGVCb2FyZCIsImRlbGV0ZUJvYXJkIiwiY3JlYXRlQ29sdW1uIiwidGl0bGUiLCJib2FyZElkIiwicG9zaXRpb24iLCJjcmVhdGVkQnkiLCJnZXRDb2x1bW5CeUlkIiwiZ2V0Q29sdW1uc0J5Qm9hcmRJZCIsInVwZGF0ZUNvbHVtbiIsImRlbGV0ZUNvbHVtbiIsImNyZWF0ZVRhc2siLCJ0YXNrRGF0YSIsInN0YXR1cyIsInByaW9yaXR5IiwiYm9hcmRfaWQiLCJjb2x1bW5faWQiLCJhc3NpZ25lZV9pZCIsInJlcG9ydGVyX2lkIiwidGFzayIsImdldFRhc2tCeUlkIiwiZ2V0VGFza3NCeVByb2plY3RJZCIsImdldFRhc2tzQnlDb2x1bW5JZCIsImNvbHVtbklkIiwidXBkYXRlVGFzayIsImRlbGV0ZVRhc2siLCJnZXRUYXNrQXNzaWduZWVzIiwidGFza0lkIiwiYXNzaWduVGFza1RvVXNlciIsImFzc2lnbmVkQnkiLCJ1bmFzc2lnblRhc2tGcm9tVXNlciIsImdldEJvYXJkQ29sdW1ucyIsImdldENvbHVtblRhc2tzIiwiY3JlYXRlU2Vzc2lvbiIsInNlc3Npb25EYXRhIiwidG9rZW4iLCJ1c2VyX2lkIiwiZXhwaXJlc19hdCIsInNlc3Npb25fdG9rZW4iLCJnZXRTZXNzaW9uQnlUb2tlbiIsInNlc3Npb25Ub2tlbiIsImRlbGV0ZVNlc3Npb24iLCJkZWxldGVVc2VyU2Vzc2lvbnMiLCJkZWxldGVFeHBpcmVkU2Vzc2lvbnMiLCJjcmVhdGVDb21tZW50IiwiY29udGVudCIsImF1dGhvcklkIiwiZ2V0Q29tbWVudHNCeVRhc2tJZCIsInVwZGF0ZUNvbW1lbnQiLCJkZWxldGVDb21tZW50IiwiY3JlYXRlVGFnIiwiZ2V0VGFnc0J5UHJvamVjdElkIiwiYWRkVGFnVG9UYXNrIiwidGFnSWQiLCJyZW1vdmVUYWdGcm9tVGFzayIsImdldFRhZ3NCeVRhc2tJZCIsImdldEluc3RhbmNlIiwicHJvY2VzcyIsImVudiIsIkRCX0hPU1QiLCJEQl9QT1JUIiwiREJfTkFNRSIsIkRCX1VTRVIiLCJEQl9QQVNTV09SRCIsImRiQWRhcHRlciIsImdldFBvc3RncmVTUUxBZGFwdGVyIiwiREJfU1NMIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/postgresql-adapter.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "better-sqlite3":
/*!*********************************!*\
  !*** external "better-sqlite3" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("better-sqlite3");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = import("pg");;

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/semver","vendor-chunks/bcryptjs","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/jws","vendor-chunks/lodash.once","vendor-chunks/jwa","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/lodash.isplainobject","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time","vendor-chunks/zod"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fboards%2Froute&page=%2Fapi%2Fboards%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fboards%2Froute.ts&appDir=E%3A%5CProjects%5Cencore-tasks%5Cencore-tasks-main%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CProjects%5Cencore-tasks%5Cencore-tasks-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();